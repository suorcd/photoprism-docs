{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"<p>PhotoPrism\u00ae is an AI-Powered Photos App for the Decentralized Web. It makes use of the latest technologies to tag and find pictures automatically without getting in your way. You can run it at home, on a private server, or in the cloud.</p> <p></p>","title":"PhotoPrism: Browse Your Life in Pictures"},{"location":"#feature-overview","text":"<p>Our mission is to provide the most user- and privacy-friendly solution to keep your pictures organized and accessible. That's why PhotoPrism was built from the ground up to run wherever you need it, without compromising freedom, privacy, or functionality:</p> <ul> <li>Browse all your photos and videos without worrying about RAW conversion, duplicates or video formats</li> <li>Easily find specific pictures using powerful search filters</li> <li>Recognizes the faces of your family and friends</li> <li>Automatic classification of pictures based on their content and location </li> <li>Play Live Photos by hovering over them in albums and search results</li> <li>Since the User Interface is a  Progressive Web App,   it provides a native app-like experience, and you can conveniently install it on the home screen of all major operating systems and mobile devices</li> <li>Includes 4 high-resolution World Maps to bring back the memories of your favorite trips</li> <li>Metadata is extracted and merged from Exif, XMP, and other sources such as Google Photos</li> <li>Many more image properties like Colors, Chroma, and Quality can be searched as well</li> <li>Use  PhotoSync to securely backup iOS and Android phones in the background</li> <li>WebDAV clients such as Microsoft's Windows Explorer and Apple's Finder can connect directly to PhotoPrism, allowing you to open, edit, and delete files from your computer as if they were local</li> </ul> <p>See Complete Feature List \u203a</p>","title":"Feature Overview"},{"location":"#100-privacy","text":"<p>Because PhotoPrism is 100% self-funded and independent, we can promise you that we will never sell your data and that we will always be transparent about our software and services. Your data will never be shared with Google, Amazon, Microsoft or Apple unless you intentionally upload files to one of their services.</p> <p> TRY OUR DEMO GET STARTED </p>","title":"100% Privacy"},{"location":"credits/","text":"<p>Thanks to everyone who made this possible!</p>","title":"Credits"},{"location":"credits/#technologies","text":"<ul> <li>Go, Gin and Vuetify</li> <li>Google TensorFlow and Material Design</li> <li>MkDocs and Material for MkDocs</li> <li>Complete list of 3rd-party software packages</li> </ul>","title":"Technologies"},{"location":"credits/#infrastructure","text":"<ul> <li>KeyCDN provides CDN services for our site and demo</li> <li>Docker hosts our app images and approved us for their Open Source Program</li> <li>GitHub hosts all code repositories</li> <li>Drone CI builds and tests our code  </li> <li>DigitalOcean hosts our documentation and website</li> </ul>","title":"Infrastructure"},{"location":"credits/#artwork","text":"<ul> <li>AI-Generated Faces by generated.photos</li> <li>NGC 1499 California Nebula by Remidone</li> <li>Prism Light Separation by digitalvosem</li> <li>Follow that light by Margeois</li> <li>Gopher overlapping the TensorFlow logo by P. Galeone</li> <li>Go Gopher designed by Renee French</li> <li>Gopher Stickers created by Takuya Ueda</li> </ul>","title":"Artwork"},{"location":"known-issues/","text":"<p>This is a high-level overview of the currently unresolved issues. PhotoPrism follows a zero-bug policy, which means that we do our best to fix any issues we learn about. However, sometimes this is not immediately possible, for example due to dependencies on third-party libraries, other apps, or because it is a specific use case that we do not support at this time.</p>  <p>In order to improve readability and reduce maintenance, minor issues and those we plan to fix in the short term are not listed here. You can browse all reported bugs, ideas, and planned enhancements on GitHub Issues.</p>","title":"Known Issues"},{"location":"known-issues/#self-hosted-setup","text":"","title":"Self-Hosted Setup"},{"location":"known-issues/#shared-domain","text":"<p>Installation in a sub-directory on a shared domain is generally possible if you run your instance behind a reverse proxy. At the moment, this method is experimental. We do not recommend it because technical expertise is required and a number of specific issues still need to be addressed:</p> <ul> <li>Hosting: Resolve known issues when installing in a sub-directory on a shared domain #2391</li> </ul>","title":"Shared Domain"},{"location":"known-issues/#nested-storage-folder","text":"<p>It is not supported to configure the storage folder to be inside the originals folder unless the name starts with a <code>.</code> to indicate that it is hidden. Otherwise, this will result in increasingly longer indexing times and high disk usage, since such nesting causes a loop by re-indexing previously created thumbnails and sidecar files:</p> <ul> <li>Config: Prevent nesting of \"storage\" folder inside \"originals\" unless hidden #1642</li> </ul> <p>In practice, this is not a problem as long as you follow our documentation and examples. We intend to automatically detect, report, and prevent such issues in the future. Due to the flexible mapping of folders within a Docker container to host directories, this has not yet been implemented.</p>","title":"Nested Storage Folder"},{"location":"known-issues/#symbolic-links","text":"<p>Symbolic links to files and directories within the originals folder are supported if they are accessible from the environment in which your instance is running. However, you cannot mount a symbolic link as a storage folder or use links within the storage folder.</p>","title":"Symbolic Links"},{"location":"known-issues/#user-authentication","text":"","title":"User Authentication"},{"location":"known-issues/#session-invalidation","text":"<p>Session management has been improved in our development version to address this issue.</p>  <p>User authentication sessions expire automatically after 7 days. In some cases, you may want to ensure that all sessions expire immediately to require re-login, for example, after a password change if the previously used password is known to people who should no longer be able to access your instance:</p> <ul> <li>Security: Changing password doesn't invalidate existing auth tokens #1935</li> </ul> <p>This is a known limitation with the current implementation. One of the reasons for this trade-off is that the account may be used by background processes that are synchronizing files. Invalidating the session immediately could then lead to data loss, which we consider unacceptable. At the very least, immediate invalidation would require more complex client logic and additional documentation to help developers implement it correctly.</p> <p>While our team is working on a new implementation as part of full multi-user support, you can manually delete <code>storage/config/sessions.json</code> and then restart your instance to revoke all sessions and require re-login.</p>","title":"Session Invalidation"},{"location":"known-issues/#file-compatibility","text":"","title":"File Compatibility"},{"location":"known-issues/#jpeg-bad-rst-marker","text":"<p>This error can occur when decoding JPEG images that contain consecutive 0xFF bytes, e.g. images that have a \"glich\" (like a few lines of missing image information at the end) or were created with software that inserts them for padding, although this is based on an edge case of the specification and rather uncommon:</p> <ul> <li>Bug: (invalid JPEG format: bad RST marker) #1673</li> <li>image/jpeg: \"bad RST marker\" error when decoding #40130</li> <li>JPEG: Automatically check and repair broken/invalid images #2463</li> </ul>","title":"JPEG: Bad RST Marker"},{"location":"known-issues/#raw-converters","text":"","title":"RAW Converters"},{"location":"known-issues/#jpeg-size-limit","text":"<p>RawTherapee cannot be used to convert RAWs if you want to limit the size of JPEGs. In general, when converting RAW files, the size of the generated JPEG images can be limited using the environment variable <code>PHOTOPRISM_JPEG_SIZE</code> or the CLI parameter <code>--jpeg-size</code>. However, this does not work with RawTherapee because, unlike Darktable, it does not support CLI options for limiting JPEG size:</p> <ul> <li>RAW: PHOTOPRISM_JPEG_SIZE is ignored when converting RAW with RawTherapee #2446</li> </ul> <p>It would also be bad for indexing performance if PhotoPrism downsized the generated file after converting it with RawTherapee. As a result, this option is ignored when converting a RAW file with RawTherapee. Whether RawTherapee is used depends on additional settings such as <code>PHOTOPRISM_DARKTABLE_BLACKLIST</code> (default: \"dng,cr3\") and <code>PHOTOPRISM_DISABLE_DARKTABLE</code> (default: \"false\").</p>","title":"JPEG Size Limit"},{"location":"known-issues/#reporting-bugs","text":"<p>Before reporting a bug, please use our Troubleshooting Checklists to determine the cause of your problem. If you have a general question, need help, it could be a local configuration issue, or a misunderstanding in how the software works:</p> <ul> <li>you are welcome to ask in our Community Chat</li> <li>or post your question in GitHub Discussions</li> </ul> <p>When reporting a problem, always include the software versions you are using and other information about your environment such as browser, browser plugins, operating system, storage type, memory size, and processor.</p> <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app.</p> <p>Note that all issue subscribers receive an email notification from GitHub for each new comment, so these should only be used for sharing important information and not for personal discussions or questions.</p>","title":"Reporting Bugs"},{"location":"release-notes/","text":"<p>Back us on Patreon or GitHub Sponsors. Your continued support helps us provide regular updates and services like world maps. Thank you! \ud83d\udc9c</p>   <p>You can test new features by changing the image tag in your docker-compose.yml from <code>:latest</code> to <code>:preview</code>, then pulling the most recent image, and finally restarting your instance.</p>","title":"Release Notes"},{"location":"release-notes/#development-preview","text":"<p>Build 220919-cc8bab446</p> <p>In order to improve security and compatibility, the default Docker image of our upcoming release will be based on Ubuntu 22.04 LTS (Jammy Jellyfish) instead of Debian 12 (Bookworm). You will still be able to choose a different Linux distribution by changing the image tag in your local service configuration. Thanks a lot to all who contributed!</p> <p>What's new?</p> <ul> <li>UX: Scroll position is restored again when navigating back</li> <li>RAW: Upgraded Darktable from v3.8.1 to v4.0.1 (AMD64 only)</li> <li>AVIF: Added support for the AV1 Image File Format</li> <li>HEIF: Added support for Sony's <code>.HIF</code> file extension</li> <li>HEIF: Fixed rotation of images converted to JPEG on Ubuntu 22.04</li> <li>Search: Added <code>city:...</code> and <code>state:...</code> filters</li> <li>Albums: Background worker no longer creates a full backup on every run</li> <li>Index: Delayed RAW file format check to improve performance</li> <li>Import: Related original names are indexed in addition to the main filename</li> <li>Settings: Sync tab is not available in public mode to increase security</li> <li>Config: Increased default resolution limit from 100 to 150 MP</li> <li>SQLite: Preset 5s busy timeout to avoid locking errors when indexing</li> <li>Docker: Now based on Ubuntu 22.04 LTS (Jammy Jellyfish) by default</li> <li>Build: Go has been upgraded to v1.19.1, which includes security fixes</li> <li>Translations: Updated Finnish and Chinese</li> </ul>","title":"Development Preview"},{"location":"release-notes/#september-1-2022","text":"<p>Build 220901-f493607b0</p> <p>With this update you get all the latest translations contributed by our community, mobile navigation enhancements, upgraded dependencies and, as usual, fixes for recently discovered issues. Thanks to everyone involved!</p> <p>What's new?</p> <ul> <li>UX: Mobile toolbar menu has been redesigned and expanded</li> <li>UX: Improved search result and Gemstone theme styles</li> <li>Search: Known file extensions are stripped from <code>name:...</code> filter string</li> <li>Library: Indexing will be aborted if the originals folder is empty</li> <li>Videos: Local time is extracted from <code>DateTimeOriginal</code> if possible</li> <li>Albums: All pictures are shown if \"Private\" has been disabled in Settings</li> <li>Thumbs: <code>photoprism thumbs</code> command regenerates thumbnails of sidecar files</li> <li>Docker: Permissions of original media files are no longer updated on startup</li> <li>Build: Go has been upgraded to v1.19, which includes fixes and enhancements</li> <li>Build: NodeJS has been upgraded from v16 to v18</li> <li>Translations: Added Catalan, Finnish, Ukrainian, and Slovene</li> </ul>","title":"September 1, 2022"},{"location":"release-notes/#july-30-2022","text":"<p>Build 220730-0e1222c83</p> <p>Fixes the activation of public mode with <code>PHOTOPRISM_AUTH_MODE</code> instead of <code>PHOTOPRISM_PUBLIC</code>.</p> <p>What's new?</p> <ul> <li>Auth: Activate public mode via <code>PHOTOPRISM_AUTH_MODE=\"public\"</code></li> </ul>","title":"July 30, 2022"},{"location":"release-notes/#july-28-2022","text":"<p>Build 220728-729ddd920</p> <p>Includes indexing, metadata, and authentication enhancements, as well as updated translations.</p> <p>What's new?</p> <ul> <li>Library: Added support for indexing and importing symbolically linked files</li> <li>Thumbs: Creating redundant JPEG files is skipped to save disk space</li> <li>Zip: Improved file system rights detection and temporary file handling</li> <li>Metadata: Creation time is extracted from DateTimeCreated, if available</li> <li>Metadata: Unknown values are ignored when parsing timestamps</li> <li>Purge: Fixed SQL error when the photo ID of a file is missing</li> <li>Cleanup: Improved logging when deleting related sidecar files</li> <li>Config: Added <code>PHOTOPRISM_AUTH_MODE</code> option to select authentication mode</li> <li>Config: Improved inline docs in <code>docker-compose.yml</code> examples</li> <li>Build: Updated Go to v1.18.4, which includes a number of security and compiler fixes</li> <li>Translations: Added Greek</li> </ul> <p>Breaking Changes</p> <ul> <li>Config: <code>PHOTOPRISM_AUTH</code> has been removed in favor of <code>PHOTOPRISM_AUTH_MODE</code></li> <li>Config: <code>PHOTOPRISM_PUBLIC</code> has been deprecated in favor of <code>PHOTOPRISM_AUTH_MODE</code></li> </ul>","title":"July 28, 2022"},{"location":"release-notes/#june-29-2022","text":"<p>Build 220629-5d7448d2</p> <p>With this update, you'll enjoy a much faster and smoother scrolling experience as well as direct streaming of OGV, VP8, VP9, AV1, WebM and HEVC videos if they do not exceed the configured bitrate limit. Special thanks to Heiko Mathes and Andre Carrera for their contributions!</p> <ul> <li>UX: Much faster and smoother scrolling experience in albums and search results</li> <li>Videos: Direct streaming of OGV, VP8, VP9, AV1, WebM, and HEVC where supported</li> <li>Videos: Fixed incorrect frame rate when using NVIDIA hardware transcoding</li> <li>Sharing: Fixed the spacing of the top navigation toolbar on small screens</li> <li>RAW: Display actual dimensions as Exif metadata can be wrong, e.g. for <code>.NEF</code> files</li> <li>WebDAV: Endpoints have been disabled in public mode as they cannot be used</li> <li>API: Maximum number of search results has been increased to 100,000 files</li> <li>CLI: Config command also lists <code>disable-webdav</code> and <code>http-compression</code></li> <li>Documentation: Added notes about manual session invalidation and other known issues</li> <li>Translations: Updated Arabic, Dutch, Polish, Japanese, Chinese, French, German, and Italian</li> </ul>","title":"June 29, 2022"},{"location":"release-notes/#june-17-2022","text":"<p>Build 220617-0402b8d3</p> <p>This update features updated translations as well as fixes for recently discovered issues.</p> <ul> <li>Albums: A deleted album is restored when trying to add a new album with the same name</li> <li>WebDAV: Added support for auto indexing/importing in a sub-directory on a shared domain</li> <li>Translations: Updated Arabic, Czech, Korean, and Norwegian Bokm\u00e5l</li> </ul>","title":"June 17, 2022"},{"location":"release-notes/#june-14-2022","text":"<p>Build 220614-dea9ff68</p> <p>A small but important update that includes translations to Arabic, a migration fix for MariaDB, and many updated dependencies.</p> <ul> <li>Security: Upgraded Go to v1.18.3, which includes TLS and validation fixes</li> <li>MariaDB: Removed migration that could corrupt photo descriptions in the index</li> <li>Translations: Added Arabic, updated Danish and Polish</li> </ul>","title":"June 14, 2022"},{"location":"release-notes/#may-28-2022","text":"<p>Build 220528-efb5d710</p> <p>This update includes translations that were recently contributed via translate.photoprism.app. Missing translations were added by us using DeepL and Google Translate. Native speakers are invited to help improve those if needed. Thank you very much!</p> <ul> <li>UX: Mobile toolbar menu has been redesigned and made accessible in public mode</li> <li>Themes: Gemstone and Raspberry have been updated</li> </ul>","title":"May 28, 2022"},{"location":"release-notes/#may-27-2022","text":"<p>Build 220527-005770ca</p> <p>This update improves navigation fonts and mobile submenu colors for light themes. We are also working to establish PhotoPrism+ as the name for our community membership and associated benefits. For this, sponsorship information in the app, on our website, on GitHub Sponsors and Patreon is gradually being updated.</p> <ul> <li>UX: Fixed light theme colors of mobile navigation submenu</li> <li>UX: Splash screen has been updated and no longer depends on admin theme</li> </ul>","title":"May 27, 2022"},{"location":"release-notes/#may-24-2022","text":"<p>Build 220524-c76de0df</p> <p>This service release fixes potential issues with our new Debian 12-based Docker image that shipped with the last update. These may have prevented users from deploying it without making changes to their environment. In our ongoing effort to improve usability and performance, we have also implemented a number of UX/UI optimizations, such as using the default operating system font instead of Google's Roboto.</p> <ul> <li>UX: Added submenu to mobile navigation toolbar</li> <li>UX: Updated splash screen information and animation</li> <li>UX: Numerous translations have been added and updated</li> <li>UX: Improved UI styles for right-to-left languages</li> <li>Auth: Short initial passwords are permitted again to avoid login problems</li> <li>Logs: Repeated log messages are omitted to prevent feedback loops</li> <li>Logs: Trace and debug messages are no longer displayed in the UI to avoid information leaks and reduce websocket communication overhead</li> <li>Search: <code>mono:true</code> filter now omits files with unknown chroma</li> <li>Docker: Removed incorrect permission check for storage folder on startup</li> <li>Docker: Supported User and Group ID ranges have been documented</li> </ul> <p>Thank you to everyone who helped with testing, signed up as a sponsor, or contributed in other ways! We appreciate it very much.</p>","title":"May 24, 2022"},{"location":"release-notes/#may-17-2022","text":"<p>Build 220517-b9c68f8f</p> <p>This update features search UX enhancements, a new Docker base image based on Debian 12 \"Bookworm\", as well as fixes for recently discovered issues. Front- and backend translations in numerous languages have been added and updated. Thanks to all involved!</p> <ul> <li>File Formats: Added native support for WebP images and animated GIFs</li> <li>UX: RAW files are skipped by default when downloading photos and ZIP archives</li> <li>Auth: Passwords must have at least 8 characters to mitigate brute-force attacks</li> <li>Search: User interface and database performance optimizations</li> <li>Search: Fixed occasional lag when entering queries in the search toolbar</li> <li>Search: Improved <code>album:...</code> filter supports numeric names, <code>albums:..</code> also AND/OR</li> <li>Search: Improved <code>camera:...</code> and <code>lens:...</code> filters accept names in addition to IDs</li> <li>Search: Added <code>square:yes</code> and <code>landscape:yes</code> filters</li> <li>Albums: \"Add to album\" dialog preloads more names for auto-completion</li> <li>Albums: Album names are shortened if necessary to avoid errors when saving</li> <li>Albums: Fixed accidental creation of duplicates by pressing Enter multiple times</li> <li>People: Improved logging and fixed potential issues with matching unrecognized faces</li> <li>Places: Number of pictures rendered on the map has been limited to 500,000</li> <li>Library: Added button to clear log history in Library &gt; Errors</li> <li>Library: RAW previews and the number of actual files are shown under Originals</li> <li>Library: Disabled hidden files warning while indexing as it can be misleading</li> <li>Index: Fixed errors when re-indexing libraries with archived photos</li> <li>Index: RAW and video conversion commands run in a virtual home directory</li> <li>Thumbnails: Reduced default JPEG quality from 92 to 85 to optimize storage and loading</li> <li>Metadata: Manual local time changes are always preserved when reindexing</li> <li>Metadata: Fixed Exif orientation flag when converting HEIF/HEIC images to JPEG</li> <li>Metadata: Fault-tolerant parsing of timestamps from Exif and JSON sidecar files</li> <li>Metadata: Improved parsing of two-digit years in original file paths</li> <li>Metadata: Exif IFD1 tags with existing IFD0 values are ignored to improve standard compliance</li> <li>Metadata: Brute-force search is skipped by default if no Exif headers were found in JPEG, PNG, TIFF, and HEIF files</li> <li>Metadata: SubSecDateTimeOriginal and SubSecCreateDate timestamps are preferred</li> <li>WebDAV: Up- and download sync can no longer be enabled at the same time to prevent unexpected behavior</li> <li>WebDAV: Added timeout/retry settings and improved handling of sync errors</li> <li>WebDAV: Fixed sharing videos and uploading automatically created albums</li> <li>CLI: Renamed <code>--config-file</code> to <code>--defaults-yaml</code> and improved command help</li> <li>CLI: Added short names for common config flags, e.g. <code>-i</code> for <code>--wakeup-interval</code></li> <li>CLI: Run <code>photoprism show tags</code> to display metadata tags and supported standards</li> <li>CLI: Run <code>photoprism show formats</code> to display supported media and sidecar file formats</li> <li>CLI: Run <code>photoprism show filters</code> to display a search filter overview with examples</li> <li>Config: Improved FFmpeg parameters for Intel QSV hardware transcoding</li> <li>Config: Added NVIDIA hardware video transcoding support for sponsors</li> <li>Config: Added <code>--disable-raw</code> flag to disable indexing and conversion of RAW files</li> <li>Config: Added <code>--resolution-limit</code> option to skip high-resolution images when indexing</li> <li>Docker: New Debian 12 \"Bookworm\" base image with FFmpeg 4.4.1 and Darktable 3.8.1</li> <li>Docker: Added default users and groups for enhanced video transcoding compatibility</li> <li>Translations: Added Swedish, Romanian, Turkish, Lithuanian, Bulgarian, Malay, and Croatian</li> </ul>","title":"May 17, 2022"},{"location":"release-notes/#march-2-2022","text":"<p>Build 220302-0059f429</p> <p>The Docker images for this release are based on Debian 11 \"Bullseye\" and include many updated dependencies such as Darktable 3.8. Behind the scenes, the build process has also been improved so that it will be easier to provide standalone packages in the future.</p> <ul> <li>Auth: New login screen with more space for buttons, links, and legal information</li> <li>Metadata: Redesigned file details tab in the edit dialog</li> <li>Metadata: Support for Zulu formatted timestamps in Exiftool JSON and XMP</li> <li>Sharing: Fixed upload of complete albums via WebDAV</li> <li>Sharing: Manual WebDAV upload of video and RAW files</li> <li>iOS: Fixed multi-select via long touch in Safari PWA mode</li> <li>API: Added cache control header for faster thumbnail loading</li> <li>Config: Simplified configuration of Unix domain socket database connections</li> <li>Config: Added <code>--imprint</code> and <code>--imprint-url</code> to display legal information in the footer</li> <li>Docker: Automatic installation of compatible CPU and GPU drivers</li> <li>Translations: Updated all front- and backend locales</li> </ul> <p>You can now join us on translate.photoprism.app to help translate the UI!</p>","title":"March 2, 2022"},{"location":"release-notes/#january-21-2022","text":"<p>Build 220121-2b4c8e1f</p> <p>We've generated missing translations with the help of DeepL and Google Translate. Native speakers are invited to help us improve those if needed. Learn how to contribute.</p> <ul> <li>Minimum memory requirements have been reduced to 3 GB</li> <li>Photos: Fixed buttons in full screen view</li> <li>People: Fixed typo that prevented face matching optimization</li> <li>Moments: Improved update performance on MariaDB</li> <li>Translations: Pre-translated missing UI messages</li> </ul>","title":"January 21, 2022"},{"location":"release-notes/#january-18-2022","text":"<p>Build 220118-76c94a1f</p> <ul> <li>Auth: Logout redirects to base URI instead of site root</li> <li>Videos: Excluded streaming from gzip compression</li> <li>Videos: Fixed Content-Type header and streaming in Safari</li> <li>Folders: Fixed search query string substitutions and sanitation</li> <li>UI: Updated information and links in Settings &gt; About</li> <li>UI: Improved bootstrap template rendering performance</li> </ul>","title":"January 18, 2022"},{"location":"release-notes/#january-7-2022","text":"<p>Build 220107-f5b7ef83</p> <p>Based on our zero bug policy, this update focuses on bug fixes, security, and UX enhancements for search  filters, metadata, and the indexer. In addition, one of the merged pull requests may improve face recognition  performance on smaller devices and with large libraries.</p> <ul> <li>People: Improved update performance on MariaDB</li> <li>People: Improved contrast of person selection menu</li> <li>Albums: Private pictures are excluded from download as zip</li> <li>Search: Improved query parser for additional security</li> <li>Search: Added <code>uid:...</code> search filter to find photos by uid</li> <li>Search: <code>keywords:...</code> filter does not exclude stopwords anymore</li> <li>Index: Original filenames can be extracted from Exiftool JSON</li> <li>Index: More accurate and resilient handling of related files and photo stacks</li> <li>Live Photos: HEIF is used to create primary JPEG instead of a MOV still image</li> <li>Metadata: Reduced log level for missing Exif data from warn to info</li> <li>Metadata: Increased size of projection and color profile fields to 40 characters</li> <li>Backups: Improved help for config options and CLI commands</li> <li>Help: Fixed reverse proxy documentation links</li> <li>Config: Added Apple Video Toolbox hardware transcoding support for macOS</li> <li>Config: Added <code>/opt/photoprism</code> to search path for asset and storage folders</li> </ul>","title":"January 7, 2022"},{"location":"release-notes/#december-15-2021","text":"<p>Build 211215-93b26f19</p> <p>PhotoPrism is not directly affected by the Apache Log4j vulnerability. Logs may still contain messages that can cause harm if consumed by an unpatched Java application. As a precaution, this release includes additional rules and filters to validate user input.</p> <ul> <li>Sharing: Fixed album link redirect on shared domains</li> <li>Import: More helpful warning when another import is already running</li> <li>Docker: ARMv7 image for 32-bit processors and operating systems</li> </ul>","title":"December 15, 2021"},{"location":"release-notes/#december-10-2021","text":"<p>Build 211210-2cb90e7e</p> <p>Starting with this release, the regular multi-arch Docker image is 64-bit only.  A 32-bit version of our stable release for older devices  is offered separately. This frees up development and infrastructure resources with minimal impact.</p> <ul> <li>Security: Upgraded Go to v1.17.5, which includes HTTP/2 and networking fixes</li> <li>People: Concurrent updates are no longer possible to prevent inconsistencies</li> <li>Places: Additional logs to detect invalid GPS coordinates in metadata</li> <li>SQLite: Reduced routine maintenance log levels and fixed migration warnings</li> <li>Thumbnails: Apple Display P3 profile support for more accurate colors</li> <li>Translations: Updated French</li> </ul>","title":"December 10, 2021"},{"location":"release-notes/#december-3-2021","text":"<p>Build 211203-fdb6b5e1</p> <p>Since the funding goal required to make all features and maps generally available has not been reached, early-access features have been renamed to sponsor features in this update. Offline and high-resolution street maps remain free for everyone, while hybrid, topographic, and outdoor maps are  now a sponsor feature. We believe this is fair. A big thank you to all our sponsors and contributors!</p> <ul> <li>CLI: Improved parameter and command descriptions</li> <li>CLI: Reset command optionally also deletes files in the cache folder</li> <li>Config: Improved <code>docker-compose.yml</code> examples</li> </ul>","title":"December 3, 2021"},{"location":"release-notes/#november-30-2021","text":"<p>Build 211130-13cfcf6d</p> <ul> <li>Videos: Live photos page has been added to the sub-navigation</li> <li>Albums: Manually created albums are sorted by name, with favorites first</li> <li>Places: Improved location details in border regions and near Paris</li> <li>PWA: Updated app icons, style is now also applied to the user interface</li> </ul> <p>For our sponsors and contributors:</p> <ul> <li>UI: New Abyss and Gemstone dark themes \ud83d\udc8e</li> </ul>","title":"November 30, 2021"},{"location":"release-notes/#november-28-2021","text":"<p>Build 211128-7e8974fd</p> <p>Official support for MySQL 8 is discontinued with this update as Oracle seems to have stopped shipping new features and enhancements. As a result, the testing effort required before each release is no longer feasible. We recommend upgrading to MariaDB 10.6 or later. PostgreSQL support is planned for 2022 without a specific release date yet.</p> <ul> <li>CLI: <code>photoprism migrations run --failed</code> will re-run previously failed migrations</li> </ul>","title":"November 28, 2021"},{"location":"release-notes/#november-27-2021","text":"<p>Build 211127-86c43159</p> <p>When possible, location estimates now include a latitude and longitude. Photos load faster when you open  them in Places, and the viewer sorts them by distance. Time zone handling has been completely reworked,  in particular for UTC. The Docker base image has been upgraded to Ubuntu 21.10, which ships with  Darktable 3.6 among other updated dependencies. </p> <ul> <li>UX: Redesigned splash screen based on theme colors</li> <li>Places: Viewer loads faster and sorts photos by distance instead of date</li> <li>Places: Less frequent estimates to reduce background activity</li> <li>Places: Normalized names of states, oceans, and lakes</li> <li>Places: Updated location data from OpenStreetMap</li> <li>Places: State albums are grouped by country name</li> <li>Folders: Path names are searched in addition to titles</li> <li>People: Improved face detection performance</li> <li>People: Fixed naming faces in non-primary files</li> <li>People: Optimized matching of children's faces</li> <li>RAW: Upgraded Darktable to 3.6.0</li> <li>Metadata: Improved estimates and UTC time zone handling</li> <li>Metadata: Altitude is indexed even if coordinates are missing</li> <li>Auth: Usernames are not case-sensitive anymore</li> <li>CLI: Added <code>--force</code> flag to <code>photoprism optimize</code> command</li> <li>CLI: Improved parameter and command descriptions</li> <li>Config: Improved <code>docker-compose.yml</code> examples</li> <li>Translations: Added Bahasa Indonesia and Hungarian</li> <li>Translations: Updated Polish and Italian</li> </ul> <p>For our sponsors and contributors:</p> <ul> <li>CLI: Run <code>photoprism places update</code> to retrieve updated location details</li> <li>Config: Set <code>PHOTOPRISM_APP_ICON</code> to choose an alternative PWA icon</li> </ul>","title":"November 27, 2021"},{"location":"release-notes/#october-18-2021","text":"<p>Build 211018-e200f322</p> <ul> <li>UI: Updated Lavender theme</li> <li>Places: Fixed maps initialization after reload in non-public mode</li> <li>Search: Added <code>live</code> and <code>raw:true</code> filters as alternative to <code>type:\u2026</code></li> <li>Search: Added <code>faces:new</code> alias for <code>face:new</code></li> <li>Config: Maximum background worker interval has been increased to 7 days</li> <li>Security: Added <code>Content-Security-Policy</code> header to prevent framing attacks</li> <li>Translations: Updated Russian and Slovak</li> </ul> <p>For our sponsors and contributors:</p> <ul> <li>UI: New Vanta dark theme \u2728</li> </ul>","title":"October 18, 2021"},{"location":"release-notes/#october-10-2021","text":"<p>Build 211010-83b4f783</p> <ul> <li>Translations: Fixed German frontend typo</li> <li>Translations: Updated all backend locales</li> </ul> <p>We've generated missing translations with the help of DeepL and Google Translate. Native speakers are  invited to help us improve those if needed. Learn how to contribute.</p>","title":"October 10, 2021"},{"location":"release-notes/#october-9-2021","text":"<p>Build 211009-d6cc8df5`</p> <ul> <li>UX: Improved wording of search result notifications</li> <li>UX: Fixed sidebar navigation on small screens</li> <li>Users: Show name and email in sidebar navigation</li> <li>Folders: Directory names listed in .ppignore are ignored</li> <li>Config: Allows bypassing low memory suggestion</li> <li>Docs: Updated about page</li> <li>Translations: Updated all frontend locales</li> </ul>","title":"October 9, 2021"},{"location":"release-notes/#october-7-2021","text":"<p>Build 211007-8f55d6f8</p> <ul> <li>People: Improved stability and performance of new faces overview page</li> <li>Index: Duplicate error logs caused by broken JPEG files have been removed</li> <li>UX: Enhanced visibility of file errors in the edit dialog files tab</li> <li>CLI: Revised descriptions of commands and configuration flags</li> </ul> <p>For our sponsors and contributors:</p> <ul> <li>People: Recognized faces can be hidden on the overview page </li> </ul>","title":"October 7, 2021"},{"location":"release-notes/#october-2-2021","text":"<p>Build 211002-bf015326</p> <ul> <li>People: Enhanced UI / UX for renaming and merging faces</li> <li>People: Improved face detection accuracy</li> <li>Labels: Improved photo count accuracy</li> <li>Covers: Thumbnails load and update faster</li> <li>Search: Finds titles when query is too short for full-text index</li> <li>Search: <code>name:\u2026</code> filter ignores path and extension</li> <li>Videos: Optional Intel GPU hardware transcoding support</li> <li>Index: Automatic cleanup of orphaned file entries</li> <li>Logs: Updated log messages for improved readability</li> <li>Translations: Updated German and French</li> <li>Docker: Simplified installation of TensorFlow with AVX / AVX2 support</li> <li>Docker: Entrypoint script uses prefixed environment variables, <code>UID</code> and <code>GID</code> are deprecated</li> </ul>","title":"October 2, 2021"},{"location":"release-notes/#september-25-2021","text":"<p>Build 210925-96168e4b</p> <ul> <li>Recognizes faces so that specific people can be found</li> <li>UX: Improved UI design, navigation, and wording</li> <li>Search: Omit full-text index if query is too short</li> <li>Search: Added <code>keywords:\u2026</code>, <code>subjects:\u2026</code>, and <code>albums:\u2026</code> filters</li> <li>Places: Internationalized maps incl RTL support</li> <li>Labels: Added photo counts to overview page </li> <li>Albums: Fixed share expiration date in form label</li> <li>Calendar: Empty month albums are hidden</li> <li>Viewer: Photos will be updated when search filters change</li> <li>Index: Ignore Synology <code>@eaDir</code> folders</li> <li>Import: Ignore dot files listed in <code>.ppignore</code></li> <li>Upload: Added more detailed error logs</li> <li>Videos: Skip related images when downloading</li> <li>Videos: Added .mp as known MP4 file extension</li> <li>Videos: Default to UTC as metadata time zone</li> <li>Exiftool: Enabled large file support</li> <li>Metadata: Improved Exif parser with cycle detection</li> <li>Metadata: Support for long projection type names like transverse-cylindrical</li> <li>Config: Added RAW file extension blacklists for Darktable and RawTherapee</li> <li>Config: Added disable options for image classification and facial recognition</li> <li>Config: Added support for non-root site URLs</li> <li>Config: Added content delivery network URL option</li> <li>MariaDB: Set explicit table engine, charset, and collation</li> <li>MariaDB: Added log message for old versions with broken table name resolution</li> <li>Docker: Added <code>HOME</code> env for Darktable &amp; RawTherapee</li> <li>Docker: Single multi-arch image for AMD64, ARM64, and ARMv7</li> </ul>","title":"September 25, 2021"},{"location":"release-notes/#may-23-2021","text":"<p>Build 210523-b1856b9d</p> <ul> <li>RAW: Added RawTherapee flag to use existing sidecar files</li> <li>Import: Never remove ignored folders such as for Syncthing</li> </ul>","title":"May 23, 2021"},{"location":"release-notes/#may-20-2021","text":"<p>Build 210520-4b32bac7</p> <ul> <li>Docker: Fixed home directory permissions in new base image</li> <li>HEIF: Test if JPEG was already rotated based on video metadata</li> </ul>","title":"May 20, 2021"},{"location":"release-notes/#may-19-2021","text":"<p>Build 210519-24b5c7e6</p> <ul> <li>Metadata: Upgraded Exiftool to fix security issue</li> </ul>","title":"May 19, 2021"},{"location":"release-notes/#may-18-2021","text":"<p>Build 210518-80981c25</p> <ul> <li>Safari: Fixed PWA file download on iOS</li> <li>Docker: Added config example for scheduled background tasks</li> <li>Docker: Updated base image includes Darktable 3.4.1, RawTherapee 5.8, and FFmpeg 4.3.2</li> <li>TensorFlow: Improved error handling</li> <li>Translations: Updated French</li> </ul>","title":"May 18, 2021"},{"location":"release-notes/#may-5-2021","text":"<p>Build 210505-d3e53a89</p> <ul> <li>UI: Improved RTL (right-to-left language) alignment</li> <li>RAW: Added config options to disable specific converters</li> <li>Metadata: Preserve stopwords in existing keywords</li> <li>Metadata: Allow single quotes in keywords</li> <li>WebDAV: Keep favorite flag when uploading via PhotoSync</li> <li>Translations: Updated Dutch   and German</li> </ul>","title":"May 5, 2021"},{"location":"release-notes/#april-26-2021","text":"<p>Build 210426-da6e948f</p> <ul> <li>UI: Added Yellowstone theme for sponsors, unlocked Grayscale theme for everyone</li> <li>Metadata: Support for XMP sidecar CreateDate and Keywords</li> <li>Metadata: Merge keywords from different sources</li> <li>Translations: Updated Hebrew</li> </ul>","title":"April 26, 2021"},{"location":"release-notes/#april-22-2021","text":"<p>Build 210422-97e75b04</p> <ul> <li>UX: Improved touch event accuracy</li> <li>UX: Optimized rendering on small screens</li> <li>UX: Fixed autocomplete in \"add to album\" dialog</li> <li>HEIF: Prevent redundant sidecar JPEG files</li> <li>Backup: Added command flags and usage docs</li> <li>Translations: Added Danish    and Kurdish</li> </ul>","title":"April 22, 2021"},{"location":"release-notes/#february-22-2021","text":"<p>Build 210222-ac5a9d5e</p> <ul> <li>UX: Autofocus for input fields and confirm on enter</li> <li>Restore: Find YAML album backups in originals folder</li> <li>Metadata: Improved location labels and moments</li> <li>Thumbnails: Fixed auto-rotation for HEIF, TIFF, and PNG images</li> <li>Translations: Added Norwegian (Bokm\u00e5l)</li> </ul>","title":"February 22, 2021"},{"location":"release-notes/#february-17-2021","text":"<p>Build 210217-49039368</p> <ul> <li>Videos: Optimized transcoding parameters</li> <li>Videos: Use AAC audio for MP4 transcoding </li> <li>Metadata: Default to landscape orientation if data is invalid</li> <li>Translations: Updated Brazilian Portuguese</li> </ul>","title":"February 17, 2021"},{"location":"release-notes/#february-16-2021","text":"<p>Build 210216-4939e36a</p> <ul> <li>UX: Automatically hide scrollbar in photo viewer and Places</li> <li>Delete: Permanently remove all related sidecar files</li> <li>Videos: Added transcoding config options</li> <li>Videos: Added batch transcoding via convert command</li> <li>Metadata: Remove estimate when setting a new country</li> <li>Metadata: Workaround for Exif strings containing newlines</li> </ul>","title":"February 16, 2021"},{"location":"release-notes/#february-11-2021","text":"<p>Build 210211-b9595dd4</p> <ul> <li>Videos: Native player featuring performance and UX enhancements</li> <li>Index: Improved detection of missing photos, files, and folders</li> </ul>","title":"February 11, 2021"},{"location":"release-notes/#february-8-2021","text":"<p>Build 210208-9e10ba69</p> <ul> <li>Upload: Adds duplicates to selected albums as well</li> <li>Library: Show folder covers in Originals</li> <li>Metadata: Automatically remove orphan countries, cameras, and lenses</li> <li>Metadata: Improved Exif parser</li> <li>Backup: Restore archive flag from YAML files</li> <li>Docker: Improved entrypoint script</li> </ul>","title":"February 8, 2021"},{"location":"release-notes/#january-28-2021","text":"<p>Build 210128-a82061e0</p> <ul> <li>UX: Improved theme colors and icons</li> <li>UX: Download all related media files using their current name by default</li> <li>UX: Redirect already authenticated users from /login to /browse</li> <li>Mobile: Prevent like on touch swipe</li> <li>Translations: Updated German and French</li> <li>Config: Reduced auto index &amp; import safety delay defaults</li> <li>Metadata: Improved photo titles, removed small words from title endings</li> <li>Metadata: Improved date extraction from current and original file names</li> <li>Metadata: Fallback to earliest file mod time in case there is no other date</li> <li>Import: Index keywords from non-primary filenames as well</li> <li>WebDAV: Improved service discovery</li> <li>Purge: Hide missing files in edit dialog and set new primary if needed</li> <li>Archive: Physically delete files after confirmation</li> <li>Moments: Added delete button to context menu</li> <li>Settings: Added Estimates and Delete feature flags</li> <li>CLI: Added cleanup command to remove orphaned index entries and thumbnails</li> </ul>","title":"January 28, 2021"},{"location":"release-notes/#january-21-2021","text":"<p>Build 210121-07e559df</p> <ul> <li>UX: Improved video playback and icons</li> <li>UX: Restructured main navigation</li> <li>Mobile: Show search field in albums</li> </ul>","title":"January 21, 2021"},{"location":"release-notes/#january-20-2021","text":"<p>Build 210120-e7cd5e9a</p> <ul> <li>API: Apply limit, offset and sort order when searching for IDs</li> <li>ARM64: Reverted database image back to arm64v8/mariadb in config example</li> </ul>","title":"January 20, 2021"},{"location":"release-notes/#january-19-2021","text":"<p>Build 210119-a5399f06</p> <ul> <li>UX: Optimized user interface for iOS and tablets</li> <li>UX: Improved theme colors</li> <li>UX: Scroll position is restored when navigating back</li> <li>Translations: Added Czech</li> <li>Metadata: Estimate timezone    and allow overwriting estimated locations </li> <li>Settings: Fixed disabling logs</li> </ul> <p>For our sponsors and contributors:</p> <ul> <li>UX: Added two dark themes</li> </ul>","title":"January 19, 2021"},{"location":"release-notes/#january-11-2021","text":"<p>Build 210111-cc05c430</p> <ul> <li>UX: Disabled preloading in live photo player to reduce memory footprint</li> <li>UX: Updated main navigation, find all media types via /browse</li> <li>UX: Removed lag when selecting pictures</li> <li>UX: Tweaked tile size breakpoints in Albums, Labels, and Search</li> <li>UX: Added tooltips to navigation expand and minimize buttons</li> <li>UX: Preload additional search results</li> <li>UX: Removed image loading spinners for faster rendering</li> <li>Thumbnails: Added cache control headers for improved performance</li> <li>Album Covers: Cache will be flushed after updating private flags</li> <li>Search: Improved performance of photos query</li> <li>PWA: Added service worker so that app can be installed more easily</li> <li>PWA: Enabled auto-rotate   so that photos may be viewed in landscape mode</li> <li>Frontend: Removed unused dependencies and    reduced build size</li> <li>Translations: Updated Russian,    French,   Simplified Chinese, and   German</li> <li>Index: Automatically create JPEGs for related media files as well</li> <li>Import: Improved error handling when the file system becomes unavailable</li> <li>Config: Updated docker-compose.yml examples</li> <li>Config: Added optional gzip compression for built-in web server</li> <li>Config: Limit number of indexing workers to half the number of physical cores by default to    avoid high load on hyper-threading capable CPUs</li> </ul>","title":"January 11, 2021"},{"location":"release-notes/#january-4-2021","text":"<p>Build 210104-7f9e806a</p> <ul> <li>Config: Added auto index &amp; import defaults to Dockerfiles</li> <li>Import: Extract metadata with ExifTool before moving</li> <li>Import: Automatically create folder albums</li> <li>Help: Updated WebSocket page</li> <li>UX: Added <code>UI.Zoom</code> setting to re-enable page zoom</li> <li>UI: Updated default theme</li> <li>Translations: Added Hebrew &amp; Japanese, updated Brazilian Portuguese</li> <li>Albums &amp; Cards View: Reduced tile size on large screens</li> <li>WebDAV: Less verbose logging</li> </ul>","title":"January 4, 2021"},{"location":"release-notes/#january-2-2021","text":"<p>Build 210102-af71e5f7</p> <ul> <li>WebDAV: Uploads and other changes trigger auto indexing / importing</li> <li>Config: Use random hash for improved preview token security </li> <li>UX: Disabled page zoom so that app feels more native on mobile devices</li> <li>UX: Reduced min password length to 4 characters</li> <li>UX: Improved docker-compose.yml examples</li> <li>UX: Reduced icon size in \"add to album\" dialog</li> </ul>","title":"January 2, 2021"},{"location":"release-notes/#december-31-2020","text":"<p>Build 201231-8e22fbf8</p> <ul> <li>Initial Stable Release</li> </ul>","title":"December 31, 2020"},{"location":"release-notes/#getting-updates","text":"<p>Even when you use an image with the <code>:latest</code> tag, Docker does not automatically download new images for you. To update, you can either manually pull the most recent image and restart, or set up a service like Watchtower to get automatic updates.</p>","title":"Getting Updates"},{"location":"developer-guide/","text":"<p>We welcome contributions of any kind, including blog posts, tutorials, testing, writing documentation, and pull requests.</p>","title":"Every Contribution Makes a Difference"},{"location":"developer-guide/#our-milestones","text":"<p></p>","title":"Our Milestones"},{"location":"developer-guide/#upcoming-features-and-enhancements","text":"<p>The public roadmap shows what tasks are in progress,  what needs testing, and which features are going to be implemented next.</p> <p>You are welcome to submit specific feature requests if you have verified that no similar idea or todo already exists. Give ideas you like a thumbs-up \ud83d\udc4d  , so that we know what is most popular.</p>  <p>Our vision is to provide the most user- and privacy-friendly solution to keep your pictures organized and accessible.</p>","title":"Upcoming Features and Enhancements"},{"location":"developer-guide/#join-the-community","text":"<p>Follow us on Twitter and join the Community Chat to get regular updates, connect with other contributors, and discuss your ideas. Our Code of Conduct explains the \"dos and don\u2019ts.\"</p> <p>An important part of our journey is to explore new directions in product development and build better software through consistent use of feedback.</p> <p>Feel free to contact us with anything that is on your mind, even if you just want to say hello. It is our goal to answer all questions we receive from our users, customers, partners, and the developer community. Our team also welcomes feedback if you believe something can or should be improved.</p>","title":"Join the Community"},{"location":"developer-guide/#creating-bug-reports","text":"<p>Before reporting a bug, please use our Troubleshooting Checklists to determine the cause of your problem. If you have a general question, need help, it could be a local configuration issue, or a misunderstanding in how the software works:</p> <ul> <li>you are welcome to ask in our Community Chat</li> <li>or post your question in GitHub Discussions</li> </ul> <p>When reporting a problem, always include the software versions you are using and other information about your environment such as browser, browser plugins, operating system, storage type, memory size, and processor.</p> <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app.</p> <p>Note that all issue subscribers receive an email notification from GitHub for each new comment, so these should only be used for sharing important information and not for personal discussions/questions.</p>","title":"Creating Bug Reports"},{"location":"developer-guide/#submitting-pull-requests","text":"<p>Because we want to create the best possible product for our users, we have a set of criteria to ensure that all submissions are acceptable.</p> <p>Follow our step-by-step guide to learn how to submit new features, bug fixes, and documentation enhancements. Issues labeled help wanted / easy can be good (first) contributions.</p> <p>Reviewing, testing, and finally merging pull requests requires significant resources on our side. If it's not just a small fix, it can take several months.</p>","title":"Submitting Pull Requests"},{"location":"developer-guide/#privacy-notice","text":"<p>We operate a number of web services that help us develop and maintain our software in collaboration with the open source community, such as Weblate hosted at translate.photoprism.app to keep translations up to date.</p> <p>Because many of these apps and tools were originally developed for internal use without a high level of privacy in mind, we ask that you do not enter personal information such as your real name or personal email address if you want it to remain private.</p> <p>Be aware that such information may unexpectedly show up in logs, source code, translation files, commit messages, and pull request comments.</p>","title":"Privacy Notice"},{"location":"developer-guide/code-quality/","text":"<p>The quality of code has a practical impact on both your agility and the cost of development:1</p> <ul> <li>you can't change buggy and/or bloated code fast enough to be truly agile</li> <li>existing bugs can easily increase development costs (and time) by 10x</li> <li>the mess eventually becomes so big and so deep that you cannot clean it up anymore2</li> </ul>  <p> </p> Productivity vs Time   <p>All developers with more than a few years experience know that previous messes slow them down. And yet all developers feel the pressure to make messes in order to meet deadlines. In short, they don\u2019t take the time to go fast! You will not make the deadline by making a mess. Indeed, the mess will slow you down instantly, and will force you to miss the deadline. \u2014 Robert C. Martin</p>","title":"Quality and Best Practices"},{"location":"developer-guide/code-quality/#bottom-up-development","text":"<p>Breaking a problem down into small, coherent fragments lends itself to organization. Start with the basic low-level components and then proceed to higher-level abstractions.</p> <p>Bottom-up development emphasizes coding and early testing, which can begin before having a detailed understanding of the final system. In practice, this may never be the case as requirements are constantly evolving.</p> <p>Advantages of the bottom-up approach are component reusability, agility, and testability.</p>  <p>I compared Mel's hand-optimized programs with the same code massaged by the optimizing assembler program, and Mel's always ran faster. That was because the \u201ctop-down\u201d method of program design hadn't been invented yet, and Mel wouldn't have used it anyway.  He wrote the innermost parts of his program loops first. \u2014 The Story of Mel</p>","title":"Bottom-Up Development"},{"location":"developer-guide/code-quality/#opportunistic-refactoring","text":"<p>We encourage developers to refactor existing code when they notice a specific issue, even though this may seem difficult when working with a distributed team, branches, and pull requests due to potential merge conflicts and delayed feedback.</p> <p>It is best to do this while you are working on the same component anyway, for example to implement a feature or enhancement. This way you can easily validate if the proposed changes make sense and you avoid conflicts with others.</p> <p>Releasing imperfect code is not a problem as long as it is accompanied by automated tests. This makes it easy to refactor later without breaking anything or requiring detailed knowledge of the requirements and a lot of time for manual testing. Be pragmatic. Done is better than perfect.</p> <p>Potential security issues are an important exception. These should never be ignored. If you find a problem, please report it to us immediately so we can fix it.</p>  <p>Feel free to think ahead, just don't code ahead. But also, don't feel the need to decide so many details ahead. Learn enough to get started and build only what you need. \u2014 J. B. Rainsberger</p>","title":"Opportunistic Refactoring"},{"location":"developer-guide/code-quality/#premature-optimization","text":"<p>One of the hardest parts of software development is knowing what to work on. Don't get carried away implementing unnecessary abstractions and focusing on scalability optimization before you've even validated the functionality of a feature or component.</p> <p>Instead of spending a lot of time on something you may not need, focus on user needs and test automation. That way, you'll make sure you're developing the right functionality, and you can refactor it later for scalability and other non-functional aspects without breaking anything.</p> <p>Also keep in mind that it's much easier and less effort to maintain small amounts of duplicate code than to choose the wrong abstraction.</p>  <p>Premature optimization is the root of all evil. \u2014 Donald Knuth</p>","title":"Premature Optimization"},{"location":"developer-guide/code-quality/#be-careful-with-caching","text":"<p>There are two hard things in computer science: cache invalidation and naming things.</p>  <p>A cache is just a memory leak you haven't met yet. \u2014 Dave Cheney</p>","title":"Be Careful with Caching"},{"location":"developer-guide/code-quality/#go-slow-before-you-go-fast","text":"<p>Read the docs, understand the context, and talk to others to gather missing information before you start coding. Write tests. Stay focused.</p> <p>Don't worry that this will take too long. Take your time. It's the fastest and only sustainable way to get things done. You have to go slow before you can go fast.</p>  <p>Simple, elegant solutions are more effective, but they are harder to find than complex ones, and they require more time, which we too often believe to be unaffordable. \u2014 Niklaus Wirth, Communications of the ACM, 1985</p>","title":"Go Slow Before You Go Fast \ud83d\udc30"},{"location":"developer-guide/code-quality/#effectiveness-efficiency","text":"<p>Optimize for effectiveness before efficiency when prioritizing tasks:</p> <ul> <li>Effectiveness is about achieving a specific outcome, such as providing the features that best help users solve their problems.</li> <li>Efficiency means doing things in an optimal way, for example, faster and cheaper. We all strive to be efficient, but that's worthless if it doesn't contribute to effectiveness.</li> </ul> <p>In contrast, a feature factory focuses on the quantity of new features rather than their quality:</p> <p></p>  <p>It is fundamentally the confusion between effectiveness and efficiency that stands between doing the right things and doing things right. There is surely nothing quite so useless as doing with great efficiency what should not be done at all. \u2014 Peter Drucker</p>","title":"Effectiveness &gt; Efficiency"},{"location":"developer-guide/code-quality/#test-automation-guidelines","text":"<p>We strive for complete test coverage as it is a useful tool for finding  untested parts of our code base. Test coverage is of limited use as a numerical statement of how good our tests are.</p> <p>The F.I.R.S.T. Principle includes five rules that good tests should follow:2</p> <ul> <li>Fast. If tests are slow, you won't run them frequently, which makes them much less useful and increases the cost of development.</li> <li>Independent. You should be able to run each test independently and run the tests in any order you like. When tests depend on each other, then the first one to fail causes a cascade of downstream failures, making diagnosis difficult and hiding downstream defects.</li> <li>Repeatable. If your tests aren\u2019t repeatable in any environment, then you\u2019ll always have an excuse for why they fail. You\u2019ll also find yourself unable to run the tests when the environment isn\u2019t available.</li> <li>Self-Validating. You should not have to read through a log file to tell whether the tests pass. If the tests aren\u2019t self-validating, then failure can become subjective and running the tests can require a long manual evaluation.</li> <li>Timely. If you write the tests after the production code, you will generally find that the production code is difficult to test. Instead, add tests at implementation time to ensure that the code is testable, does what you expect it to do, and meets the requirements.</li> </ul>  <p>Code that cannot be tested is flawed. \u2014 Anonymous</p>","title":"Test Automation Guidelines"},{"location":"developer-guide/code-quality/#code-quality-reports","text":"<p>goreportcard.com generates reports on the quality of Open Source Go projects. It uses several measures, including <code>gofmt</code>, <code>go vet</code>, <code>go lint</code> and <code>gocyclo</code>. If you find this helpful and also use the tool for your own projects, you can support the developers on Patreon.</p> <p></p>  <p>Use reports for inspiration when you need some, keeping in mind that not every issue reported needs to be resolved immediately.</p>","title":"Code Quality Reports"},{"location":"developer-guide/code-quality/#security-best-practices","text":"<p>The Open Source Security Foundation (OpenSSF) maintains standardized security criteria and best practices for open-source projects:</p> <p></p> <p>View Security Testing Guide \u203a</p>   <ol> <li> <p>Allen Holub, twitter.com/allenholub/status/1073738216140791808, 2018\u00a0\u21a9</p> </li> <li> <p>Robert C. Martin, Clean Code: A Handbook of Agile Software Craftsmanship, 2009\u00a0\u21a9\u21a9</p> </li> </ol>","title":"Security Best Practices"},{"location":"developer-guide/configuration/","text":"","title":"Configuration"},{"location":"developer-guide/configuration/#help","text":"<p><code>photoprism help</code> shows available commands, config parameters and environment variable names. These are also listed in Getting Started.</p>","title":"Help"},{"location":"developer-guide/configuration/#show-current-settings","text":"<p><code>photoprism config</code> shows all config parameters and their values.</p>","title":"Show current settings"},{"location":"developer-guide/configuration/#change-settings","text":"<p>You can either use environment variables like <code>PHOTOPRISM_CACHE_PATH</code>, config files (in the <code>storage/config</code> directory) or command line parameters like <code>--cache-path</code> to configure PhotoPrism. Environment variables are usually best for dockerized applications. You can easily set them in docker-compose.yml without touching any other files.</p> <p>There is no need to change any settings if you follow the steps described in Setup.</p>","title":"Change settings"},{"location":"developer-guide/directories/","text":"<p>Our directory layout is loosely based on golang-standards/project-layout:</p> <ul> <li><code>/</code> contains a Makefile, a readme, the license and various config files for dependency management, building and continuous integration</li> <li><code>/assets</code> contains subdirectories for various assets such as photos, built JS/HTML/CSS files and server-side HTML templates</li> <li><code>/cmd</code> contains the application source code (main package)</li> <li><code>/docker</code> contains Dockerfiles and related assets, e.g. for Development, TensorFlow and ARM64</li> <li><code>/frontend</code> contains our Web frontend JS/HTML/CSS source code</li> <li><code>/internal</code> contains the source code of our internal Go packages</li> <li><code>/pkg</code> contains the source code of our public Go packages</li> <li><code>/scripts</code> contains shell scripts used for building, deployment and continuous integration</li> </ul>","title":"Repository Folder Structure"},{"location":"developer-guide/documentation/","text":"","title":"Documentation"},{"location":"developer-guide/documentation/#user-facing-documentation","text":"<p>User-facing documentation lives in the photoprism-docs repository and can be browsed on docs.photoprism.app.</p> <p>See the README for how to easily edit the docs yourself.</p>","title":"User Facing Documentation"},{"location":"developer-guide/documentation/#package-documentation-godoc","text":"<p>Godoc generates documentation automatically, so it's tightly coupled to the photoprism source code.</p> <p> View Package Docs </p> <p>Some highlights to explore:</p> <ul> <li>cmd/photoprism - main application</li> <li>internal/photoprism - main library package</li> <li>internal/server - server initialization and routing</li> <li>internal/api - server api</li> <li>internal/commands - command line interface</li> <li>internal/form - input validation (based on gin)</li> <li>internal/entity - models (based on GORM)</li> </ul>","title":"Package Documentation (GoDoc)"},{"location":"developer-guide/faq/","text":"","title":"Frequently Asked Questions"},{"location":"developer-guide/faq/#why-not-use-a-more-permissive-public-license-so-that-for-example-developers-at-google-can-contribute-more-easily","text":"<p>Since we had hoped for a collaboration with Google and were aware of their AGPL policy, PhotoPrism was initially licensed under Apache 2.0, which is much more permissive. However, no one seemed interested, although we did talk to quite a few personal acquaintances at Google. That made it easy for our community to convince us to use AGPL instead.</p>","title":"Why not use a more permissive public license so that, for example, developers at Google can contribute more easily?"},{"location":"developer-guide/faq/#isnt-it-insecure-that-thumbnail-urls-work-even-if-you-are-not-logged-in","text":"<p>Like most commercial image hosting services, we've chosen to use a cookie-free thumbnail API to minimize request latency and avoid unnecessary network traffic. If you were to copy private session cookies and use them in a different browser window, you would have a similar problem, except that they also work for other API endpoints, not just a single image.</p> <p>Even if URLs were to become invalid every minute: Digital copies are as good as originals. Once shared and downloaded, such images should be considered \"leaked\" because they are cached and can be re-shared by the recipient at any time, with no sure way to get all copies back. Any form of protection we could provide would essentially be \"snake oil\", could be circumvented, and would have a negative impact on the user experience, such as disabling the browser cache or context menu.</p> <p>For the highest level of protection, it is recommended to shield your private server from the public Internet. Always use HTTPS, a VPN and/or ideally TLS client certificates and make sure that only people you trust have access to your instance.</p> <p>Visit docs.photoprism.app/developer-guide/media/thumbnails/ to learn more.</p>","title":"Isn't it insecure that thumbnail URLs work even if you are not logged in?"},{"location":"developer-guide/faq/#does-your-software-depend-on-any-external-services","text":"<p>As explained in detail in our Privacy Policy, reverse geocoding and interactive world maps depend on retrieving the necessary information from us and MapTiler AG, headquartered in Switzerland. Both services are provided with a very high level of privacy and confidentiality.</p> <p>Your use of these services is fully covered by us at the moment. Depending on your usage, this can save you thousands of dollars every month. Other providers typically charge usage-based fees and may also not allow you to cache the data they provide, compromising your privacy with unnecessary requests.</p> <p>Should you still wish to operate one or both of these services on your own premises, we can set up such a fully autonomous solution for you, provided you are prepared to cover the initial setup costs as well as ongoing maintenance fees for content licenses and updates.</p> <p>View Privacy Policy \u203a View Compliance FAQ \u203a</p>","title":"Does your software depend on any external services?"},{"location":"developer-guide/faq/#why-do-i-see-connection-errors-when-requesting-api-keys-at-startup","text":"<p>As explained above, reverse geocoding and interactive world maps depend on retrieving the necessary information from external services. Please make sure that you allow requests to these API endpoints if you have a firewall installed, and verify that your Internet connection is working.</p>","title":"Why do I see connection errors when requesting API keys at startup?"},{"location":"developer-guide/faq/#are-the-keys-for-using-interactive-world-maps-provided-free-of-charge","text":"<p>The API keys required to use the maps are unfortunately not free for us due to the number of users we have. Those costs are one of the reasons why we encourage all users to support our mission by signing up as a sponsor or purchasing a commercial license.</p> <p>While we could register several \"non-commercial test accounts\" instead, we don't think that would be fair and Maptiler might then stop offering them to those in need.</p>","title":"Are the keys for using interactive world maps provided free of charge?"},{"location":"developer-guide/issues/","text":"<p>We use GitHub issues for managing bugs,  ideas, and todos. Issues labeled help wanted / easy can be good (first) contributions. Don't hesitate to contact us if you want to work on something specific or need help with a pull request. </p> <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app.</p> <p>Note that all issue subscribers receive an email notification from GitHub for each new comment, so these should only be used for sharing important information and not for personal discussions/questions.</p>","title":"GitHub Issues"},{"location":"developer-guide/issues/#how-to-write-user-stories","text":"<p>Start describing new ideas and tasks with a user story similar to this one:</p> <p>As a [type of person] I'd like to be able to [do something] so that I can [get some result].</p> <p>This makes it easier for everyone to understand who wants what and why.</p>  <p>Reading between the lines consumes a lot of time that can be used more effectively. Vague requirements become even more expensive when the wrong things are implemented, or they don't provide value in the way they were implemented.</p>","title":"How to Write User Stories"},{"location":"developer-guide/issues/#acceptance-criteria","text":"<p>Issues should include a list of Acceptance Criteria that clearly state what is expected. We recommend using MAY, SHOULD, and MUST as keywords to indicate priorities.</p> <p>Clickable checkboxes for each item can be created via GitHub Markdown:</p> <pre><code>Acceptance Criteria:\n\n- [ ] \"Log In\" button MUST be visible on /login page\n- [ ] \"Log In\" button MAY be disabled if password field is empty\n- [ ] Page SHOULD use existing Vuetify components\n- [ ] Login MUST work in latest Firefox, Safari and Chrome\n</code></pre>","title":"Acceptance Criteria"},{"location":"developer-guide/pull-requests/","text":"","title":"Pull Requests"},{"location":"developer-guide/pull-requests/#acceptance-criteria","text":"<p>Because we want to create the best possible product for our users, we have a set of criteria to ensure that all submissions are acceptable:</p> <ul> <li> Features and enhancements must be fully implemented so that they can be released at any time without additional work</li> <li> Automated unit and/or acceptance tests are mandatory to ensure the changes work as expected and to reduce repetitive manual work</li> <li> Frontend components must be responsive to work and look properly on phones, tablets, and desktop computers; you must have tested them on all major browsers and different devices</li> <li> Documentation and translation updates should be provided if needed</li> <li> In case you submit database-related changes, they must be tested and compatible with SQLite 3 and MariaDB 10.5.12+</li> </ul>  <p>These guidelines are not intended as a filter or barrier to participation. If you are unfamiliar with Open Source development, we will help you.</p>","title":"Acceptance Criteria"},{"location":"developer-guide/pull-requests/#contributor-license-agreement","text":"<p>After you submit your first pull request, you will be asked to accept our Contributor License Agreement (CLA). Visit photoprism.app/cla to learn more.</p>","title":"Contributor License Agreement"},{"location":"developer-guide/pull-requests/#how-to-create-and-submit-a-pull-request","text":"","title":"How to Create and Submit a Pull Request"},{"location":"developer-guide/pull-requests/#fork-our-repository","text":"<ul> <li>Click the Fork button in the header of our main repository</li> <li>Clone the forked repository on your local computer: <ul> <li><code>git clone https://github.com/[your username]/photoprism</code></li> </ul> </li> <li>Connect your local to our \"upstream\" main repository by adding it as a remote: <ul> <li><code>git remote add upstream https://github.com/photoprism/photoprism.git</code> </li> </ul> </li> <li>Create a new branch from <code>develop</code> - it should have a short and descriptive name (not \"patch-1\") that does not already exist, for example:<ul> <li><code>git checkout -b feature/your_feature_name</code> </li> </ul> </li> <li>See also https://guides.github.com/activities/forking/</li> </ul>","title":"Fork our repository"},{"location":"developer-guide/pull-requests/#make-your-changes","text":"<ul> <li>While you are working on it and your pull request is not merged yet, pull in changes from \"upstream\" often so that you stay up to date and there is a lower risk for merge conflicts:<ul> <li><code>git fetch upstream</code></li> <li><code>git merge upstream/develop</code></li> </ul> </li> <li>We recommend running tests after each change to make sure you didn't break anything:<ul> <li><code>make test</code></li> </ul> </li> <li>Add tests for any new code <ul> <li>If you have questions about how to do this, please ask in your pull request</li> </ul> </li> <li>Run <code>make fmt</code> to ensure code is properly formatted according to our standards</li> <li>If all tests are green and you see no other errors, commit your changes. To reference related GitHub issues, please end your commit message with the issue ID like <code>#1234</code>:<ul> <li><code>git status -s</code></li> <li><code>git add .</code></li> <li><code>git commit -m \"Your commit message #1234\"</code></li> </ul> </li> </ul>","title":"Make your changes"},{"location":"developer-guide/pull-requests/#when-you-are-ready","text":"<ul> <li> Verify you didn't forget to add / commit files, output of <code>git status -s</code> should be empty</li> <li> Push all commits to your forked remote repository on GitHub:<code>git push -u origin feature/your_feature_name</code></li> <li> Create a pull request with a helpful description of what it does</li> <li> Wait for us to perform a code review and fix the remaining issues, if any</li> <li> Update and/or add documentation if needed</li> <li> Sign the Contributor License Agreement (CLA)</li> </ul> <p>You can also create a pull request if your changes are not yet complete or working. Just let us know  it's in progress, so we don't try to merge them. We can help you with a code review or other feedback  if needed. Please be patient with us.</p> <p>Reviewing, testing, and finally merging pull requests requires significant resources on our side. If it's not just a small fix, it can take several months.</p>","title":"When you are ready..."},{"location":"developer-guide/pull-requests/#privacy-notice","text":"<p>We operate a number of web services that help us develop and maintain our software in collaboration with the open source community, such as Weblate hosted at translate.photoprism.app to keep translations up to date.</p> <p>Because many of these apps and tools were originally developed for internal use without a high level of privacy in mind, we ask that you do not enter personal information such as your real name or personal email address if you want it to remain private.</p> <p>Be aware that such information may unexpectedly show up in logs, source code, translation files, commit messages, and pull request comments.</p>","title":"Privacy Notice"},{"location":"developer-guide/setup/","text":"<p>Before you proceed, make sure you have Git and Docker installed on your system. It is available for Mac, Linux, and Windows.</p> <p>Instead of using Docker, you can create your own development environment based on our Dockerfiles (not recommended). These are text documents that contain all commands a user could call in a terminal to assemble an application image. At a minimum, you need Go &gt;= 1.17, TensorFlow for C, Make, NPM, and MariaDB. Note that test results are unreliable without Docker, so this method is not suitable for contributors.</p> <p>Step 1: Run Git to clone (download) the source code</p> <pre><code>git clone git@github.com:photoprism/photoprism.git\n</code></pre>  <p>If you're on windows, make sure to disable auto CR LF. Otherwise, the build won't work. <code>git config --global core.autocrlf false</code></p>  <p>Step 2: Start the Docker services</p> <pre><code>cd photoprism\ndocker-compose up\n</code></pre> <p>Note: This docker-compose configuration is for testing and development purposes only.</p> <p>Step 3: Open a terminal to run commands directly in the build and test environment</p> <pre><code>make terminal\n</code></pre> <p>Before you proceed, make sure that all dependencies, such as NPM packages for the frontend, are installed:</p> <pre><code>make all\n</code></pre> <p>Congratulations! You can now compile and run PhotoPrism in your local development environment:</p> <pre><code>make build\n./photoprism start\n</code></pre> <p>The user interface can be opened in a browser by navigating to... </p> <ul> <li>http://localhost:2342/ (HTTP)</li> <li>or https://photoprism.localssl.dev/ (HTTPS)</li> </ul> <p>Authentication is disabled by default in development environments. Use the <code>--public=false</code> parameter to enable it.</p> <p>Default settings can be found in the <code>docker-compose.yml</code> file in the root directory of the project. Keep them unchanged when running tests, otherwise the tests may fail for others, even if they pass in your local environment.</p>  <p>You can find a list of all <code>make</code> targets in the Makefile. For example, <code>make test</code> will run frontend and backend unit tests. Bad filesystem permissions can be fixed by running <code>make fix-permissions</code> in a container terminal.</p>  <p>Optional: Build the frontend in watch mode</p> <p>The integrated web server not only provides the backend API, but is also used to serve static assets. These can be automatically rebuilt (updated) when you change a file. To do this, run the following command in a terminal, either inside or outside the container (outside is faster if your host is not running Linux):</p> <pre><code>make watch-js\n</code></pre> <p>Alternatively, you can change to the <code>frontend</code> directory and run NPM directly:</p> <pre><code>cd fronend\nnpm run watch\n</code></pre> <p>To update the frontend dependencies, also change to the <code>frontend</code> directory and run:</p> <pre><code>npm update\n</code></pre> <p>Questions?</p> <ul> <li>Radomir Sohlich wrote a pragmatic introduction to Makefiles for Go developers</li> <li>we are using Go Modules for managing our dependencies (new in 1.11)</li> <li>this guide was not tested on Windows, you might need to change docker-compose.yml to make it work with Windows specific paths</li> </ul>","title":"Setting Up Your Development Environment"},{"location":"developer-guide/setup/#apple-silicon-raspberry-pi-and-arm64","text":"<p>Our development environment has been built into a single multi-arch image for 64-bit AMD, Intel, and ARM processors. That means, Apple Silicon, Raspberry Pi 3 / 4, and other ARM64-based devices can pull from the same repository.</p>","title":"Apple Silicon, Raspberry Pi, and ARM64"},{"location":"developer-guide/setup/#multi-arch-docker-builds","text":"<p>For information about multi-architecture Docker builds, see the following documentation:</p> <ul> <li>Docker Buildx</li> <li>Leverage multi-CPU architecture support</li> </ul>","title":"Multi-Arch Docker Builds"},{"location":"developer-guide/setup/#qemu-quick-start","text":"<ol> <li>install qemu-user-static from docker hub: <code>docker run --rm --privileged multiarch/qemu-user-static --reset -p yes</code> multiarch/qemu-user-static</li> <li>verify that dockers buildx command is installed <code>docker buildx version</code>. if missing, follow install instructions here</li> <li>create buildx builder: <code>docker buildx create --name multiarch-builder &amp;&amp; docker buildx inspect --builder multiarch-builder --bootstrap</code></li> <li>start building: <code>make docker-development-multiarch</code> or <code>make docker-photoprism-multiarch</code></li> </ol>","title":"QEMU Quick Start"},{"location":"developer-guide/tests/","text":"<p>In any process, obsessing about the wait times will yield greater enhancements than practically anything else, for longer than you might think. Automation, simplification, etc. are implementation details of that obsession. \u2014 Dan North</p>","title":"Running Unit and Acceptance Tests"},{"location":"developer-guide/tests/#unit-tests","text":"","title":"Unit Tests"},{"location":"developer-guide/tests/#go","text":"<p>To run all unit tests, type <code>make test</code> or <code>go test ./internal/...</code> in a terminal.</p> <p>These <code>make</code> targets are currently defined for tests:</p> <ul> <li><code>test</code>: Executes all tests found in a) /internal with a timeout of 20 min and verbose output and b) frontend/tests/unit</li> <li><code>test-short</code>: Executes only fast tests found in /internal with a timeout of 5 min and verbose output</li> <li><code>test-race</code>: Same as <code>test</code> but with race condition detector (much slower) and higher timeout of 60 min</li> <li><code>test-codecov</code>: Same as <code>test</code> but creates a coverage log in coverage.txt and sends it to Codecov (don't use it locally)</li> <li><code>test-coverage</code>: Same as <code>test</code> but creates a coverage.txt file as well as a human-readable report in coverage.html; timeout is elevated to 30 min</li> </ul> <p>You can run single tests via <code>go test -run</code> in a package directory, e.g. /internal/photoprism:</p> <pre><code>$ go test -run NameOfTest\n</code></pre> <p>See docs for more info.</p>","title":"Go"},{"location":"developer-guide/tests/#test-frameworks","text":"<p>Go comes with a cool testing framework, it allows you to write test code using the same language, without needing to learn any library or test engine. Go advanced testing tips &amp; tricks contains a lot of useful information. We only import testify/assert to save a few lines for common assertions.</p> <p>Todo: Use a SQL mock driver to test database interactions, for example DATA-DOG/go-sqlmock.</p>","title":"Test Frameworks"},{"location":"developer-guide/tests/#slow-tests","text":"<p>Slow tests and benchmarks can be skipped using the <code>-short</code> flag:</p> <pre><code>func TestTimeConsuming(t *testing.T) {\n    if testing.Short() {\n        t.Skip(\"skipping test in short mode.\")\n    }\n    ...\n}\n</code></pre> <p>To execute:</p> <pre><code>go test -short\n</code></pre>","title":"Slow Tests"},{"location":"developer-guide/tests/#javascript","text":"<p>To run all javascript unit tests, type <code>make test-js</code> in a terminal.</p> <p>In case you want to run a single test add .only to the test you want to run e.g.:</p> <pre><code> it.only(\"should get album id\",  () =&gt; {\n        const values = {\n            ID: 5, AlbumName: \"Christmas 2019\", \n            AlbumSlug: \"christmas-2019\", AlbumUUID: 66\n        };\n        const album = new Album(values);\n        const result = album.getId();\n        assert.equal(result, \"66\");\n    });\n</code></pre> <p>Test coverage output is saved to frontend/coverage/html</p>","title":"Javascript"},{"location":"developer-guide/tests/#test-frameworks_1","text":"<p>To test javascript code we use mocha in combination with karma, chai, sinon and the karma-istanbul-coverage-reporter.</p>","title":"Test Frameworks"},{"location":"developer-guide/tests/#acceptance-tests","text":"<p>Before you proceed, use <code>wget</code> to download acceptance.tar.gz to the storage folder and extract it there:</p> <pre><code>cd storage\nwget https://dl.photoprism.app/qa/acceptance.tar.gz\ntar -xzf acceptance.tar.gz\n</code></pre>","title":"Acceptance Tests"},{"location":"developer-guide/tests/#running-tests-inside-the-docker-container","text":"<p>In the development container environment, you can run the tests in Firefox and Chromium:</p> <ul> <li> <p><code>make acceptance-run-chromium</code>: This executes all tests in headless chromium</p> </li> <li> <p><code>make acceptance-run-firefox</code>: This executes all tests in headless firefox</p> </li> </ul>","title":"Running Tests Inside the Docker Container"},{"location":"developer-guide/tests/#running-tests-locally","text":"<p>Locally, you can run the tests in all supported browsers that you have installed.</p> <p>To run tests locally you need to install testcafe on your machine. <pre><code>npm install -g testcafe\n</code></pre></p> <p>Start the test-instance (from within the docker container) <pre><code>make acceptance-restart\n</code></pre></p> <p>Then you can execute tests with <pre><code>testcafe  firefox,chrome,safari,opera -S \\\n  -s frontend/tests/acceptance/screenshots frontend/tests/acceptance/\n</code></pre></p> <p>You can stop the test-instance using <pre><code>make stop\n</code></pre></p> <p>To run tests on remote or mobile devices use <pre><code>testcafe  remote -S \\\n  -s frontend/tests/acceptance/screenshots frontend/tests/acceptance/\n</code></pre></p>","title":"Running Tests Locally"},{"location":"developer-guide/tests/#test-frameworks_2","text":"<p>Our goal was to implement UI acceptance tests using JavaScript, so that frontend developers are able to run and write them without learning Go.</p> <p>To make a final decision, we compared  TestCafe, Cypress and Nightwatch.js. We agreed on using TestCafe as tests were the most stable and pretty fast (because no long timeouts are needed).</p>    Feature TestCafe Cypress Nightwatch.js     Supported Browsers Local Chrome, Firefox, Opera, Safari, Internet Explorer, Microsoft Edge, Google Chrome Canary, Chromium Chrome, Chromium, Chrome Canary, Electron Geckodriver, Chromedriver, Microsoft Webdriver, Safaridriver   Supported Browsers Headless Chrome, Firefox Electron Problems running headless   Continuous Integration Support yes yes yes   Setup easy via npm easy via npm easy via npm   Usability +++ +++ ++   Speed (3 tests) 2 min (headless chrome and firefox) 1 min (only chrome headless) 1 min (chrome headed) 5 min (headless electron) 2,5 min (chrome headed) 7 min (chrome headed) headless not working   Stability nice unstable --&gt; waiting times needed unstable --&gt; waiting times needed   Documentation +++ ++ ++   Notes easy to find elements easy to find elements additional library needed to find selectors by text    <p>Other test libraries and frameworks we currently don't use:</p> <ul> <li>https://codecept.io/</li> <li>https://funcunit.com/</li> <li>https://www.browserstack.com/</li> <li>http://nightwatchjs.org/ (used by Mozilla's Coral Project)</li> <li>https://developers.google.com/web/updates/2017/04/headless-chrome</li> </ul>","title":"Test Frameworks"},{"location":"developer-guide/translations-weblate/","text":"<p>We operate translate.photoprism.app so that you can easily add and update user interface translations without having any development skills.</p> <p>You can either sign in with your GitHub account or create a new account with an email account you have access to:</p> <ul> <li>Provide an alternate address if you want your personal email to remain private as it may appear as authorship in commits, translation files, and pull requests.</li> <li>You are also not required to provide your full name if you do not wish to do so.</li> <li>Let us know privately that you have registered so that we can grant you permissions if needed.</li> </ul> <p>When you sign up, you will be asked to accept our Contributor License Agreement (CLA). Visit photoprism.app/cla to learn more.</p> Sign upAgree to CLAAdd missing translationsReview translationsAdd new language   <ol> <li> <p>Navigate to https://translate.photoprism.app/</p> </li> <li> <p>Click Register and create an account</p> </li> </ol> <p></p> <p></p>   <ol> <li>Sign in </li> <li>Select the language you want translate to</li> </ol> <p> 3. Open your Dashboard and click Backend (or access to the Backend by clicking here)</p> <p> 4. Click on View contributor agreement</p> <p> 5. Accept the contributor agreement and click Submit</p> <p> 6. Go back to your Dashboard and repeat steps 3-5 for the Frontend-Component</p>   <p>Your Dashboard shows you how many strings have no translation yet.</p> <p></p> <ol> <li>Click on the count</li> <li>Enter the translation and click Save and continue</li> </ol> <p> 3. Repeat until all strings are translated</p> <p>Your translations will be reviewed and included in one of the next releases.</p>   <p>If translations are missing, we pre-translate messages using services such as DeepL and Google Translate.  This can lead to grammatical errors and misunderstandings.  Native speakers should check existing translations and improve them if necessary.</p> <p>If you are a native speaker and would like to support us by reviewing existing translations, please write to us at hello@photoprism.app so that we can grant you the rights to review.</p> <ol> <li>From your Dashboard open one of the components by clicking on the language</li> </ol> <p> 2. Click on Strings waiting for review</p> <p> 3. Review the translation - edit the string if needed. Then select Approved and click Save and continue</p> <p> 4.  Repeat until all strings are reviewed</p>   <p>Please contact us at hello@photoprism.app and we will set up a new language for you to translate!</p>","title":"Contributing Translations with Weblate"},{"location":"developer-guide/translations/","text":"<p>Please don't use the method described here to add/edit translations anymore use this instead!</p>  <p>PhotoPrism uses gettext for frontend and backend localization. It is one of the most widely used standards for user interface translation:</p> <ul> <li>Human-readable messages such as <code>File not found</code> are used as identifiers to search for appropriate translations. They also serve as default values when no translation is available.</li> <li>Messages can optionally contain placeholders for numbers and other variables, for example <code>Found %{n} files</code>.</li> </ul> <p>We recommend Poedit for creating and updating translations. The download is free for Mac, Windows and Linux. The source code can be obtained on GitHub.</p>  <p>If translations are missing, we pre-translate messages using services such as DeepL and Google Translate. This can lead to grammatical errors and misunderstandings. Native speakers should check existing translations and improve them if necessary. You can use the version compare feature on GitHub to detect changes in translation files.</p>","title":"Translations"},{"location":"developer-guide/translations/#frontend","text":"<p>Localizations can be found in <code>/frontend/src/locales</code>. The POT file, only containing message ids,  is <code>translations.pot</code>.</p> <p><code>*.po</code> files contain localized messages for each  language identified by their locale,  for example <code>de.po</code> for German and <code>pt_BR.po</code> for Brazilian Portuguese. You can open, edit and save them with Poedit to update existing translations.</p>","title":"Frontend"},{"location":"developer-guide/translations/#add-new-translation","text":"<ul> <li>In /frontend run <code>npm run gettext-extract</code></li> <li>Install a translation tool e.g. Poedit</li> <li>Open the <code>/frontend/src/locales/translations.pot</code> file with Poedit</li> <li>In Poedit click on \"Create New Translation\" at the bottom and select the language</li> <li>Now you can start translating</li> <li>When done, save your translation as <code>*.po</code> file using the language locale (e.g. <code>de.po</code>) as name</li> <li>Add the new language to the <code>Languages</code> function in  <code>/frontend/src/options/options.js</code></li> <li>Run <code>npm run gettext-compile</code> to compile existing translations into a single <code>translations.json</code> file</li> <li>To test your translations you need to build the frontend again using <code>npm run build</code> or <code>npm run watch</code></li> </ul>","title":"Add new translation"},{"location":"developer-guide/translations/#update-existing-translation","text":"<ul> <li>In /frontend run <code>npm run gettext-extract</code></li> <li>Install a translation tool e.g. Poedit</li> <li>Open the <code>*.po</code> file of your language e.g. <code>/frontend/src/locales/fr.po</code> file with Poedit</li> <li>In the Poedit menu click \"Catalogue\" --&gt; \"Update from POT File\" --&gt; select the <code>translations.pot</code> file from <code>/frontend/src/locales</code></li> <li>Now you can start proofreading and adding the missing translations</li> <li>Once your done save the changes in the <code>*.po</code> file</li> <li>Run <code>npm run gettext-compile</code> to compile existing translations into a single <code>translations.json</code> file</li> <li>To test your translations you need to build the frontend again using <code>npm run build</code> or <code>npm run watch</code></li> </ul>  <p>A binary <code>*.mo</code> (machine object) file will be automatically saved along with every <code>*.po</code> file.  You won't be able to open those in a text editor, but please include them in git commits or when sending translations via email. The compiled <code>translations.json</code> file is not required for pull requests  and often causes merge conflicts.</p>","title":"Update existing translation"},{"location":"developer-guide/translations/#backend","text":"<p>Only asynchronous notifications and certain API responses need translation to provide a  consistent user experience. Technical log messages should be in English to avoid ambiguities and (even slightly) wrong translations. </p> <p>Localizations are kept in <code>/assets/locales</code>. The POT file, only containing message ids, is <code>messages.pot</code>.</p> <p><code>default.po</code> files in sub directories contain localized messages for each  language identified by their locale,  for example <code>de/default.po</code> for German and <code>pt_BR/default.po</code> for Brazilian Portuguese.  You can open, edit and save them with Poedit. Please also add and commit binary <code>*.mo</code> files,  which will be automatically created by Poedit.</p>","title":"Backend"},{"location":"developer-guide/translations/#add-new-translation_1","text":"<ul> <li>Run <code>make generate</code> to update <code>/assets/locales/messages.pot</code></li> <li>Open the <code>/assets/locales/messages.pot</code> file with Poedit</li> <li>In Poedit click on \"Create New Translation\" at the bottom and select the language</li> <li>Now you can start translating</li> <li>When done, create a new directory (using the locale as name) and save your translation there as <code>default.po</code></li> </ul>","title":"Add new translation"},{"location":"developer-guide/translations/#update-existing-translation_1","text":"<ul> <li>Run <code>make generate</code> to update <code>/assets/locales/messages.pot</code></li> <li>Open the <code>/assets/locales/fr/default.po</code> file with Poedit</li> <li>In the Poedit menu click \"Catalogue\" --&gt; \"Update from POT File\" --&gt; select the messages.pot file from /assets/locales/</li> <li>Now you can start proofreading and adding the missing translations</li> <li>Once you're done, save the changes in the default.po file</li> </ul>  <p>This will only work when you have gettext installed on your system. We recommend using our latest development image as described in the setup instructions.</p>","title":"Update existing translation"},{"location":"developer-guide/api/","text":"<p>Routes and parameters can be found in our API docs:</p> <p>https://godoc.org/github.com/photoprism/photoprism/internal/api</p>","title":"Introduction"},{"location":"developer-guide/api/#examples","text":"","title":"Examples"},{"location":"developer-guide/api/#basic","text":"<p><pre><code>GET /api/v1/photos?count=10\n</code></pre> Note: Routes are going to change while we are developing the frontend. The API is not covered by a deprecation policy.</p>","title":"Basic"},{"location":"developer-guide/api/#with-authentication","text":"<p>PhotoPrism uses <code>X-Session-ID</code> HTTP header as authentication method: <pre><code>curl -H \"X-Session-ID: xyz\" http://localhost:2342/api/v1/photos?count=10\n</code></pre> Replace <code>xyz</code> by <code>session_id</code> value of your active browser session, which can be found inside local storage. </p>","title":"With authentication"},{"location":"developer-guide/api/#external-resources","text":"<ul> <li>Mat Ryer: How I write Go HTTP services after seven years</li> </ul>","title":"External Resources"},{"location":"developer-guide/api/clients/go/","text":"<p>Maintained by Kris N\u00f3va</p> <p>GitHub URL: kris-nova/photoprism-client-go</p>","title":"Go API Client"},{"location":"developer-guide/api/clients/go/#installation","text":"<pre><code>go get github.com/kris-nova/photoprism-client-go\n</code></pre>","title":"Installation"},{"location":"developer-guide/api/clients/go/#methods","text":"<pre><code>func New(connURL *url.URL, token, downloadToken string) *V1Client\nfunc (v1 *V1Client) AddPhotosToAlbum(albumUUID string, photoIDs []string) error\nfunc (v1 *V1Client) ApprovePhoto(uuid string) error\nfunc (v1 *V1Client) CancelIndex() error\nfunc (v1 *V1Client) CloneAlbum(album Album) (Album, error)\nfunc (v1 *V1Client) CreateAlbum(album Album) (Album, error)\nfunc (v1 *V1Client) DeleteAlbums(albumUUIDs []string) error\nfunc (v1 *V1Client) DELETE(payload interface{}, endpointFormat string, a ...interface{}) *V1Response\nfunc (v1 *V1Client) DeletePhotosFromAlbum(albumUUID string, photoIDs []string) error\nfunc (v1 *V1Client) DislikeAlbum(uuid string) error\nfunc (v1 *V1Client) DislikePhoto(uuid string) error\nfunc (v1 *V1Client) Endpoint(str string) string\nfunc (v1 *V1Client) GetAlbumDownload(uuid string) ([]byte, error)\nfunc (v1 *V1Client) GetAlbums(options *AlbumOptions) ([]Album, error)\nfunc (v1 *V1Client) GetAlbum(uuid string) (Album, error)\nfunc (v1 *V1Client) GET(endpointFormat string, a ...interface{}) *V1Response\nfunc (v1 *V1Client) GetPhotoDownload(uuid string) ([]byte, error)\nfunc (v1 *V1Client) GetPhotos(options *PhotoOptions) ([]Photo, error)\nfunc (v1 *V1Client) GetPhoto(uuid string) (Photo, error)\nfunc (v1 *V1Client) GetPhotoYaml(uuid string) ([]byte, error)\nfunc (v1 *V1Client) Index() error\nfunc (v1 *V1Client) LikeAlbum(uuid string) error\nfunc (v1 *V1Client) LikePhoto(uuid string) error\nfunc (v1 *V1Client) PhotoPrimary(uuid, fileuuid string) error\nfunc (v1 *V1Client) POST(payload interface{}, endpointFormat string, a ...interface{}) *V1Response\nfunc (v1 *V1Client) PUT(payload interface{}, endpointFormat string, a ...interface{}) *V1Response\nfunc (v1 *V1Client) SetToken(token string)\nfunc (v1 *V1Client) UpdateAlbum(album Album) (Album, error)\nfunc (v1 *V1Client) UpdatePhoto(photo Photo) (Photo, error)\n</code></pre>","title":"Methods"},{"location":"developer-guide/api/clients/go/#example","text":"<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"io/ioutil\"\n    \"path\"\n\n    photoprism \"github.com/kris-nova/photoprism-client-go\"\n    \"github.com/kris-nova/logger\"\n)\n\nfunc main()\n    logger.Level = 4\n\n    uuid := \"pqnzigq351j2fqgn\" // This is a known ID\n    client := photoprism.New(\"http://localhost:8080\")\n    err := client.Auth(photoprism.NewClientAuthLogin(\"admin\", \"missy\"))\n    if err != nil\n        logger.Critical(\"Error logging into API: %v\", err)\n        os.Exit(1)\n    }\n\n    // -----------------\n    // GetPhoto()\n    //\n    photo, err := client.V1().GetPhoto(uuid)\n    if err != nil\n        logger.Critical(\"Error fetching photo: %v\", err)\n        os.Exit(1)\n    }\n\n    // -----------------\n    // UpdatePhoto()\n    //\n    photo.PhotoTitle = \"A really great photo!\"\n    photo, err = client.V1().UpdatePhoto(photo)\n    if err != nil\n        logger.Critical(\"Error updating photo: %v\", err)\n        os.Exit(1)\n    }\n\n    // -----------------\n    // GetPhotoDownload()\n    //\n    file, err := client.V1().GetPhotoDownload(photo.UUID)\n    if err != nil\n        logger.Critical(\"Error getting photo download: %v\", err)\n        os.Exit(1)\n    }\n\n    for _, f := range photo.Files\n        fileName := fmt.Sprintf(\"/tmp/%s\", path.Base(f.FileName))\n        logger.Always(fileName)\n        ioutil.WriteFile(fileName, file, 0666)\n    }\n    os.Exit(0)\n}\n</code></pre>","title":"Example"},{"location":"developer-guide/database/","text":"<p>Please keep in mind that some information may be outdated or missing, as these docs were automatically generated from the source code. You can contribute by clicking  to send a pull request with your changes.</p>","title":"Database Schema"},{"location":"developer-guide/database/#entity-relationships","text":"<p>\u21aa Entity-Relationship Diagram</p>","title":"Entity Relationships"},{"location":"developer-guide/database/#mermaidjs-markup","text":"<p>Mermaid lets you create diagrams and visualizations using text and code.</p> <p>\u21aa mariadb.mmd</p>","title":"Mermaid.js Markup"},{"location":"developer-guide/database/#mariadb-sql","text":"<p>\u21aa mariadb.sql</p>","title":"MariaDB SQL"},{"location":"developer-guide/database/migrations/","text":"<p>When using Docker Compose, you can prepend commands like <code>docker-compose exec [service] [command]</code> to run them in a service container. Should this fail with no container found, make sure the service has been started, you have specified an existing service (usually <code>photoprism</code>) and you are in the folder where the <code>docker-compose.yml</code> file is located.</p>","title":"Schema Migrations"},{"location":"developer-guide/database/migrations/#show-migration-status","text":"<p>Run the <code>photoprism migrations ls</code> command in a terminal to see a list of all migrations and their current status:</p> <pre><code>$ photoprism migrations ls\n\n|-----------------|---------|---------------------|---------------------|--------|\n|       ID        | Dialect |     Started At      |     Finished At     | Status |\n|-----------------|---------|---------------------|---------------------|--------|\n| 20211121-094727 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20211124-120008 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-030000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-040000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-050000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-060000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-061000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-070000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-071000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-080000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-081000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-083000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-090000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-091000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-093000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220421-200000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220521-000001 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220521-000002 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220521-000003 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n|-----------------|---------|---------------------|---------------------|--------|\n</code></pre>","title":"Show Migration Status"},{"location":"developer-guide/database/migrations/#run-specific-migrations","text":"<p>To explicitly re-run specific migrations, you can pass them as arguments to the <code>photoprism migrations run</code> command:</p> <pre><code>$ photoprism migrations run 20220521-000003\n\nINFO[2022-07-12T11:45:29Z] migrate: 20220521-000003 successful [12.967654ms] \nINFO[2022-07-12T11:45:29Z] migration completed in 40.89123ms            \nINFO[2022-07-12T11:45:29Z] closed database connection \n</code></pre>","title":"Run Specific Migrations"},{"location":"developer-guide/database/migrations/#retry-failed-migrations","text":"<p>To automatically retry previously failed migrations, pass the <code>-f</code> flag to the <code>photoprism migrations run</code> command:</p> <pre><code>$ photoprism migrations run -f\n</code></pre>","title":"Retry Failed Migrations"},{"location":"developer-guide/database/schema/","text":"<p>Please keep in mind that some information may be outdated or missing, as these docs were automatically generated from the source code.</p>  cell_idlabel_idcategory_idplace_idphoto_idphoto_idaccount_idfile_idaccount_idfile_idface_idsubject_uidsubject_uidcamera_idcell_idlens_idplace_idphoto_countryalbum_countrypathplace_countrykeyword_idphoto_idlabel_idphoto_idalbum_uidphoto_uidaddress_iduiduidaccountsdatetime sync_datedatetime created_atdatetime updated_atdatetime deleted_atvarchar(160) : acc_namevarchar(160) : acc_ownervarchar(255) : acc_urlvarbinary(255) : acc_typevarbinary(255) : acc_keyvarbinary(255) : acc_uservarbinary(255) : acc_passvarbinary(16) : acc_timeoutvarbinary(512) : acc_errorint(11) : acc_errorstinyint(1) : acc_sharetinyint(1) : acc_syncint(11) : retry_limitvarbinary(500) : share_pathvarbinary(16) : share_sizeint(11) : share_expiresvarbinary(500) : sync_pathvarbinary(16) : sync_statusint(11) : sync_intervaltinyint(1) : sync_uploadtinyint(1) : sync_downloadtinyint(1) : sync_filenamestinyint(1) : sync_rawint(10) : unsigned idaddressesfloat address_latfloat address_lngdatetime created_atdatetime updated_atdatetime deleted_atvarbinary(42) : cell_idvarbinary(8) : address_srcvarchar(255) : address_line1varchar(255) : address_line2varchar(32) : address_zipvarchar(128) : address_cityvarchar(128) : address_statevarbinary(2) : address_countryvarchar(1024) : address_notesint(11) : idalbumsdatetime created_atdatetime updated_atdatetime deleted_atvarbinary(42) : album_uidvarbinary(42) : parent_uidvarbinary(160) : album_slugvarbinary(500) : album_pathvarbinary(8) : album_typevarchar(160) : album_titlevarchar(160) : album_locationvarchar(100) : album_categoryvarchar(1024) : album_captionvarchar(2048) : album_descriptionvarchar(1024) : album_notesvarbinary(2048) : album_filtervarbinary(32) : album_ordervarbinary(255) : album_templatevarchar(100) : album_statevarbinary(2) : album_countryint(11) : album_yearint(11) : album_monthint(11) : album_daytinyint(1) : album_favoritetinyint(1) : album_privatevarbinary(128) : thumbvarbinary(8) : thumb_srcint(10) : unsigned idcamerasdatetime created_atdatetime updated_atdatetime deleted_atvarbinary(160) : camera_slugvarchar(160) : camera_namevarchar(160) : camera_makevarchar(160) : camera_modelvarchar(100) : camera_typevarchar(2048) : camera_descriptionvarchar(1024) : camera_notesint(10) : unsigned idcategoriesint(10) : unsigned label_idint(10) : unsigned category_idcellsdatetime created_atdatetime updated_atvarchar(200) : cell_namevarchar(100) : cell_streetvarchar(50) : cell_postcodevarchar(50) : cell_categoryvarbinary(42) : place_idvarbinary(42) : idcountriesvarbinary(160) : country_slugvarchar(160) : country_namevarchar(2048) : country_descriptionvarchar(1024) : country_notesint(10) : unsigned country_photo_idvarbinary(2) : iddetailsdatetime created_atdatetime updated_atvarchar(2048) : keywordsvarbinary(8) : keywords_srcvarchar(2048) : notesvarbinary(8) : notes_srcvarchar(1024) : subjectvarbinary(8) : subject_srcvarchar(1024) : artistvarbinary(8) : artist_srcvarchar(1024) : copyrightvarbinary(8) : copyright_srcvarchar(1024) : licensevarbinary(8) : license_srcvarchar(1024) : softwarevarbinary(8) : software_srcint(10) : unsigned photo_idduplicatesvarbinary(128) : file_hashbigint(20) : file_sizebigint(20) : mod_timevarbinary(755) : file_namevarbinary(16) : file_rooterrorsdatetime error_timevarbinary(32) : error_levelvarbinary(2048) : error_messageint(10) : unsigned idfacesdouble sample_radiusdouble collision_radiusmediumblob embedding_jsondatetime matched_atdatetime created_atdatetime updated_atvarbinary(8) : face_srcint(11) : face_kindtinyint(1) : face_hiddenvarbinary(42) : subj_uidint(11) : samplesint(11) : collisionsvarbinary(42) : idfilesdatetime photo_taken_atdouble file_fpsfloat file_aspect_ratiodatetime created_atdatetime updated_atdatetime deleted_atint(10) : unsigned photo_idvarbinary(42) : photo_uidvarbinary(48) : time_indexvarbinary(32) : media_idbigint(20) : media_utcvarbinary(42) : instance_idvarbinary(42) : file_uidvarbinary(755) : file_namevarbinary(16) : file_rootvarbinary(755) : original_namevarbinary(128) : file_hashbigint(20) : file_sizevarbinary(32) : file_codecvarbinary(16) : file_typevarbinary(16) : media_typevarbinary(64) : file_mimetinyint(1) : file_primarytinyint(1) : file_sidecartinyint(1) : file_missingtinyint(1) : file_portraittinyint(1) : file_videobigint(20) : file_durationint(11) : file_framesint(11) : file_widthint(11) : file_heightint(11) : file_orientationvarbinary(64) : file_projectiontinyint(1) : file_hdrtinyint(1) : file_watermarkvarbinary(64) : file_color_profilevarbinary(16) : file_main_colorvarbinary(9) : file_colorsvarbinary(9) : file_luminanceint(11) : file_diffsmallint(6) : file_chromavarchar(64) : file_softwarevarbinary(512) : file_errorbigint(20) : mod_timebigint(20) : created_inbigint(20) : updated_inint(10) : unsigned idfiles_sharedatetime created_atdatetime updated_atvarbinary(16) : statusvarbinary(512) : errorint(11) : errorsint(10) : unsigned file_idint(10) : unsigned account_idvarbinary(255) : remote_namefiles_syncdatetime remote_datedatetime created_atdatetime updated_atint(10) : unsigned file_idbigint(20) : remote_sizevarbinary(16) : statusvarbinary(512) : errorint(11) : errorsvarbinary(255) : remote_nameint(10) : unsigned account_idfoldersdatetime created_atdatetime updated_atdatetime modified_atdatetime deleted_atvarbinary(500) : pathvarbinary(16) : rootvarbinary(16) : folder_typevarchar(200) : folder_titlevarchar(100) : folder_categoryvarchar(2048) : folder_descriptionvarbinary(32) : folder_ordervarbinary(2) : folder_countryint(11) : folder_yearint(11) : folder_monthint(11) : folder_daytinyint(1) : folder_favoritetinyint(1) : folder_privatetinyint(1) : folder_ignoretinyint(1) : folder_watchvarbinary(42) : folder_uidkeywordsvarchar(64) : keywordtinyint(1) : skipint(10) : unsigned idlabelsdatetime created_atdatetime updated_atdatetime deleted_atvarbinary(42) : label_uidvarbinary(160) : label_slugvarbinary(160) : custom_slugvarchar(160) : label_nameint(11) : label_prioritytinyint(1) : label_favoritevarchar(2048) : label_descriptionvarchar(1024) : label_notesint(11) : photo_countvarbinary(128) : thumbvarbinary(8) : thumb_srcint(10) : unsigned idlensesdatetime created_atdatetime updated_atdatetime deleted_atvarbinary(160) : lens_slugvarchar(160) : lens_namevarchar(160) : lens_makevarchar(160) : lens_modelvarchar(100) : lens_typevarchar(2048) : lens_descriptionvarchar(1024) : lens_notesint(10) : unsigned idlinksdatetime created_atdatetime modified_atvarbinary(42) : share_uidvarbinary(160) : share_slugvarbinary(160) : link_tokenint(11) : link_expiresint(10) : unsigned link_viewsint(10) : unsigned max_viewstinyint(1) : has_passwordtinyint(1) : can_commenttinyint(1) : can_editvarbinary(42) : link_uidmarkersdouble face_distmediumblob embeddings_jsonmediumblob landmarks_jsonfloat xfloat yfloat wfloat hdatetime matched_atdatetime created_atdatetime updated_atvarbinary(42) : file_uidvarbinary(8) : marker_typevarbinary(8) : marker_srcvarchar(160) : marker_nametinyint(1) : marker_reviewtinyint(1) : marker_invalidvarbinary(42) : subj_uidvarbinary(8) : subj_srcvarbinary(42) : face_idint(11) : qint(11) : sizesmallint(6) : scorevarbinary(128) : thumbvarbinary(42) : marker_uidmigrationsdatetime started_atdatetime finished_atvarchar(16) : dialectvarchar(255) : errorvarchar(16) : sourcevarchar(16) : idpasswordsdatetime created_atdatetime updated_atvarbinary(255) : hashvarbinary(255) : uidphotosdatetime taken_atdatetime taken_at_localfloat photo_latfloat photo_lngfloat photo_f_numberdatetime created_atdatetime updated_atdatetime edited_atdatetime checked_atdatetime estimated_atdatetime deleted_atvarbinary(42) : uuidvarbinary(8) : taken_srcvarbinary(42) : photo_uidvarbinary(8) : photo_typevarbinary(8) : type_srcvarchar(200) : photo_titlevarbinary(8) : title_srcvarchar(4096) : photo_descriptionvarbinary(8) : description_srcvarbinary(500) : photo_pathvarbinary(255) : photo_namevarbinary(755) : original_nametinyint(4) : photo_stacktinyint(1) : photo_favoritetinyint(1) : photo_privatetinyint(1) : photo_scantinyint(1) : photo_panoramavarbinary(64) : time_zonevarbinary(42) : place_idvarbinary(8) : place_srcvarbinary(42) : cell_idint(11) : cell_accuracyint(11) : photo_altitudevarbinary(2) : photo_countryint(11) : photo_yearint(11) : photo_monthint(11) : photo_dayint(11) : photo_isovarbinary(64) : photo_exposureint(11) : photo_focal_lengthsmallint(6) : photo_qualityint(11) : photo_facessmallint(6) : photo_resolutionsmallint(6) : photo_colorint(10) : unsigned camera_idvarbinary(160) : camera_serialvarbinary(8) : camera_srcint(10) : unsigned lens_idint(10) : unsigned idphotos_albumsdatetime created_atdatetime updated_atint(11) : ordertinyint(1) : hiddentinyint(1) : missingvarbinary(42) : photo_uidvarbinary(42) : album_uidphotos_keywordsint(10) : unsigned photo_idint(10) : unsigned keyword_idphotos_labelsvarbinary(8) : label_srcsmallint(6) : uncertaintyint(10) : unsigned photo_idint(10) : unsigned label_idplacesdatetime created_atdatetime updated_atvarchar(400) : place_labelvarchar(100) : place_districtvarchar(100) : place_cityvarchar(100) : place_statevarbinary(2) : place_countryvarchar(300) : place_keywordstinyint(1) : place_favoriteint(11) : photo_countvarbinary(42) : idsubjectsmediumblob metadata_jsondatetime created_atdatetime updated_atdatetime deleted_atvarbinary(8) : subj_typevarbinary(8) : subj_srcvarbinary(160) : subj_slugvarchar(160) : subj_namevarchar(160) : subj_aliasvarchar(2048) : subj_biovarchar(1024) : subj_notestinyint(1) : subj_favoritetinyint(1) : subj_hiddentinyint(1) : subj_privatetinyint(1) : subj_excludedint(11) : file_countint(11) : photo_countvarbinary(128) : thumbvarbinary(8) : thumb_srcvarbinary(42) : subj_uiduserslongtext user_settingstext person_biolongtext person_accountsdatetime login_atdatetime created_atdatetime updated_atdatetime deleted_atint(11) : address_idvarbinary(42) : user_uidvarbinary(42) : mother_uidvarbinary(42) : father_uidvarbinary(42) : global_uidvarchar(128) : full_namevarchar(64) : nick_namevarchar(64) : maiden_namevarchar(64) : artist_namevarchar(64) : user_namevarchar(32) : user_statustinyint(1) : user_disabledvarchar(255) : primary_emailtinyint(1) : email_confirmedvarchar(255) : backup_emailvarbinary(255) : person_urlvarchar(32) : person_phonevarchar(32) : person_statusvarbinary(255) : person_avatarvarchar(128) : person_locationvarbinary(255) : business_urlvarchar(32) : business_phonevarchar(255) : business_emailvarchar(128) : company_namevarchar(128) : department_namevarchar(64) : job_titleint(11) : birth_yearint(11) : birth_monthint(11) : birth_daytinyint(1) : terms_acceptedtinyint(1) : is_artisttinyint(1) : is_subjecttinyint(1) : role_admintinyint(1) : role_guesttinyint(1) : role_childtinyint(1) : role_familytinyint(1) : role_friendtinyint(1) : webdavvarbinary(500) : storage_pathtinyint(1) : can_invitevarbinary(32) : invite_tokenvarbinary(32) : invited_byvarbinary(64) : confirm_tokenvarbinary(64) : reset_tokenvarbinary(128) : api_tokenvarbinary(128) : api_secretint(11) : login_attemptsint(11) : id","title":"Entity-Relationship Diagram"},{"location":"developer-guide/media/","text":"Format Description Type Extensions     BMP Bitmap Image .bmp   GIF Graphics Interchange Format Image .gif   HEIF High Efficiency Image File Format Image .avci, .avcs, .avif, .avifs, .heic, .heics, .heif, .heifs   JPG Joint Photographic Experts Group (JPEG) Image .jfi, .jfif, .jif, .jpe, .jpeg, .jpg, .thm   MPO Stereoscopic JPEG (3D) Image .mpo   PNG Portable Network Graphics Image .pn, .png   TIFF Tag Image File Format Image .tif, .tiff   WEBP Google WebP Image .webp   RAW Unprocessed Sensor Data Raw .3fr, .ari, .arw, .bay, .cap, .cr2, .cr3, .crw, .data, .dcr, .dcs, .dng, .drf, .eip, .erf, .fff, .gpr, .iiq, .k25, .kdc, .mdc, .mef, .mos, .mrw, .nef, .nrw, .obm, .orf, .pef, .ptx, .pxn, .r3d, .raf, .raw, .rw2, .rwl, .rwz, .sr2, .srf, .srw, .x3f   AAE Apple Image Edits XML Sidecar .aae   JSON Serialized JSON Data (Exiftool, Google Photos) Sidecar .json   MD Markdown Formatted Text Sidecar .markdown, .md   TXT Plain Text Sidecar .txt   XML Extensible Markup Language Sidecar .xml   XMP Adobe Extensible Metadata Platform Sidecar .xmp   YML Serialized YAML Data (Config, Metadata) Sidecar .yaml, .yml   3G2 Mobile Multimedia Container (CDMA2000) Video .3g2   3GP Mobile Multimedia Container (3G) Video .3gp   ASF Advanced Systems Format Video .asf   AV1 AOMedia Video 1 Video .av1   AVC Advanced Video Coding (H.264, MPEG-4 Part 10) Video .avc   AVI Microsoft Audio Video Interleave Video .avi   FLV Adobe Flash Video .f4v, .flv   HEVC High Efficiency Video Coding (H.265) Video .hevc   MJPG Motion JPEG Video .mjpeg, .mjpg   MKV Matroska Multimedia Container Video .mkv   MOV Apple QuickTime Video .mov, .qt   MP2 MPEG 2 (H.262) Video .mp2, .mpv   MP4 Multimedia Container (MPEG-4 Part 14) Video .m4v, .mp, .mp4   MPG Moving Picture Experts Group (MPEG) Video .mpeg, .mpg   MTS Advanced Video Coding High Definition (AVCHD) Video .mts   OGV Ogg Media (OGG) Video .ogg, .ogv, .ogx   VVC Versatile Video Coding (H.266) Video .vvc   WEBM Google WebM Video .webm   WMV Windows Media Video .wmv","title":"Supported Media and Sidecar File Formats"},{"location":"developer-guide/media/#cli-command","text":"<p>Run <code>photoprism show formats</code> in a terminal to list supported media and sidecar file formats.</p> <p>Command Flags:</p> <ul> <li><code>--md</code>, <code>-m</code>     format as machine-readable Markdown</li> <li><code>--csv</code>, <code>-c</code>    export as semicolon separated values</li> <li><code>--tsv</code>, <code>-t</code>    export as tab separated values</li> <li><code>--short</code>, <code>-s</code>  hide format descriptions</li> </ul>","title":"CLI Command"},{"location":"developer-guide/media/abstraction/","text":"<p>We need to add file system abstraction, also to speed up testing. Afero seems to be the gold standard for this in the Go world:</p> <p>spf13/afero</p>","title":"Abstraction"},{"location":"developer-guide/media/abstraction/#issues","text":"<ul> <li>Embedded Database + Bleve for search? #55</li> <li>Postgres support? #47</li> </ul>","title":"Issues"},{"location":"developer-guide/media/abstraction/#external-resources","text":"<ul> <li>rclone/rclone - rsync for cloud storage (Google Drive, AWS, One Drive, ...)</li> <li>@minio - Object Storage for AI</li> <li>upper.io/db.v3 - a productive data access layer for Go</li> <li>LevelDB - fast key-value storage library written at Google (written in Go)</li> <li>Bleve - full-text search and indexing for Go</li> <li>TiDB - a distributed HTAP database compatible with the MySQL protocol (written in Go)</li> <li>KSQL - the Streaming SQL Engine for Apache Kafka</li> <li>CockroachDB - ultra-resilient SQL for global business (written in Go)</li> <li>LedisDB - a high performance NoSQL like Redis powered by Go</li> <li>go-pg/pg - Golang ORM with focus on PostgreSQL features and performance</li> <li>go-redis/redis - Type-safe Redis client for Golang</li> </ul>","title":"External Resources"},{"location":"developer-guide/media/encryption/","text":"","title":"Encryption"},{"location":"developer-guide/media/encryption/#related-tickets","text":"<p>Support for cloud storage with encryption</p>","title":"Related tickets"},{"location":"developer-guide/media/heif/","text":"<p>HEIF is a new image file format employing HEVC (h.265) image coding for the best compression ratios currently possible. Newer iPhones use it for internal photo storage. It is supported on iOS 11 and macOS High Sierra and later.</p>","title":"HEIF / HEIC"},{"location":"developer-guide/media/heif/#testing-conversion-and-orientation","text":"<p>Let's say you have Docker installed and want to test HEIF image conversion and orientation with Debian 12 \"Bookworm\", you can simply run this command to open a terminal:</p> <pre><code>docker run --rm -v ${PWD}:/test -w /test -ti debian:bookworm bash\n</code></pre> <p>This will mount the current working directory as <code>/test</code>. Of course, you can also specify a full path instead of <code>${PWD}</code>.</p> <p>The available Ubuntu, Debian and PhotoPrism images can be found on Docker Hub:</p> <ul> <li>https://hub.docker.com/_/ubuntu</li> <li>https://hub.docker.com/_/debian</li> <li>https://hub.docker.com/r/photoprism/photoprism/tags</li> </ul> <p>Now install <code>exiftool</code> and <code>libheif-examples</code> (includes the <code>heif-convert</code> command) via <code>apt</code>:</p> <pre><code>apt update\napt install -y libheif-examples exiftool\n</code></pre> <p>Finally, run the <code>heif-convert</code> command (<code>-q 92</code> is optional and determines the JPEG quality/compression):</p> <pre><code>root@1ad9fb887a4f:/test# heif-convert -q 92 IMG_8437.HEIC IMG_8437.HEIC.jpg\nFile contains 1 image\nWritten to IMG_8437.HEIC.jpg\n</code></pre> <p>To view the image metadata, run <code>exiftool -n &lt;filename&gt;</code> and optionally use grep to filter the output:</p> <pre><code>root@1ad9fb887a4f:/test# exiftool -n IMG_8437.HEIC.jpg | grep ation\nFile Modification Date/Time     : 2022:09:18 08:16:28+00:00\nOrientation                     : 6\nExposure Compensation           : 0\nroot@1ad9fb887a4f:/test# exiftool -n IMG_8437.HEIC | grep ation\nFile Modification Date/Time     : 2022:09:17 16:57:40+00:00\nOrientation                     : 6\nExposure Compensation           : 0\nHEVC Configuration Version      : 1\nMin Spatial Segmentation IDC    : 0\nRotation                        : 270\n</code></pre> <p>Rotation and Orientation are the important values you should pay attention to and compare. The rotation is in degrees.</p>","title":"Testing Conversion and Orientation"},{"location":"developer-guide/media/heif/#exiftool-parameters","text":"<ul> <li><code>-n</code> displays the raw values without changes</li> <li><code>-j</code> will format the output as JSON</li> <li><code>-g</code> groups the output by metadata source</li> </ul>","title":"Exiftool Parameters"},{"location":"developer-guide/media/heif/#exif-orientation","text":"<p>The Exif orientation values are numbered from 1 to 8:</p> <ol> <li>= 0 degrees: the correct orientation, no adjustment is required.</li> <li>= 0 degrees, mirrored: image has been flipped back-to-front.</li> <li>= 180 degrees: image is upside down.</li> <li>= 180 degrees, mirrored: image has been flipped back-to-front and is upside down.</li> <li>= 90 degrees: image has been flipped back-to-front and is on its side.</li> <li>= 90 degrees, mirrored: image is on its side.</li> <li>= 270 degrees: image has been flipped back-to-front and is on its far side.</li> <li>= 270 degrees, mirrored: image is on its far side.</li> </ol>","title":"Exif Orientation"},{"location":"developer-guide/media/heif/#external-resources","text":"<ul> <li>https://www.idownloadblog.com/2017/10/18/how-to-convert-heif-to-jpeg-imazing-heic-converter/ - How to convert HEIF images to JPEGs with iMazing HEIC Converter</li> <li>strukturag/libheif - libheif is a ISO/IEC 23008-12:2017 HEIF file format decoder and encoder (C++)</li> <li>nokiatech/heif - Reader/Writer Engine is an implementation of the HEIF standard to demonstrate its powerful features and capabilities (C++)</li> <li>monostream/tifig - A fast HEIF image converter aimed at thumbnailing</li> <li>perkeep/perkeep#969 - HEIC/HEVC support in Perkeep</li> <li>jdeng/goheif - A decoder/converter for HEIC based on libde265 (CGO)</li> </ul>","title":"External Resources"},{"location":"developer-guide/media/import/","text":"<p>As PhotoPrism is a complete photo management solution, it is not only possible to index existing images, but also to add / upload new files to a photo collection or delete existing photos to save storage.</p> <p>There has been a debate on whether PhotoPrism should be responsible for file naming, see Support Photos In Place on Hard Drive #41. As soon as you want the software to create new files or merge photo libraries from different devices, there is no other way. Therefore we're going to implement a read-only mode for those who want to use it as a gallery with reduced functionality, see Read-only mode #56.</p>","title":"Import"},{"location":"developer-guide/media/import/#post-processing-keyboard-shortcuts","text":"<p>After importing new images, it would be amazing to be able to quickly sort / review them. This way the library stays clean and well organized, even without applying filters to hide bad shots. Apparently this is common among users of Adobe Bridge, a tool used by many professionals. They go through complete asset collections and sort photos using keyboard shortcuts, where keys toggle pre-defined tags or flags like \"favorite\".</p>","title":"Post Processing / Keyboard Shortcuts"},{"location":"developer-guide/media/import/#upload","text":"<p>Idea: We can use Webassembly for performance enhancements / faster upload.</p>","title":"Upload"},{"location":"developer-guide/media/raw/","text":"<p>Many photographers keep their originals in some sort of lossless RAW format instead of compressed JPEG, especially when shooting with a Digital SLR. Some mobile phones also support RAW or use HEIC/HEIF for a similar purpose. PhotoPrism aims at providing excellent support for all RAW formats, independent of camera brand and model. Please let us know when there is an issue with your specific device.</p> <p>Web browsers in general can not display RAW image files. They need to be converted, which is what our import and convert commands do. You'll also find a checkbox for this step in our Web UI.</p> <p>In addition, PhotoPrism now also supports TIFF, PNG, BMP and GIF files. Be aware that files in those formats often don't contain useful metadata and are typically used for screenshots, charts, graphs and icons only.</p> <p></p>","title":"RAW Images"},{"location":"developer-guide/media/raw/#sips","text":"<p>On a Mac, PhotoPrism can convert multiple files at once using Sips (pre-installed on OS X). It is not available for other operating systems, as far as we know.</p>","title":"Sips"},{"location":"developer-guide/media/raw/#darktable","text":"<p>We've recently upgraded Darktable from 2.6.2 to 3.0.0. Since the old PPA is not maintained anymore, we switched to this repository that is hosted by SuSE:</p> <p>https://software.opensuse.org/download.html?project=graphics:darktable:master&amp;package=darktable</p> <p>Note that PhotoPrism can only run one instance of <code>darktable-cli</code> because it uses a lock file. If you run it more than once, it will fail. Be prepared to wait a bit.</p>","title":"Darktable"},{"location":"developer-guide/media/raw/#using-darktable-as-library","text":"<p>We had the idea to use cgo and link directly against <code>libdarktable.so</code> to convert RAW images to JPEG, see darktable-dev mailing list. However this requires calling/wrapping a large number of C functions and also has other disadvantages. The idea is postponed until a clear benefit becomes visible. Running <code>darktable-cli</code> or any other binary that does the job (see above) seems to be the way to go.</p>","title":"Using Darktable as library"},{"location":"developer-guide/media/raw/#comparison-of-raw-to-jpeg-converters","text":"<ul> <li>darktable - popular open-source photography app and raw developer; available for Mac, Linux, and Windows; supports XMP (compatible with photoshop/lightroom?)</li> <li>Mac OS X ships with sips: <code>sips -s format jpeg IMAGE.RAW --out IMAGE.JPG</code></li> <li>Photivo - open-source photo processor; available for Mac, Linux, and Windows; no XMP support?</li> <li>RawTherapee - open-source RAW image processing app; available for Mac, Linux, and Windows; no XMP support?</li> <li>digiKam - open-source digital photo management application based on Qt (KDE); available for Mac, Linux, and Windows; supports XMP (compatible with photoshop/lightroom?)</li> <li>UFRaw - Unidentified Flying Raw is a utility to read and manipulate raw images from digital cameras</li> </ul>    Tool Command line options Compatible OS JPG Diff* XMP support Possible settings EXIF Diff* Compatible with Raspberry (ARM64)     Darktable 1) <code>darktable-cli IMG_0310.CR2  IMG_0310_darktable1.jpg</code> 2) <code>darktable-cli IMG_0310_EDITED.CR2 IMG_0310_EDITED.xmp IMG_0310_EDITED_darktable2.jpg</code> macOS, Linux, Windows **** yes (but seems to be not compatible with adobe xmps) ? **** yes   Sips <code>sips -s format jpeg IMG_0310.CR2 --out IMG_0310_sips.jpg</code> macOS ***** no ? **** not available for ubuntu   Rawtherapee <code>rawtherapee-cli -o IMG_0310_rawtherapee.jpg -c IMG_0310.CR2</code> macOS, Linux, Windows *** no ? **** yes   UFraw <code>ufraw-batch --out-type=jpg --output=IMG_0310_ufraw.jpg IMG_0310.CR2</code> macOS, Linux, Windows * no ? ** yes   ImageMagick <code>magick IMG_0310.CR2 IMG_0310_magick.jpg</code> macOS, Linux, Windows * no ? ** yes   Digikam ? macOS, Linux, Windows - - - - -   Photiva ? macOS, Linux, Windows - - - - -   <code>*</code> Compared to JPG/EXIF converted from photoshop","title":"Comparison of RAW to JPEG converters"},{"location":"developer-guide/media/raw/#image-diff","text":"<p>The following table shows the difference between the JPEG files converted by Darktable, Sips, Rawtherapee, UFraw and ImageMagick compared to Adobe Photoshop. Red are pixel that differ from the photoshop version, white are equal pixels. In total 5 Images have been compared (full results). The diff was created using ewanmellor/git-diff-image.</p>    Tool Diff (left is Photoshop)     Darktable    Sips    Rawtherapee    UFraw    ImageMagick","title":"Image Diff"},{"location":"developer-guide/media/raw/#exif-diff","text":"<p>The following table shows the difference between the JPG files converted by the tools compared to JPG files converted by photoshop. 5 Images have been compared.</p>    Info Photoshop Sips Darktable Raw-therapee Image Magick UFraw     Kind identical identical identical identical identical identical   Size 2.881.969 bytes (EXIF)/ 2.7M (ls -alh) 2.673.777 bytes / 2.5M 5.446.710 bytes / 5.2M always bigger 3.467.998 bytes / 3.3M 3.467.998 bytes / 3.3M 1.558.587 bytes / 1.5M always smaller   Where reference different different different different different   Created reference different different different different different   Modified reference different different different different different   Dimension identical - 5472\u200a\u00d7\u200a3648 5472\u200a\u00d7\u200a3648 different - 5494\u200a\u00d7\u200a3666 different - 5488\u200a\u00d7\u200a3662 different - 5496\u200a\u00d7\u200a3670 different - 5496\u200a\u00d7\u200a3670   Device Make refrence identical identical identical not set not set   Colour space reference identical identical identical identical identical   Colour profile Adobe RGB (1998) different - Display P3 different - sRGB different - RTv2_sRGB not set not set   Focal length reference identical identical identical not set not set   Alpha Channel reference identical identical identical not set not set   Red eye reference identical identical identical not set not set   Metering Mode reference identical identical identical not set not set   F number reference identical identical identical not set not set   Exposure program reference identical identical identical not set not set   Exposure time reference identical identical identical not set not set   Latitude reference sometimes very small differences identical identical not set not set   Longitude reference sometimes very small differences identical identical not set not set","title":"EXIF Diff"},{"location":"developer-guide/media/raw/#adobe-photoshop-lightroom","text":"<p>Ideally we can convert images directly with Photoshop or Lightroom, if installed. It seems like Photoshop comes with some sort of command-line automation tool based on NodeJS: adobe-photoshop/generator-core</p> <p>See https://photo.stackexchange.com/questions/39532/command-line-approach-to-develop-raw-images-with-adobe-xmp-sidecars</p> <p>This needs further investigation. Contributions welcome!</p>","title":"Adobe Photoshop / Lightroom"},{"location":"developer-guide/media/raw/#todo-reading-list","text":"<ul> <li>Compare the quality and XMP compatibility of different RAW converters #65</li> <li>Investigate if PhotoShop or Lightroom can be used to convert images on the command line</li> <li>Collect example RAW files of common camera brands and models</li> <li>Figure out how we can implement \"auto-enhance\" (automatically fix exposure and write XMP file while converting to JPEG)</li> <li>https://howtogimp.com/raw-photos-in-gimp/ - RAW converters to use with GIMP</li> <li>mdouchement/hdr - HDR is a library that handles RAW image format written with Golang</li> </ul>","title":"Todo / Reading List"},{"location":"developer-guide/media/samples/","text":"<p>For now, we only want to support RAW and JPEG from the most popular camera brands/models. Therefore we need an archive of example pictures for testing purposes. </p> <p>In the tables below you see for which camera models we still need images. In case you have images from the requested cameras you want to share with us:</p> <ul> <li>You can get an account for uploading example images to https://dl.photoprism.app/samples/, please ask</li> <li>You can also send us images per mail</li> </ul>","title":"Samples"},{"location":"developer-guide/media/samples/#most-popular-brands-according-to-flickr","text":"<p>https://www.flickr.com/cameras</p>","title":"Most Popular Brands according to Flickr"},{"location":"developer-guide/media/samples/#market-share-by-brand-2016","text":"<p>DSLR cameras:</p>    Brand Share     Canon 63.3%   Nikon 31.6%   Ricoh Imaging (Pentax) 4.8%    <p>System cameras:</p>    Brand Share     Olympus 26.8%   Canon 18.5%   Sony 17.9%    <p>Brands with the highest market share 2016</p>","title":"Market Share by Brand (2016):"},{"location":"developer-guide/media/samples/#most-popular-camera-models","text":"","title":"Most popular camera models:"},{"location":"developer-guide/media/samples/#camera-models-supported-by-photoshop","text":"<p>https://helpx.adobe.com/camera-raw/kb/camera-raw-plug-supported-cameras.html</p>","title":"Camera models supported by photoshop:"},{"location":"developer-guide/media/thumbnails/","text":"<p>PhotoPrism uses the disintegration/imaging package to generate thumbnail images that are displayed in search results and in the full-screen viewer.</p> <p>The smallest configurable size limit is 720px, which corresponds to the <code>fit_720</code> thumbnail type. All sizes up to 720x720 will be generated by default and should therefore always be available.</p> <p>Besides their obvious use in the frontend, the indexer uses thumbnails for color detection, face detection, and image classification, see Advanced Settings in the User Guide.</p>","title":"Thumbnail Images"},{"location":"developer-guide/media/thumbnails/#server-api","text":"<p>Like most commercial image hosting services, we have chosen to implement a cookie-free thumbnail API to minimize request latency by avoiding unnecessary network traffic:</p> <ul> <li>When a browser requests static files such as images from a server over HTTPS, it is generally unnecessary to send a cookie with each request if the URLs cannot be guessed, so for most practical use cases</li> <li>One possible use of cookies may be to prevent the user from intentionally or accidentally sharing confidential thumbnail URLs with others</li> <li>This is possible with most image hosting services/social media sites, and could also be considered a feature if you just want to share a few thumbnails without a lot of bells and whistles</li> <li>Once an image has been downloaded by someone else, blocking the original URL provides little additional security, as digital copies are just as good as the original, see info box below</li> <li>Keeping that in mind, previously shared URLs can be invalidated by changing the security token in your config</li> <li>This will invalidate the browser cache on all connected devices, requiring previously cached thumbnails to be downloaded again</li> <li>Be aware that frequent token changes result in performance degradation and a poor user experience.</li> </ul> <p>In addition to better performance, a major advantage of cookie-free thumbnails is that they can be easily integrated into a content delivery network (CDN), since there is no need to check cookies or add other complex logic on edge servers.</p>  <p>Web Security</p> <p>Digital copies are as good as originals: Once shared and downloaded, such images should be considered \"leaked\" because they are cached and can be re-shared by the recipient at any time, with no sure way to get all copies back, even if the download URL becomes invalid or the service is shut down completely.</p> <p>Any form of protection we could provide would essentially be \"snake oil\", could be circumvented, and would have a negative impact on the user experience, such as disabling the browser cache or context menu.</p> <p>For the highest level of protection, it is recommended to shield your private server from the public Internet. Always use HTTPS, a VPN and/or ideally TLS client certificates and make sure that only people you trust have access to your instance.</p>","title":"Server API"},{"location":"developer-guide/media/thumbnails/#references","text":"<ul> <li>https://www.keycdn.com/support/how-to-use-cookie-free-domains</li> <li>https://ourcodeworld.com/articles/read/1341/why-you-should-use-a-cookie-less-domain-for-serving-your-static-content-cdn</li> <li>https://pragmaticwebsecurity.com/articles/oauthoidc/localstorage-xss.html</li> </ul>  <p>Since most users have only one domain/host name and modern web applications can store authentication tokens in localStorage, our REST API does not require or use cookies by default.</p>","title":"References"},{"location":"developer-guide/media/thumbnails/#image-endpoint-uri","text":"<p>Authenticated with SHA1 hash and additional security token:</p> <pre><code>/api/v1/t/a2195b6840f46b555719d8e22e9b080e61a7317c/10d68214/tile_500\n</code></pre> <p>In public mode without security token:</p> <pre><code>/api/v1/t/a2195b6840f46b555719d8e22e9b080e61a7317c/public/tile_500\n</code></pre> <p>The thumbnail size and aspect ratio are specified at the end, in this case <code>tile_500</code>, which means 500x500 pixels.</p>","title":"Image Endpoint URI"},{"location":"developer-guide/media/thumbnails/#video-endpoint-uri","text":"<p>Authenticated with SHA1 hash and additional security token:</p> <pre><code>/api/v1/videos/51843134d75f4cbde534270cdd5954067f887ee6/10d68214/avc\n</code></pre> <p>In public mode without security token:</p> <pre><code>/api/v1/videos/51843134d75f4cbde534270cdd5954067f887ee6/public/avc\n</code></pre> <p>Videos can be streamed if the browser supports it. The format is specified at the end, in this case MPEG-4 AVC.</p>","title":"Video Endpoint URI"},{"location":"developer-guide/media/thumbnails/#thumbnail-types","text":"<p>The smallest configurable static and dynamic size limit is 720px, so all formats up to <code>fit_720</code> should be generated by default while indexing.</p> <p>Higher settings allow PhotoPrism to generate thumbnails with more detail in higher resolutions - either  statically (while indexing) or dynamically (on-demand).</p>    Name Width Height Common Use     <code>colors</code> 3 3 Color Detection   <code>tile_50</code> 50 50 List Preview   <code>tile_100</code> 100 100 Maps Preview   <code>tile_224</code> 224 224 Mosaic Preview   <code>left_224</code> 224 224 TensorFlow   <code>right_224</code> 224 224 TensorFlow   <code>tile_500</code> 500 500 Cards Preview   <code>fit_720</code> 720 720 Mobile, TV   <code>fit_1280</code> 1280 1024 Mobile, HD Ready TV   <code>fit_1920</code> 1920 1200 Mobile, Full HD TV   <code>fit_2048</code> 2048 2048 Tablets, Cinema 2K   <code>fit_2560</code> 2560 1600 Quad HD, Retina Display   <code>fit_3840</code> 3840 2400 Ultra HD   <code>fit_4096</code> 4096 4096 Ultra HD, Retina 4K   <code>fit_7680</code> 7680 4320 8K Ultra HD 2, Retina 6K    <p>See <code>/internal/thumb/sizes.go</code> for details.</p>","title":"Thumbnail Types"},{"location":"developer-guide/media/thumbnails/#storage-folders","text":"<p>Generated thumbnails are cached in sub-folders of <code>/storage/cache/thumbnails</code> based on the SHA1 hash of the original file, for example:</p> <pre><code>/storage/cache/thumbnails/1/a/3/1a30c1f...9_100x100_center.jpg\n</code></pre>","title":"Storage Folders"},{"location":"developer-guide/media/thumbnails/#downscaling-filters","text":"","title":"Downscaling Filters"},{"location":"developer-guide/media/thumbnails/#linear","text":"<p>Bilinear interpolation takes a weighted average of the four neighborhood pixels to calculate its final interpolated value. The result is a much smoother image than the original image. When all known pixel distances are equal, then the interpolated value is simply their sum divided by four. This technique performs interpolation in both directions, horizontal and vertical. This technique gives better result than nearest neighbor interpolation and take less computation time compared to bicubic interpolation.</p>","title":"Linear"},{"location":"developer-guide/media/thumbnails/#cubic","text":"<p>Catmull-Rom is a local interpolating spline developed for computer graphics purposes. Its initial use was in design of curves and surfaces, and has recently been used in several applications. Catmull-Rom splines are a family of cubic interpolating splines formulated such that the tangent at each point is calculated using the previous and next point on the spline. The results are similar to ones produced by bicubic interpolation with regards to sharpness, but the Catmull-Rom reconstruction is clearly superior in smooth signal region.</p>","title":"Cubic"},{"location":"developer-guide/media/thumbnails/#lanczos","text":"<p>The Lanczos interpolation function is a mathematical formula used to smoothly interpolate the value of a digital image between its samples. It maps each sample of the given image to a translated and scaled copy of the Lanczos kernel, which is a sinc function windowed by the central hump of a dilated sinc function. The sum of these translated and scaled kernels is then evaluated at the desired pixel. Lanczos interpolation has the best properties in terms of detail preservation and minimal generation of aliasing artifacts for geometric transformations not involving strong down sampling. However higher order Lanczos interpolation requires high computational time, which makes it unsuitable for most commercial software.</p>","title":"Lanczos"},{"location":"developer-guide/media/thumbnails/#blackman","text":"<p>Blackman is a modification of Lanczos that has better control of ringing artifacts.</p>","title":"Blackman"},{"location":"developer-guide/media/thumbnails/#further-reading","text":"<ul> <li>https://en.wikipedia.org/wiki/Image_scaling</li> <li>https://en.wikipedia.org/wiki/Lanczos_resampling</li> <li>https://en.wikipedia.org/wiki/Comparison_gallery_of_image_scaling_algorithms</li> </ul>","title":"Further Reading"},{"location":"developer-guide/media/videos/","text":"<p>PhotoPrism may use ffmpeg to transcode  common video formats to MPEG-4 AVC. This container / codec combination doesn't require transcoding as it can be played  natively by most modern browsers, see https://caniuse.com/mpeg4.</p> <p>OGV, VP8, VP9, AV1, WebM and HEVC videos will be streamed directly in case they are supported by your browser and if they do not exceed the configured bitrate limit.  Otherwise those formats will be transcoded as well.</p> <p>For a list of codecs ffmpeg supports, run this command in a terminal:</p> <pre><code>ffmpeg -decoders\n</code></pre> <p>Please note:</p> <ol> <li>Not all video and audio formats can be played with every browser. For example, AAC - the default audio codec for MPEG-4 AVC / H.264 - is supported natively in Chrome, Safari, and Edge, while it is only optionally supported by the OS in Firefox and Opera.</li> <li>HEVC/H.265 video files can have a <code>.mp4</code> file extension too, which is often associated with AVC only. This is because MP4 is a container format, meaning that the actual video content may be compressed with H.264, H.265, or something else. The file extension doesn't really tell you anything other than that it's probably a video file.</li> </ol>  <p>Info</p> <p>While the QuickTime <code>.mov</code> container format served as the basis for MPEG-4, there are differences and the two are not quite interchangeable. They still play in most browsers and won't be transcoded automatically for this reason.</p>","title":"Videos"},{"location":"developer-guide/media/videos/#containers","text":"<ul> <li>https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Containers</li> </ul>","title":"Containers"},{"location":"developer-guide/media/videos/#codecs","text":"<ul> <li>https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Video_codecs</li> </ul>","title":"Codecs"},{"location":"developer-guide/metadata/classification/","text":"<p>Image classification is performed using a pre-trained model, NASNet Mobile 224, that we have chosen because of its size, performance and accuracy. To get a basic understanding of how this works, you can read Image Classification using Deep Neural Networks.</p> <p>In addition, we manually matched the model classification with the labels you see in our UI:</p> <p><pre><code>cat:\n  label: cat\n  threshold: 0.3\n  priority: 5\n  categories:\n    - animal\n\ntabby cat:\n  see: cat\n</code></pre>  </p> <p>This was necessary because we didn't find a taxonomy suitable for consumers (mainly just scientific ones) and needed a lot of control to fine tune terms and their probability thresholds. The raw results were not useful to a typical user. Indexing too many words, categories and alternatives also negatively affects performance and leads to noise. </p> <p>It took us several months of testing until we were happy with the results and there are still labels to improve.</p>","title":"Image Classification"},{"location":"developer-guide/metadata/classification/#updating-labels","text":"<p>After editing or adding labels in rules.yml, you now have to run <code>make generate</code> in the main project directory to generate native Go source from this file.</p>","title":"Updating labels"},{"location":"developer-guide/metadata/classification/#pre-trained-models","text":"<p>See also: TensorFlow Hub</p> <p>Source: https://github.com/tensorflow/models/blob/master/research/slim/README.md</p> <p>Neural nets work best when they have many parameters, making them powerful function approximators. However, this  means they must be trained on very large datasets. Because training models from scratch can be a very computationally intensive process requiring days or even weeks, there are various pre-trained models available.  These CNNs have been trained on the ILSVRC-2012-CLS image classification dataset.</p> <p>Note that the VGG and ResNet V1 parameters have been converted from their original caffe formats (here and here), whereas the Inception and ResNet V2 parameters have been trained internally at Google. Also be aware that these accuracies were computed by evaluating using a single image crop. PhotoPrism uses three crops, except for square images.</p>    Model TF-Slim File Checkpoint Top-1 Accuracy Top-5 Accuracy     Inception V1 Code inception_v1_2016_08_28.tar.gz 69.8 89.6   Inception V2 Code inception_v2_2016_08_28.tar.gz 73.9 91.8   Inception V3 Code inception_v3_2016_08_28.tar.gz 78.0 93.9   Inception V4 Code inception_v4_2016_09_09.tar.gz 80.2 95.2   Inception-ResNet-v2 Code inception_resnet_v2_2016_08_30.tar.gz 80.4 95.3   ResNet V1 50 Code resnet_v1_50_2016_08_28.tar.gz 75.2 92.2   ResNet V1 101 Code resnet_v1_101_2016_08_28.tar.gz 76.4 92.9   ResNet V1 152 Code resnet_v1_152_2016_08_28.tar.gz 76.8 93.2   ResNet V2 50^ Code resnet_v2_50_2017_04_14.tar.gz 75.6 92.8   ResNet V2 101^ Code resnet_v2_101_2017_04_14.tar.gz 77.0 93.7   ResNet V2 152^ Code resnet_v2_152_2017_04_14.tar.gz 77.8 94.1   ResNet V2 200 Code TBA 79.9* 95.2*   VGG 16 Code vgg_16_2016_08_28.tar.gz 71.5 89.8   VGG 19 Code vgg_19_2016_08_28.tar.gz 71.1 89.8   MobileNet_v1_1.0_224 Code mobilenet_v1_1.0_224.tgz 70.9 89.9   MobileNet_v1_0.50_160 Code mobilenet_v1_0.50_160.tgz 59.1 81.9   MobileNet_v1_0.25_128 Code mobilenet_v1_0.25_128.tgz 41.5 66.3   MobileNet_v2_1.4_224^* Code mobilenet_v2_1.4_224.tgz 74.9 92.5   MobileNet_v2_1.0_224^* Code mobilenet_v2_1.0_224.tgz 71.9 91.0   NASNet-A_Mobile_224# Code nasnet-a_mobile_04_10_2017.tar.gz 74.0 91.6   NASNet-A_Large_331# Code nasnet-a_large_04_10_2017.tar.gz 82.7 96.2   PNASNet-5_Large_331 Code pnasnet-5_large_2017_12_13.tar.gz 82.9 96.2   PNASNet-5_Mobile_224 Code pnasnet-5_mobile_2017_12_13.tar.gz 74.2 91.9    <p>^ ResNet V2 models use Inception pre-processing and input image size of 299 (use <code>--preprocessing_name inception --eval_image_size 299</code> when using <code>eval_image_classifier.py</code>). Performance numbers for ResNet V2 models are reported on the ImageNet validation set.</p> <p>(#) More information and details about the NASNet architectures are available at this README</p> <p>All 16 float MobileNet V1 models reported in the MobileNet Paper and all 16 quantized TensorFlow Lite compatible MobileNet V1 models can be found here.</p> <p>(^#) More details on MobileNetV2 models can be found here.</p> <p>(*): Results quoted from the paper.</p> <p>Here is an example of how to download the Inception V3 checkpoint:</p> <pre><code>$ CHECKPOINT_DIR=/tmp/checkpoints\n$ mkdir ${CHECKPOINT_DIR}\n$ wget http://download.tensorflow.org/models/inception_v3_2016_08_28.tar.gz\n$ tar -xvf inception_v3_2016_08_28.tar.gz\n$ mv inception_v3.ckpt ${CHECKPOINT_DIR}\n$ rm inception_v3_2016_08_28.tar.gz\n</code></pre>","title":"Pre-trained Models"},{"location":"developer-guide/metadata/classification/#landmark-detection","text":"<p>DELF: DEep Local Features  - https://github.com/tensorflow/models/tree/master/research/delf - Tensorflow implementation</p> <p></p> <p>Source: https://gitcdn.xyz/cdn/Tony607/blog_statics/ce9c3391932e24655b78e27a54543f28f11f3af0/images/landmark/query.jpg</p>","title":"Landmark detection"},{"location":"developer-guide/metadata/classification/#types-of-neural-networks","text":"<p> Source: http://www.asimovinstitute.org/neural-network-zoo/</p>","title":"Types of neural networks"},{"location":"developer-guide/metadata/classification/#external-resources","text":"<ul> <li>https://ai.facebook.com/blog/roberta-an-optimized-method-for-pretraining-self-supervised-nlp-systems/ - An optimized method for pretraining self-supervised NLP systems</li> <li>zihangdai/xlnet - Generalized Autoregressive Pretraining for Language Understanding</li> <li>https://pjreddie.com/darknet/yolo/ - real time image detection</li> <li>https://pjreddie.com/darknet/imagenet/ - using use Darknet to classify images</li> <li>ZanLabs/go-yolo - Golang binding for YOLO/Darknet recognition framework</li> <li>https://itnext.io/implementing-yolo-v3-in-tensorflow-tf-slim-c3c55ff59dbe - Implementing YOLO v3 in Tensorflow (TF-Slim)</li> <li>chewxy/lingo - provides the data structures and algorithms required for natural language processing</li> <li>https://modelzoo.co/ - Discover open source deep learning code and pretrained models</li> <li>https://polarr.ai/ - Efficient and Immersive C.V. experiences on the edge</li> <li>gildasch/gildas-ai</li> <li>https://www.tensorflow.org/lite/guide/hosted_models</li> <li>https://github.com/tensorflow/models/tree/master/research/slim/nets/nasnet</li> <li>https://www.wikidata.org/wiki/Wikidata:Database_download</li> <li>ropensci/wikitaxa</li> <li>https://datahub.io/collections/yago - YAGO3 is a huge semantic knowledge base, derived from Wikipedia WordNet and GeoNames</li> <li>Google AI Blog: Improving Inception and Image Classification in TensorFlow</li> <li>CNN Architectures: LeNet, AlexNet, VGG, GoogLeNet, ResNet and more</li> <li>Gildas Chabot - AI image search with Go &amp; Tensorflow (slides)</li> </ul>","title":"External Resources"},{"location":"developer-guide/metadata/colors/","text":"<p>We've reimplemented color indexing using a 3x3 thumbnail. It enables us to search specific parts of an image. Our previous algorithm was not deterministic, so search would have returned different results every time.</p> <p>Demo: https://try.photoprism.app/photos?q=green</p>","title":"Color Detection"},{"location":"developer-guide/metadata/colors/#colors","text":"<p>See https://vuetifyjs.com/en/framework/colors</p> <p>TODO: Complete table with ID, Color Name, HTML Code and Sample</p>    ID Name Code Sample     0 Black #000000    1 Brown #795548    2 Grey #9E9E9E    3 White #FFFFFF    4 Purple #9C27B0    5 Gold #FFDF00    6 Blue #3F51B5    7 Cyan #00BCD4    8 Teal #009688    9 Green #4CAF50    A Lime #CDDC39    B Yellow #FFEB3B    C Magenta #FF00FF    D Orange #FF9800    E Red #F44336    F Pink #E91E63        ID Name Code Sample     0 Black #000000    1 Brown #A1887F #8D6E63 #A07F6C #9B7B5B #75645B #795548 #6D4C41 #5D4037 #9B6136 #C1A487 #AA8062 #6B5546 #B4B59C #B2B49B                 2 Grey #E0E0E0 #9E9E9E #757575 #616161 #424242 #847A72 #DFE0E1          3 White #FFFFFF #E4E4E4 #E7E7E7      4 Purple #F3E5F5 #E1BEE7 #CE93D8 #BA68C8 #AB47BC #9C27B0 #9B318F #86007E #8E24AA #7B1FA2 #6A1B9A #4A148C #AA00FF #EDE7F6 #D1C4E9 #B39DDB #9575CD #7E57C2 #5E35B1 #673AB7 #512DA8 #4527A0 #311B92 #B388FF #7C4DFF #8E6493 #5E3A5E #440E79 #483678 #4E3880  #3B0E79                                  5 Gold #EDDEAC #E8B451 #C08A3E #A27D4b #755531 #D19327 #DEA253 #D5AA6F #F5EAD4            6 Blue #3F51B5 #C5CAE9 #5C6BC0 #3949AB #303F9F #283593 #1A237E #536DFE #3D5AFE #304FFE #2196F3 #BBDEFB #90CAF9 #64B5F6 #42A5F5 #1E88E5 #1976D2 #1565C0 #0D47A1 #82B1FF #448AFF #2979FF #2962FF #03A9F6 #B3E5FC #81D4FA #4FC3F7 #29B6F6 #039BE5 #0288D1 #0277BD #01579B #80D8FF #40C4FF #00B0FF #0091EA #607D8B #78909C #546E7A #37474F #E4EBFD #7DD3EA #076399 #28446B #4AC8F5 #0800F4 #012D5F                                                  7 Cyan #B2EBF2 #80DEEA #4DD0E1 #26C6DA #00B8D4 #00BCD4 #00ACC1 #0097A7 #00838F #006064 #84FFFF #18FFFF #00E5FF                8 Teal #009688 #00897B #00796B #00695C #045D5C #245A5F #03454F #2C545E #174741            9 Green #E8F5E9 #C8E6C9 #ABC7B0 #A5D6A7 #81C784 #66BB6A #4CAF50 #43A047 #388E3C #2E7D32 #1B5E20 #F1F8E9 #DCEDC8 #C5E1A5 #AED581 #8BC34A #9CCC65 #7CB342 #689F38 #558B2F #33691E #B9F6CA #69F0AE #00C853 #00E676 #CCFF90 #B2FF59 #76FF03 #64DD17 #DDD579 #EEECA2 #244E3B #9A9D47 #BEBD76 #5C5A30 #B3C16C #ACA783 #474C25 #CDD087 #796D41                                           A Lime #F0F4C3 #E6EE9C #DCE775 #D4E157 #CDDC39 #C0CA33 #AFB42B #EEFF41 #C6FF00 #AEEA00             B Yellow #FFF9C4 #FFF59D #FFF176 #FFEE58 #FFFF8D #FFFF00 #FFD54F #FFCA28 #E3CE81 #D1AF52 #EEBB2B #D3A83A #C5A702 #9F8201 #E8CE03                  C Magenta #FF00FF #E500E5 #F000B5 #CE009B #C0055B #B00085 #A82863 #5B002F #4B0121 #860225 #CB023D #64071A #9E0047 #DC7ACF                 D Orange #FF9800 #FFA726 #FB8C00 #F57C00 #EF6C00 #FF9100  #FF6D00 #FD9A31 #7D2704 #FD571F #F86704 #FD9A00 #FE8A00 #F19652 #E58347 #C94C30 #9F5601 #FA6801 #F9A825 #BB723D                       E Red #FF5252 #F44336 #EF5350 #E53935 #F6292E  #FC252D #D32F2F #C62828 #BA2830 #B71C1C #D50000 #DB0806 #CF0904 #D81A14 #CC1708 #D80807 #DE2616 #EE240F #A1211F  #701219 #511218 #491114                         F Pink #FCE4EC #FDC8EB #E79FA6 #F8BBD0 #F48FB1 #FF80AB #FF4081 #F50057 #F06292 #EC407A #E91E63 #D81B60 #C2185B                 <pre><code>Black:  \"black\",  // 0\nBrown:  \"brown\",  // 1\nGrey:   \"grey\",   // 2\nWhite:  \"white\",  // 3\nPurple: \"purple\", // 4\nGold: \"gold\",     // 5\nBlue:   \"blue\",   // 6\nCyan:   \"cyan\",   // 7\nTeal:   \"teal\",   // 8\nGreen:  \"green\",  // 9\nLime:   \"lime\",   // A\nYellow: \"yellow\", // B\nMagenta: \"magenta\",  // C\nOrange: \"orange\", // D\nRed:    \"red\",    // E\nPink:   \"pink\",   // F\n</code></pre>","title":"Colors"},{"location":"developer-guide/metadata/colors/#hcl-vs-hsl","text":"<p></p> <p>See also lucasb-eyer/go-colorful#so-which-colorspace-should-i-use</p>","title":"HCL vs HSL"},{"location":"developer-guide/metadata/colors/#issues","text":"<ul> <li>~~Improved color indexing #7~~</li> </ul>","title":"Issues"},{"location":"developer-guide/metadata/colors/#external-resources","text":"<ul> <li>https://opencv.org/</li> <li>RobCherry/vibrant</li> </ul>","title":"External Resources"},{"location":"developer-guide/metadata/face-recognition/","text":"<p>To recognize faces, PhotoPrism first extracts crops from your images using the Pigo face detection library. It is based on pixel intensity comparisons.</p> <p>These are then fed into TensorFlow to compute 512-dimensional vectors for characterization.</p> <p>In the final step, the DBSCAN algorithm attempts to cluster these so-called face embeddings so that they can be assigned to people with a few clicks.</p>","title":"Face Recognition"},{"location":"developer-guide/metadata/face-recognition/#configuration","text":"<p>We recommend that only advanced users and developers change these parameters.</p>     Environment CLI Flag Default Description     PHOTOPRISM_FACE_SIZE --face-size 50 minimum size of faces in <code>PIXELS</code> (20-10000)   PHOTOPRISM_FACE_SCORE --face-score 9.000000 minimum face <code>QUALITY</code> score (1-100)   PHOTOPRISM_FACE_OVERLAP --face-overlap 42 face area overlap threshold in <code>PERCENT</code> (1-100)   PHOTOPRISM_FACE_CLUSTER_SIZE --face-cluster-size 80 minimum size of automatically clustered faces in <code>PIXELS</code> (20-10000)\u2002sponsors only   PHOTOPRISM_FACE_CLUSTER_SCORE --face-cluster-score 15 minimum <code>QUALITY</code> score of automatically clustered faces (1-100)\u2002sponsors only   PHOTOPRISM_FACE_CLUSTER_CORE --face-cluster-core 4 <code>NUMBER</code> of faces forming a cluster core (1-100)\u2002sponsors only   PHOTOPRISM_FACE_CLUSTER_DIST --face-cluster-dist 0.640000 similarity <code>DISTANCE</code> of faces forming a cluster core (0.1-1.5)\u2002sponsors only   PHOTOPRISM_FACE_MATCH_DIST --face-match-dist 0.460000 similarity <code>OFFSET</code> for matching faces with existing clusters (0.1-1.5)\u2002sponsors only    <ul> <li>A reasonable range for the similarity distance between face embeddings is between 0.60 and 0.70, with a higher value being more aggressive and leading to larger clusters with more false positives.</li> <li>To cluster a smaller number of faces, you can reduce the kernel to 3 or 2 similar faces.</li> </ul>","title":"Configuration"},{"location":"developer-guide/metadata/face-recognition/#external-resources","text":"<ul> <li>https://cheppers.com/deploying-distributed-face-recognition-application-kubernetes - Deploying a distributed face-recognition application with Kubernetes</li> <li>http://dlib.net/ - Machine learning library, good for face recognition</li> <li>Kagami/go-face - implements face recognition for Go using dlib</li> <li>https://hackernoon.com/face-recognition-with-go-676a555b8a7e - face recognition howto using Kagami/go-face</li> <li>esimov/pigo - Pigo is a face detection library implemented in Go</li> <li>https://gocv.io/ - GoCV gives access to the OpenCV 4 computer vision library</li> <li>davidsandberg/facenet - Face Recognition using Tensorflow (Python, not Go)</li> </ul>","title":"External Resources"},{"location":"developer-guide/metadata/geocoding/","text":"<p>If enabled, reverse geocoding enriches photo and video metadata with details such as country, state, city, and category.</p>","title":"Reverse Geocoding"},{"location":"developer-guide/metadata/geocoding/#privacy-policy","text":"<p>As explained in detail in our Privacy Policy, reverse geocoding depends on retrieving the necessary information from a backend that we provide for this purpose.</p> <p>The costs are currently fully covered by us for all users, including non-sponsors, and we ensure a very high level of privacy and confidentiality:</p> <ul> <li>API requests are not logged permanently.</li> <li>Our API approximates the coordinates and encodes them with a fuzzy S2 cell ID that does not include the house number or any other data identifying a specific residential address, except possibly in very sparsely populated areas of the world. Even then, we cannot trace the request back to a person, picture or point in time.</li> <li>We may store your server's IP address and other HTTP request headers for a limited time to perform authorization checks, prevent abuse, and implement rate limits. Since the traffic is encrypted, no one intercepting the server-to-server communication can see the exact request and response; only the fact that you exchanged data with our backend.</li> </ul>","title":"Privacy Policy"},{"location":"developer-guide/metadata/geocoding/#example-request","text":"<p><code>GET https://places.photoprism.app/v1/location/149ce78563</code></p> <pre><code>{\n  \"id\": \"s2:149ce78563\",\n  \"name\": \"Elafonisi Kite Club\",\n  \"street\": \"\u039a\u03b5\u03c6\u03b1\u03bb\u03ae\",\n  \"postcode\": \"\",\n  \"category\": \"nature\",\n  \"timezone\": \"Europe/Athens\",\n  \"lat\": 35.269638,\n  \"lng\": 23.536951,\n  \"place\": {\n    \"id\": \"gr:GCd9oey68OFr\",\n    \"label\": \"\u03a7\u03c1\u03c5\u03c3\u03bf\u03c3\u03ba\u03b1\u03bb\u03af\u03c4\u03b9\u03c3\u03c3\u03b1, Greece\",\n    \"district\": \"\",\n    \"city\": \"\u03a7\u03c1\u03c5\u03c3\u03bf\u03c3\u03ba\u03b1\u03bb\u03af\u03c4\u03b9\u03c3\u03c3\u03b1\",\n    \"state\": \"\u0391\u03c0\u03bf\u03ba\u03b5\u03bd\u03c4\u03c1\u03c9\u03bc\u03ad\u03bd\u03b7 \u0394\u03b9\u03bf\u03af\u03ba\u03b7\u03c3\u03b7 \u039a\u03c1\u03ae\u03c4\u03b7\u03c2\",\n    \"country\": \"gr\",\n    \"keywords\": \"\u03c7\u03c1\u03c5\u03c3\u03bf\u03c3\u03ba\u03b1\u03bb\u03af\u03c4\u03c3\u03b1\"\n  },\n  \"events\": [],\n  \"licence\": \"Data \u00a9 PhotoPrism\"\n}\n</code></pre>","title":"Example Request"},{"location":"developer-guide/metadata/geocoding/#location-data","text":"<p>See: internal/maps/location.go</p>","title":"Location Data"},{"location":"developer-guide/metadata/geocoding/#world-maps","text":"<p>PhotoPrism also includes four high-resolution world maps that allow you to browse photos by location, see Web User Interface &gt; Interactice Maps. Visit try.photoprism.app/places to try them on our demo.</p>","title":"World Maps"},{"location":"developer-guide/metadata/geocoding/#related-resources","text":"","title":"Related Resources"},{"location":"developer-guide/metadata/geocoding/#event-discovery","text":"<ul> <li>https://schedjoules.github.io/event-discovery-api/#introduction</li> <li>https://www.gdeltproject.org/data.html#rawdatafiles</li> </ul>","title":"Event Discovery"},{"location":"developer-guide/metadata/geocoding/#libraries","text":"<ul> <li>https://tegola.io/ - An open source vector tile server written in Go</li> <li>https://tegola.io/tutorials/tegola-with-open-layers/ - Using Tegola with OpenLayers</li> <li>go-spatial/tegola-osm - scripts for importing and running a mirror of OSM with tegola</li> <li>https://pelias.io/ - Pelias Geocoder (GitHub)</li> <li>Leaflet/Leaflet - JavaScript library for mobile-friendly interactive maps</li> <li>tidwall/tile38 - a geospatial database and realtime geofencing server</li> <li>melihmucuk/geocache - an in-memory cache that is suitable for geolocation based applications</li> <li>aaronland/go-slippy-tiles - a proxy for map tiles</li> <li>paulmach/osm - a general purpose library for reading, writing and working with OpenStreetMap data</li> <li>maguro/pbf - a Go-based OpenStreetMap PBF encoder/ decoder</li> <li>golang/geo - S2 geometry library in Go</li> <li>https://gist.github.com/antoniomo/3371e44cbe2f0cc75a525aac0d188cfb - example for S2 geometry library</li> <li>tidwall/redcon - Redis compatible server framework (Go)</li> <li>siddontang/ledisdb - a high performance NoSQL DB powered by Go (homepage)</li> <li>https://github.com/blevesearch/bleve/tree/master/geo - geo support in bleve</li> </ul>","title":"Libraries"},{"location":"developer-guide/metadata/geocoding/#commercial-services","text":"<ul> <li>https://developers.google.com/maps/documentation/</li> <li>https://www.mapbox.com/maps/</li> </ul>","title":"Commercial Services"},{"location":"developer-guide/metadata/geocoding/#tutorials","text":"<ul> <li>https://developers.google.com/maps/solutions/store-locator/clothing-store-locator#findnearsql</li> <li>https://blog.mastermaps.com/2014/08/showing-geotagged-photos-on-leaflet-map.html - Showing geotagged photos on a Leaflet map</li> <li>https://rubenspgcavalcante.github.io/leaflet-ant-path/ - Animate polylines as ants walking in a path</li> </ul>","title":"Tutorials"},{"location":"developer-guide/metadata/orientation/","text":"","title":"Image Orientation"},{"location":"developer-guide/metadata/orientation/#using-exiftool","text":"<p>Assuming you have Docker installed and want to run <code>exiftool</code> with Debian 12 \"Bookworm\", you can simply run this command to open a terminal:</p> <pre><code>docker run --rm -v ${PWD}:/test -w /test -ti debian:bookworm bash\n</code></pre> <p>This will mount the current working directory as <code>/test</code>. Of course, you can also specify a full path instead of <code>${PWD}</code>.</p> <p>The available Ubuntu, Debian and PhotoPrism images can be found on Docker Hub:</p> <ul> <li>https://hub.docker.com/_/ubuntu</li> <li>https://hub.docker.com/_/debian</li> <li>https://hub.docker.com/r/photoprism/photoprism/tags</li> </ul> <p>Now install <code>exiftool</code> and any other packages you need, e.g. <code>libheif-examples</code> to convert HEIF images to JPEG, via <code>apt</code>:</p> <pre><code>apt update\napt install -y exiftool libheif-examples\n</code></pre> <p>To view the image metadata, run <code>exiftool -n &lt;filename&gt;</code> and optionally use grep to filter the output:</p> <pre><code>root@1ad9fb887a4f:/test# exiftool -n IMG_8437.HEIC.jpg | grep ation\nFile Modification Date/Time     : 2022:09:18 08:16:28+00:00\nOrientation                     : 6\nExposure Compensation           : 0\nroot@1ad9fb887a4f:/test# exiftool -n IMG_8437.HEIC | grep ation\nFile Modification Date/Time     : 2022:09:17 16:57:40+00:00\nOrientation                     : 6\nExposure Compensation           : 0\nHEVC Configuration Version      : 1\nMin Spatial Segmentation IDC    : 0\nRotation                        : 270\n</code></pre> <p>Rotation and Orientation are the important values you should pay attention to and compare. The rotation is in degrees.</p>","title":"Using Exiftool"},{"location":"developer-guide/metadata/orientation/#exiftool-parameters","text":"<ul> <li><code>-n</code> displays the raw values without changes</li> <li><code>-j</code> will format the output as JSON</li> <li><code>-g</code> groups the output by metadata source</li> </ul>","title":"Exiftool Parameters"},{"location":"developer-guide/metadata/orientation/#exif-values","text":"<p>The Exif orientation values are numbered from 1 to 8:</p> <ol> <li>= 0 degrees: the correct orientation, no adjustment is required.</li> <li>= 0 degrees, mirrored: image has been flipped back-to-front.</li> <li>= 180 degrees: image is upside down.</li> <li>= 180 degrees, mirrored: image has been flipped back-to-front and is upside down.</li> <li>= 90 degrees: image has been flipped back-to-front and is on its side.</li> <li>= 90 degrees, mirrored: image is on its side.</li> <li>= 270 degrees: image has been flipped back-to-front and is on its far side.</li> <li>= 270 degrees, mirrored: image is on its far side.</li> </ol> <p>See also sirv.com/help/articles/rotate-photos-to-be-upright/.</p>","title":"Exif Values"},{"location":"developer-guide/metadata/xmp/","text":"<p>XMP (Extensible Metadata Platform) is the standard sidecar file format supported by Adobe Lightroom. While YAML files might be easier to understand, read and edit for humans, using the XML-based XMP format simplifies importing metadata from Lightroom and we can leverage a documented standard. Ideally, data can be kept in sync continuously between PhotoPrism and other photo management applications.</p> <p>A proof-of-concept for reading <code>Title</code>, <code>Copyright</code>, <code>Artist</code> and <code>Description</code> is implemented but full support is a lot more work, contributions welcome. One issue is proper XML parsing in Go as basic types like date and time are not supported by <code>xml.Unmarshaler</code>. GPS coordinates are not stored as float but as a string like <code>52,27.5814N</code>.</p> <p>The original plan to build upon <code>go-xmp</code> didn't work out as we couldn't read many fields, so we're using pure Go for now until we find a way to get the data we need with <code>go-xmp</code>. It might be a bug and/or it's an issue with our specific XMP files.</p>","title":"Adobe XMP"},{"location":"developer-guide/metadata/xmp/#file-samples","text":"<p>We would be happy to receive more XMP files for testing, either via pull request or email.</p>","title":"File Samples"},{"location":"developer-guide/metadata/xmp/#specification","text":"<ul> <li>Part 1: Data and Serialization Model</li> <li>Part 2: Standard Schemas</li> <li>Part 3: Storage in Files </li> <li>Adobe XMP Programmers Guide</li> <li>Adobe XMP Files Plugin SDK</li> <li>Adobe BSD 3-Clause License and XMP Toolkit SDK</li> </ul>","title":"Specification"},{"location":"developer-guide/metadata/xmp/#open-issues","text":"<ul> <li>Experiment with Adobe Lightroom to see how it uses sidecar files. The new version doesn't seem to use XMP to automatically sync metadata anymore, probably because Adobe focuses on cloud storage. Needs further investigation.</li> <li>Create a matrix showing what fields are used/supported by which application/tool (Photoshop, Lightroom, Darktable and others, see</li> <li>Read http://www.exiv2.org/tags-xmp-crs.html (Camera Raw Schema)</li> </ul>","title":"Open Issues"},{"location":"developer-guide/metadata/xmp/#released-features","text":"<ul> <li>Store metadata in the filesystem #4</li> <li>Compare the quality and XMP compatibility of different RAW converters #65</li> </ul>","title":"Released Features"},{"location":"developer-guide/metadata/xmp/#external-resources","text":"<ul> <li>trimmer-io/go-xmp - A native Go SDK for the Extensible Metadata Platform (XMP)</li> <li>XMP code in GIMP - Nothing beyond some comments. It was a code drop, we needed the feature, but unfortunately the original contributor left.</li> </ul>","title":"External Resources"},{"location":"developer-guide/metadata/exif/","text":"<p>PhotoPrism uses the dsoprea/go-exif package to natively extract EXIF information from images. Exiftool support can be optionally enabled to support a wider range of metadata formats and extraction from video files.</p> <ul> <li>see internal/meta/exif.go for which tags are integrated into PhotoPrism </li> <li>see official EXIF specification for more information about EXIF tags</li> </ul>","title":"Extraction"},{"location":"developer-guide/metadata/exif/#using-exiftool","text":"<p>Assuming you have Docker installed and want to run <code>exiftool</code> with Debian 12 \"Bookworm\", you can simply run this command to open a terminal:</p> <pre><code>docker run --rm -v ${PWD}:/test -w /test -ti debian:bookworm bash\n</code></pre> <p>This will mount the current working directory as <code>/test</code>. Of course, you can also specify a full path instead of <code>${PWD}</code>.</p> <p>The available Ubuntu, Debian and PhotoPrism images can be found on Docker Hub:</p> <ul> <li>https://hub.docker.com/_/ubuntu</li> <li>https://hub.docker.com/_/debian</li> <li>https://hub.docker.com/r/photoprism/photoprism/tags</li> </ul> <p>Now install <code>exiftool</code> and any other packages you need, e.g. <code>libheif-examples</code> to convert HEIF images to JPEG, via <code>apt</code>:</p> <pre><code>apt update\napt install -y exiftool libheif-examples\n</code></pre> <p>To view the image metadata, run <code>exiftool -n &lt;filename&gt;</code>:</p> <pre><code>root@1ad9fb887a4f:/test# exiftool -n IMG_8437.HEIC.jpg | grep ation\nFile Modification Date/Time     : 2022:09:18 08:16:28+00:00\nOrientation                     : 6\nExposure Compensation           : 0\nroot@1ad9fb887a4f:/test# exiftool -n IMG_8437.HEIC | grep ation\nFile Modification Date/Time     : 2022:09:17 16:57:40+00:00\nOrientation                     : 6\nExposure Compensation           : 0\nHEVC Configuration Version      : 1\nMin Spatial Segmentation IDC    : 0\nRotation                        : 270\n</code></pre>","title":"Using Exiftool"},{"location":"developer-guide/metadata/exif/#exiftool-parameters","text":"<ul> <li><code>-n</code> displays the raw values without changes</li> <li><code>-j</code> will format the output as JSON</li> <li><code>-g</code> groups the output by metadata source</li> </ul>","title":"Exiftool Parameters"},{"location":"developer-guide/metadata/exif/#screenshots","text":"<p>This is how other apps show metadata:</p> <p></p> <p></p> <p></p>","title":"Screenshots"},{"location":"developer-guide/metadata/exif/edit/","text":"<p>Exiftool --&gt; https://exiftool.org/</p> <p>Installation possible via brew or from homepage.</p> <p>Exif-Read-Tool: dsoprea/go-exif</p>","title":"Editing"},{"location":"developer-guide/metadata/exif/edit/#show-exif-data-for-debugging","text":"","title":"Show exif data for debugging"},{"location":"developer-guide/metadata/exif/edit/#show-exif-data-read-from-exiftool","text":"<p><code>exiftool -j photo.jpg</code></p>","title":"Show exif data read from exiftool"},{"location":"developer-guide/metadata/exif/edit/#show-exif-data-read-from-exif-read-tool","text":"<p><code>exif-read-tool -f photo.jpg</code></p>","title":"Show exif data read from exif-read-tool"},{"location":"developer-guide/metadata/exif/edit/#edit-exif-data-for-testing","text":"","title":"Edit EXIF data for testing"},{"location":"developer-guide/metadata/exif/edit/#set-createdate","text":"<p><code>exiftool -CreateDate=\"1919:05:04 05:59:26+02:00\" dog_toshi_yellow.jpg</code></p>","title":"Set CreateDate"},{"location":"developer-guide/metadata/exif/edit/#remove-all-gps-data","text":"<p><code>exiftool -GPS:all= file.jpg</code></p>","title":"Remove all GPS data"},{"location":"developer-guide/metadata/exif/edit/#remove-all-exif-data","text":"<p><code>exiftool -all= foo.jpg</code></p> <p>Further examples can be found here: https://exiftool.org/examples.html</p>","title":"Remove all exif data"},{"location":"developer-guide/security/","text":"","title":"Security Testing Guide"},{"location":"developer-guide/security/#vulnerability-scanners","text":"<p></p> <p>Nuclei is a fast and customizable vulnerability scanner based on a simple YAML-based DSL. It uses community curated templates to find vulnerabilities in applications.</p> <p>On a Mac, you can install it via Homebrew by running the following command:</p> <pre><code>brew install nuclei\n</code></pre>","title":"Vulnerability Scanners"},{"location":"developer-guide/security/#web-security-checklist","text":"<p></p> <p>The following OWASP\u00ae Web Application Security Checklist is also available as PDF or Docx for printing:</p>","title":"Web Security Checklist"},{"location":"developer-guide/security/#information-gathering","text":"<ul> <li> Manually explore the site</li> <li> Spider/crawl for missed or hidden content</li> <li> Check for files that expose content, such as robots.txt, sitemap.xml, .DS_Store</li> <li> Check the caches of major search engines for publicly accessible sites</li> <li> Check for differences in content based on User Agent (eg, Mobile sites, access as a Search engine Crawler)</li> <li> Perform Web Application Fingerprinting</li> <li> Identify technologies used</li> <li> Identify user roles</li> <li> Identify application entry points</li> <li> Identify client-side code</li> <li> Identify multiple versions/channels (e.g. web, mobile web, mobile app, web services)</li> <li> Identify co-hosted and related applications</li> <li> Identify all hostnames and ports</li> <li> Identify third-party hosted content</li> </ul>","title":"Information Gathering"},{"location":"developer-guide/security/#configuration-management","text":"<ul> <li> Check for commonly used application and administrative URLs</li> <li> Check for old, backup and unreferenced files</li> <li> Check HTTP methods supported and Cross Site Tracing (XST)</li> <li> Test file extensions handling</li> <li> Test for security HTTP headers (e.g. CSP, X-Frame-Options, HSTS)</li> <li> Test for policies (e.g. Flash, Silverlight, robots)</li> <li> Test for non-production data in live environment, and vice-versa</li> <li> Check for sensitive data in client-side code (e.g. API keys, credentials)</li> </ul>","title":"Configuration Management"},{"location":"developer-guide/security/#secure-transmission","text":"<ul> <li> Check SSL Version, Algorithms, Key length</li> <li> Check for Digital Certificate Validity (Duration, Signature and CN)</li> <li> Check credentials only delivered over HTTPS</li> <li> Check that the login form is delivered over HTTPS</li> <li> Check session tokens only delivered over HTTPS</li> <li> Check if HTTP Strict Transport Security (HSTS) in use</li> </ul>","title":"Secure Transmission"},{"location":"developer-guide/security/#authentication","text":"<ul> <li> Test for user enumeration</li> <li> Test for authentication bypass</li> <li> Test for bruteforce protection</li> <li> Test password quality rules</li> <li> Test remember me functionality</li> <li> Test for autocomplete on password forms/input</li> <li> Test password reset and/or recovery</li> <li> Test password change process</li> <li> Test CAPTCHA</li> <li> Test multi factor authentication</li> <li> Test for logout functionality presence</li> <li> Test for cache management on HTTP (eg Pragma, Expires, Max-age)</li> <li> Test for default logins</li> <li> Test for user-accessible authentication history</li> <li> Test for out-of channel notification of account lockouts and successful password changes</li> <li> Test for consistent authentication across applications with shared authentication schema / SSO</li> </ul>","title":"Authentication"},{"location":"developer-guide/security/#session-management","text":"<ul> <li> Establish how session management is handled in the application (eg, tokens in cookies, token in URL)</li> <li> Check session tokens for cookie flags (httpOnly and secure)</li> <li> Check session cookie scope (path and domain)</li> <li> Check session cookie duration (expires and max-age)</li> <li> Check session termination after a maximum lifetime</li> <li> Check session termination after relative timeout</li> <li> Check session termination after logout</li> <li> Test to see if users can have multiple simultaneous sessions</li> <li> Test session cookies for randomness</li> <li> Confirm that new session tokens are issued on login, role change and logout</li> <li> Test for consistent session management across applications with shared session management</li> <li> Test for session puzzling</li> <li> Test for CSRF and clickjacking</li> </ul>","title":"Session Management"},{"location":"developer-guide/security/#authorization","text":"<ul> <li> Test for path traversal</li> <li> Test for bypassing authorization schema</li> <li> Test for vertical Access control problems (a.k.a. Privilege Escalation)</li> <li> Test for horizontal Access control problems (between two users at the same privilege level)</li> <li> Test for missing authorization</li> </ul>","title":"Authorization"},{"location":"developer-guide/security/#data-validation","text":"<ul> <li> Test for Reflected Cross Site Scripting</li> <li> Test for Stored Cross Site Scripting</li> <li> Test for DOM based Cross Site Scripting</li> <li> Test for Cross Site Flashing</li> <li> Test for HTML Injection</li> <li> Test for SQL Injection</li> <li> Test for LDAP Injection</li> <li> Test for ORM Injection</li> <li> Test for XML Injection</li> <li> Test for XXE Injection</li> <li> Test for SSI Injection</li> <li> Test for XPath Injection</li> <li> Test for XQuery Injection</li> <li> Test for IMAP/SMTP Injection</li> <li> Test for Code Injection</li> <li> Test for Expression Language Injection</li> <li> Test for Command Injection</li> <li> Test for Overflow (Stack, Heap and Integer)</li> <li> Test for Format String</li> <li> Test for incubated vulnerabilities</li> <li> Test for HTTP Splitting/Smuggling</li> <li> Test for HTTP Verb Tampering</li> <li> Test for Open Redirection</li> <li> Test for Local File Inclusion</li> <li> Test for Remote File Inclusion</li> <li> Compare client-side and server-side validation rules</li> <li> Test for NoSQL injection</li> <li> Test for HTTP parameter pollution</li> <li> Test for auto-binding</li> <li> Test for Mass Assignment</li> <li> Test for NULL/Invalid Session Cookie</li> </ul>","title":"Data Validation"},{"location":"developer-guide/security/#denial-of-service","text":"<ul> <li> Test for anti-automation</li> <li> Test for account lockout</li> <li> Test for HTTP protocol DoS</li> <li> Test for SQL wildcard DoS</li> </ul>","title":"Denial of Service"},{"location":"developer-guide/security/#business-logic","text":"<ul> <li> Test for feature misuse</li> <li> Test for lack of non-repudiation</li> <li> Test for trust relationships</li> <li> Test for integrity of data</li> <li> Test segregation of duties</li> </ul>","title":"Business Logic"},{"location":"developer-guide/security/#cryptography","text":"<ul> <li> Check if data which should be encrypted is not</li> <li> Check for wrong algorithms usage depending on context</li> <li> Check for weak algorithms usage</li> <li> Check for proper use of salting</li> <li> Check for randomness functions</li> </ul>","title":"Cryptography"},{"location":"developer-guide/security/#html-5","text":"<ul> <li> Test Web Messaging</li> <li> Test for Web Storage SQL injection</li> <li> Check CORS implementation</li> <li> Check Offline Web Application</li> </ul>","title":"HTML 5"},{"location":"developer-guide/security/#risky-functionality","text":"","title":"Risky Functionality"},{"location":"developer-guide/security/#file-uploads","text":"<ul> <li> Test that acceptable file types are whitelisted</li> <li> Test that file size limits, upload frequency and total file counts are defined and are enforced</li> <li> Test that file contents match the defined file type</li> <li> Test that all file uploads have Anti-Virus scanning in-place.</li> <li> Test that unsafe filenames are sanitised</li> <li> Test that uploaded files are not directly accessible within the web root</li> <li> Test that uploaded files are not served on the same hostname/port</li> <li> Test that files and other media are integrated with the authentication and authorisation schemas</li> </ul>","title":"File Uploads"},{"location":"developer-guide/security/#card-payment","text":"<ul> <li> Test for known vulnerabilities and configuration issues on Web Server and Web Application</li> <li> Test for default or guessable password</li> <li> Test for non-production data in live environment, and vice-versa</li> <li> Test for Injection vulnerabilities</li> <li> Test for Buffer Overflows</li> <li> Test for Insecure Cryptographic Storage</li> <li> Test for Insufficient Transport Layer Protection</li> <li> Test for Improper Error Handling</li> <li> Test for all vulnerabilities with a CVSS v2 score &gt; 4.0</li> <li> Test for Authentication and Authorization issues</li> <li> Test for CSRF</li> </ul> <p>Source: 0xRadi/OWASP-Web-Checklist</p>","title":"Card Payment"},{"location":"developer-guide/security/#openssf-security-criteria","text":"<p>The Open Source Security Foundation maintains standardized security criteria and best practices for open-source projects:</p> <p></p>","title":"OpenSSF Security Criteria"},{"location":"developer-guide/security/go/","text":"<p></p> <p>The Go Language: Web Application Secure Coding Practices is a book written for anyone who is using the Go Programming Language and aims to use it for Web development.</p> <p>You can download it in the following formats:</p> <ul> <li>PDF</li> <li>Mobi</li> <li>and ePub</li> </ul> <p>This book is collaborative effort of Checkmarx Security Research Team and it follows the OWASP Secure Coding Practices - Quick Reference Guide v2 (stable) release.</p> <p>Source: OWASP/Go-SCP</p>","title":"Secure Coding in Go"},{"location":"developer-guide/security/policy/","text":"<p>Visit photoprism.app/security-policy to learn more about our security policy, responsible disclosure, and how you can report issues as a business or organization.</p>","title":"Vulnerability Disclosure Guidelines"},{"location":"developer-guide/technologies/broadway/","text":"<p>Broadway is a display server for using GTK+ applications in a web browser like Chrome or Firefox. It is based on HTML5 and WebSockets. GTK (originally GIMP Toolkit) is a GUI toolkit used by many Linux desktop applications like Darktable, Gimp and RawTherapee. Obviously this technology is ideal for editing images in the browser, at least when the connection is fast enough.</p>","title":"Broadway"},{"location":"developer-guide/technologies/broadway/#docker-configuration","text":"<pre><code># Configure broadwayd (HTML5 display server)\nRUN apt-get update &amp;&amp; apt-get install libgtk-3-bin\nENV GDK_BACKEND broadway\nENV BROADWAY_DISPLAY :5\nEXPOSE 8080\nCMD broadwayd -p 8080 -a 0.0.0.0 :5\n</code></pre> <p>When this is configured, all you need to do is open http://localhost:8080 in a browser and start any GTK application in the same container (broadwayd must be running). It should be displayed instantly, otherwise the screen is white, but you shouldn't see an error.</p>","title":"Docker Configuration"},{"location":"developer-guide/technologies/broadway/#screenshot","text":"<p></p>","title":"Screenshot"},{"location":"developer-guide/technologies/docker/","text":"<p>Docker is an Open Source container virtualization tool. It is ideal for running  applications on any computer without extensive installation, configuration, or performance overhead.</p> <p>We are aware Docker is not widely used by end users despite its many advantages. For this reason, we aim  to provide native binaries for common operating systems at a later time.</p>","title":"Docker"},{"location":"developer-guide/technologies/docker/#why-are-we-using-docker","text":"<p>Containers are nothing new; Solaris Zones have been around for about 15 years, first released publicly in 2004. The chroot system call was introduced during development of Version 7 Unix in 1979. It is used ever since for hosting applications exposed to the public Internet.</p> <p>Modern Linux containers are an incremental enhancement. A main advantage of Docker is that application images can be easily made available to users via Internet. It provides a common standard across most operating systems and devices, which saves our team a lot of time that we can then spend more effectively, for example, providing support and developing one of the many features that users are waiting for.</p> <p>Human-readable and versioned Dockerfiles as part of our public source code also help avoid \"works for me\" moments and other unwelcome surprises by enabling teams to have the exact same environment everywhere in development, staging, and production.</p> <p>Last but not least, virtually all file format parsers have vulnerabilities that just haven't been discovered yet. This is a known risk that can affect you even if your computer is not directly connected to the Internet. Running apps in a container with limited host access is an easy way to improve security without compromising performance and usability.</p>","title":"Why are we using Docker?"},{"location":"developer-guide/technologies/docker/#running-docker-images","text":"<p>Assuming you have Docker installed and want to test Debian 12 \"Bookworm\", you can simply run this command to open a terminal:</p> <pre><code>docker run --rm -v ${PWD}:/test -w /test -ti debian:bookworm bash\n</code></pre> <p>This will mount the current working directory as <code>/test</code>. Of course, you can also specify a full path instead of <code>${PWD}</code>.</p> <p>The available Ubuntu, Debian and PhotoPrism images can be found on Docker Hub:</p> <ul> <li>https://hub.docker.com/_/ubuntu</li> <li>https://hub.docker.com/_/debian</li> <li>https://hub.docker.com/r/photoprism/photoprism/tags</li> </ul> <p>Additional packages can be installed via <code>apt</code>:</p> <pre><code>apt update\napt install -y exiftool libheif-examples\n</code></pre>","title":"Running Docker Images"},{"location":"developer-guide/technologies/docker/#continuous-integration-deployment","text":"<p>Build and push of an updated container image to Docker Hub is automatically performed by Travis CI whenever develop is merged into master and the tests are all green. For that reason, we don't use semantic versioning for our binaries and container images. A version string might look like <code>181112-edc7c2f-Darwin-i386-DEBUG</code> instead. Travis CI uses the photoprism/development image for running unit and integration tests on all branches and for pull requests, see Dockerfile.</p>","title":"Continuous Integration / Deployment"},{"location":"developer-guide/technologies/docker/#multi-stage-build","text":"<p>When creating new images, Docker supports so called multi-stage builds, that means you can compile an application like PhotoPrism in a container that contains all development dependencies (like source code, debugger, compiler,...) and later copy the binary to a fresh container. This way we could reduce the compressed container size from ~1 GB to less than 200 MB. Most of that is used by Darktable, TensorFlow and Ubuntu 18.04. Our <code>photoprism</code> binary is smaller than 20 MB.</p> <p>Example:</p> <pre><code>FROM photoprism/development:20181112 as build\n\n# Build PhotoPrism\nWORKDIR \"/go/src/github.com/photoprism/photoprism\"\nCOPY . .\nRUN make all install DESTDIR=/opt/photoprism\n\n# Base base image as photoprism/development\nFROM ubuntu:18.04\n\nWORKDIR /srv/photoprism\n\n# Copy built binaries and assets to this image\nCOPY --from=build /usr/local/bin/photoprism /usr/local/bin/photoprism\nCOPY --from=build /srv/photoprism /srv/photoprism\n\n# Expose HTTP port\nEXPOSE 80\n\n# Start PhotoPrism server\nCMD photoprism start\n</code></pre>","title":"Multi-Stage Build"},{"location":"developer-guide/technologies/docker/#kubernetes","text":"<ul> <li>https://forge.sh/ - Define and deploy multi-container apps in Kubernetes, from source</li> <li>https://www.telepresence.io/ - a local development environment for a remote Kubernetes cluster</li> </ul>","title":"Kubernetes"},{"location":"developer-guide/technologies/docker/#external-resources","text":"<ul> <li>estesp/manifest-tool</li> <li>docker/app</li> <li>moby/moby</li> <li>https://hub.docker.com/r/multiarch/qemu-user-static/ - quemu for building multiarch images with Docker</li> <li>https://github.com/opencontainers/image-spec - standard labels for Docker image metadata</li> <li>Yelp/dumb-init - A minimal init system for Linux containers</li> </ul>","title":"External Resources"},{"location":"developer-guide/technologies/external-apis/","text":"","title":"External APIs"},{"location":"developer-guide/technologies/external-apis/#photo-sharing","text":"<ul> <li>Instagram Developer API </li> <li>Twitter API</li> <li>Facebook Photo API</li> <li>Google Photos API</li> <li>EyeEm API</li> <li>Nextcloud API</li> </ul>","title":"Photo Sharing"},{"location":"developer-guide/technologies/external-apis/#books-prints","text":"<ul> <li>Cewe Stiftung &amp; Co. KGaA - Europe's leading online printing experts</li> </ul>","title":"Books / Prints"},{"location":"developer-guide/technologies/external-apis/#tools","text":"<ul> <li>KrakenD - API Gateway that sits between clients and services to offer tailored endpoints</li> <li>Photobak - Back up your content from Google Photos</li> </ul>","title":"Tools"},{"location":"developer-guide/technologies/golang/","text":"<p>We have chosen Go because of its simplicity and performance. On top, it enables us to build a single binary for distribution.</p>","title":"Golang"},{"location":"developer-guide/technologies/golang/#learning","text":"<ul> <li>https://golang.org/doc/code.html - how to write Go code</li> <li>https://golang.org/doc/effective_go.html -  gives tips for writing clear, idiomatic Go code</li> <li>https://golangbridge.org/ - Go workshops for underrepresented communities</li> <li>https://www.sohamkamani.com/blog/golang/2018-06-20-golang-factory-patterns/ - there are many different ways in which you can use the factory pattern to make your code cleaner and more concise</li> <li>https://www.alexedwards.net/blog/form-validation-and-processing - Form Validation and Processing in Go</li> </ul>","title":"Learning"},{"location":"developer-guide/technologies/golang/#testing","text":"<ul> <li>https://medium.com/@povilasve/go-advanced-tips-tricks-a872503ac859 - Go advanced testing tips &amp; tricks</li> <li>Golang version of Pact - contract testing framework for HTTP APIs and non-HTTP asynchronous messaging systems</li> <li>Integration Tests in Go - blog post </li> <li>Parallelize your table-driven tests - blog post</li> </ul>","title":"Testing"},{"location":"developer-guide/technologies/golang/#useful-libraries-and-frameworks","text":"<ul> <li>spf13/afero - a filesystem abstraction library</li> <li>gin-gonic/gin - HTTP web framework</li> <li>gobuffalo/pop - a database abstraction layer</li> <li>jinzhu/gorm - another database abstraction layer</li> <li>appleboy/gorush - a push notification micro server for Gin</li> <li>cavaliercoder/grab - a download manager package</li> <li>russross/blackfriday - a library for rendering Markdown</li> <li>sirupsen/logrus - structured, pluggable logging for Go</li> <li>alecthomas/participle - a dead simple parser package for Go</li> <li>tidwall/tile38 - a geospatial database and realtime geofencing server</li> <li>melihmucuk/geocache - an in-memory cache that is suitable for geolocation based applications</li> <li>aaronland/go-slippy-tiles - a proxy for map tiles</li> <li>paulmach/osm - a general purpose library for reading, writing and working with OpenStreetMap data</li> <li>@minio - Object Storage for AI</li> <li>http://www.gorillatoolkit.org/pkg/schema - fills a struct with form values</li> </ul>","title":"Useful libraries and frameworks"},{"location":"developer-guide/technologies/golang/#jobs","text":"<ul> <li>SoundCloud is looking for backend developers (Berlin, permanent, full-time)</li> </ul>","title":"Jobs"},{"location":"developer-guide/technologies/tensorflow/","text":"","title":"TensorFlow"},{"location":"developer-guide/technologies/tensorflow/#using-tensorflow-with-go","text":"<p>For an introduction please read Understanding Tensorflow using Go.</p> <p>The TensorFlow API for Go is well suited to loading existing models and executing them within a Go application. It requires the TensorFlow C library to be installed. A full TensorFlow installation is not needed.</p> <p>It is not possible to statically link against the C library, but the issue is known and there might be a fix later this year.</p>","title":"Using TensorFlow with Go"},{"location":"developer-guide/technologies/tensorflow/#vision","text":"<p>Our long-term goal is to become an open platform for machine learning research based on real-world photo collections.</p>","title":"Vision"},{"location":"developer-guide/technologies/tensorflow/#external-resources","text":"<ul> <li>https://tfhub.dev/ - TensorFlow Hub is a library for reusable machine learning modules</li> <li>https://www.tensorflow.org/install/lang_c - TensorFlow for C</li> <li>http://www.asimovinstitute.org/neural-network-zoo/ - types of neural networks explained</li> <li>http://playground.tensorflow.org/ - Experiment with neural networks in your browser</li> <li>http://jupyter.org/ - open-source web application for creating and sharing documents that contain live code</li> <li>https://developers.google.com/machine-learning/crash-course/ - Machine Learning Crash Course with TensorFlow APIs</li> <li>https://medium.com/implodinggradients/tensorflow-or-keras-which-one-should-i-learn-5dd7fa3f9ca0</li> <li>https://medium.com/analytics-vidhya/deploy-your-first-deep-learning-model-on-kubernetes-with-python-keras-flask-and-docker-575dc07d9e76 - Deploy Your First Deep Learning Model On Kubernetes With Python, Keras, Flask, and Docker</li> <li>https://medium.com/mlreview/getting-inception-architectures-to-work-with-style-transfer-767d53475bf8 - Getting Inception Architectures to Work with Style Transfer</li> <li>jdeng/goface - Face Detector based on MTCNN, tensorflow and golang</li> <li>https://www.tensorflow.org/tutorials/representation/word2vec - Vector Representations of Words (for searching/tagging)</li> <li>chtorr/go-tensorflow-realtime-object-detection - Real-time object detection with Go, Tensorflow, and OpenCV</li> <li>https://ai.googleblog.com/2018/07/accelerated-training-and-inference-with.html - Accelerated Training and Inference with the Tensorflow Object Detection API</li> <li>NanoNets/object-detection-sample-golang - NanoNets Object Detection API Example for Golang</li> <li>https://hub.packtpub.com/object-detection-go-tensorflow/ - Implementing Object detection with Go using TensorFlow</li> </ul>","title":"External Resources"},{"location":"developer-guide/technologies/yaml/","text":"<p>YAML is a human-friendly format that we use for metadata exports and configuration files because of its simplicity and widespread support. The name originally meant Yet Another Markup Language. Common file extensions are <code>.yml</code>and <code>.yaml</code>.</p> <p>Values are represented in the form <code>key: value</code> with one entry per line:</p> <pre><code>Type: image\nTitle: \"La Tour Eiffel \ud83c\udf08\"\nYear: 2014\n# Key-Value Collection Example:\nDetails:\n  Notes: \"Bonjour\\nla France!\" \n  Keywords: 'paris, france' # Comment\n</code></pre>","title":"Introduction to YAML"},{"location":"developer-guide/technologies/yaml/#basic-rules","text":"<ul> <li>Keys are case-sensitive</li> <li>Related values start at the same indentation level<ul> <li>Tabs are not allowed for indentation</li> <li>We recommend using 2 spaces, but any number will work as long as it is consistent</li> </ul> </li> <li>You can generally use all Unicode characters and Emojis<ul> <li>To avoid ambiguity, it is recommended to enclose text strings in single <code>'</code> or double quotes <code>\"</code>, especially if they contain a colon <code>:</code></li> <li>The difference between single and double quotes is that double quotes support escape sequences like <code>\\t</code> for a tab or <code>\\n</code> for a new line</li> </ul> </li> <li>Comments begin with the <code>#</code> sign, can start anywhere on a line, and continue until the end of the line</li> </ul>","title":"Basic Rules"},{"location":"developer-guide/technologies/yaml/#multiple-values","text":"<p>List are lines that start at the same indentation level and begin with a dash and a space as shown in the example below. They are commonly used to define service dependencies, exposed network ports, or folders shared between host and container in <code>docker-compose.yml</code> files:</p> <pre><code>services:\n  photoprism:\n    depends_on:\n      - mariadb\n      - nextcloud\n    ports:\n      # \"host:container\"\n      - \"2342:2342\"\n    volumes:\n      # \"/host/folder:/container/folder\"\n      - \"/photos:/photoprism/originals\"\n</code></pre>","title":"Multiple Values"},{"location":"developer-guide/technologies/yaml/#key-value-collections","text":"<p>Collections of key-value pairs are commonly used for photo metadata details as shown in the first example and to define environment variables in <code>docker-compose.yml</code> files:</p> <pre><code>services:\n  mariadb:\n    environment:\n      MARIADB_AUTO_UPGRADE: \"1\"\n      MARIADB_INITDB_SKIP_TZINFO: \"1\"\n      MARIADB_ROOT_PASSWORD: \"Y(&amp;^UIk34\"\n      MARIADB_DATABASE: photoprism\n      MARIADB_USER: photoprism\n      MARIADB_PASSWORD: insecure\n</code></pre>","title":"Key-Value Collections"},{"location":"developer-guide/ui/browsers/","text":"<p>We should at least support the latest Firefox and Chrome on Linux, OS X and Windows. Ideally also Safari (OS X) and Explorer/Edge (Windows). </p>","title":"Browsers"},{"location":"developer-guide/ui/browsers/#testing","text":"<ul> <li>BrowserStack is free for open-source projects</li> </ul>","title":"Testing"},{"location":"developer-guide/ui/components/","text":"<p>Our frontend code is structured into reusable VueJS components. So far, it was clear enough for developers to add features and send pull requests, so it's probably not necessary to document individual components in our Developer Guide. Let us know via email or chat when you have any questions!</p> <p>Frontend contains general information about the front-end libraries we use and how to trigger a build.</p>","title":"Components"},{"location":"developer-guide/ui/design/","text":"<p>We strive to build an application that embraces simplicity and avoids unexpected behavior. It must be able to run on a wide range of devices. Its user interface must be easy to use for everyone.</p>  <p>Design is a funny word. Some people think design means how it looks. But of course, if you dig deeper, it's really how it works.\u2014 Steve Jobs</p> <p>Choice is the enemy of productivity. Put another way, if your solution does everything, and has no opinions about anything, then it solves nothing.\u2014 Asim Aslam</p> <p>Any fool can make something complicated. It takes a genius to make it simple.\u2014 Woody Guthrie</p>","title":"Design"},{"location":"developer-guide/ui/design/#icons","text":"<p>Since Vuetify is based on Material Design, we stick with the following icons and only use other icons when absolutely necessary (e.g. for sharing):</p> <p>https://material.io/resources/icons/</p>","title":"Icons"},{"location":"developer-guide/ui/design/#colors","text":"<p>Our UI themes should all contain a color spectrum so that they look like a prism:</p> <ul> <li>https://www.nordtheme.com/#palettes-modularity</li> <li>https://www.schemecolor.com/?s=colorful</li> <li>https://www.schemecolor.com/?s=google</li> <li>https://www.schemecolor.com/memories-of-the-garden.php</li> <li>https://www.schemecolor.com/double-disclosure.php</li> <li>https://www.schemecolor.com/true-lovers-color-scheme.php</li> <li>https://www.schemecolor.com/sunset-painting.php</li> <li>https://www.schemecolor.com/happy-with-self.php</li> </ul> <p>It's easiest to use the context menu for this:</p> <p></p>","title":"Colors"},{"location":"developer-guide/ui/design/#external-resources","text":"<ul> <li>Screenshots - development of our user interface in time lapse \u23f1</li> <li>The 7 pillars of design - slides by Raffaella Isidori (Codemotion Berlin 2018)</li> <li>A fork + fixes for Google's Material Design icons</li> </ul>","title":"External Resources"},{"location":"developer-guide/ui/infinite-scrolling/","text":"<p>There are two problems to solve when allowing the user to scroll through an \"infinite\" number of elements/photos:</p> <ol> <li>You can't load an infinite amount of data.</li> <li>You can't render an infinite amount of elements.</li> </ol> <p>The solution to both is to not provide an infinite amount of elements, but instead create the illusion of an infinite amount of elements by only loading and displaying what the user would actually currently be able to see.</p>","title":"Infinite Scrolling"},{"location":"developer-guide/ui/infinite-scrolling/#loading-data-progressively","text":"<p>The problem of infinite data is solved by loading the actually required elements progressively, in fixed amounts (batches).</p> <ul> <li>Load a batch of elements. If they don't fill the screen, load the next batch. repeat until the screen is filled.</li> <li>When the user is getting close to the end of the currently loaded elements, load the next batch of data.</li> </ul> <p>In an ideal world the \"next batch\" is always loaded fast and early enough so that the user doesn't even notice that it wasn't there from the beginning. This creates the illusion of having an infinite amount of data available. There are two parameters to consider:</p> <ol> <li>When to start loading the next batch?<ul> <li>loading to early results in to much unnecessary data getting laoded.</li> <li>loading to late results in the user bumping into the end of the list of elements, because the next batch hasn't finished loading yet.</li> </ul> </li> <li>How large are the batches?<ul> <li>to small batches can slow down the overall loading time by resulting in overhad because of too many requests.</li> <li>to large batches need to long to load for a single batch, so that the data may not yet be ready when it is needed.</li> </ul> </li> </ol> <p>The best values for these parameters vary vastly depending on the current network speed, number of elements that fit on the screen and the speed the user is scrolling. Luckily these values don't need to be perfect, just good enough.</p> <p>We currently use vue-infinite-scroll to detect when the user is about to reacht the end of the currently loaded list, so we can load the next batch. The batchsize depends on the current view and is currently somewhere in the range of 50 - 300 elements.</p>","title":"Loading Data - Progressively"},{"location":"developer-guide/ui/infinite-scrolling/#rendering-elements-virtualized","text":"<p>The further a user scrolls, the more batches of elements get loaded and displayed. The more elements get displayed, the slower the browser gets and the more memory it needs. This means, if we were to just render all loaded elements, the limit how far you can scroll would be entirely determined by the available cpu and memory of the client.</p>","title":"Rendering elements - Virtualized"},{"location":"developer-guide/ui/infinite-scrolling/#regular-virtualization","text":"<p>This problem is usually solved by virtualization:</p> <ol> <li>determine the scrollposition and screensize of the client.</li> <li>calculate what elements would be on the screen.</li> <li>render only those elements.</li> </ol> <p>The problem with this regular virtualization is that it requires the elements to be positioned absolutely and may prescribe how they are structured. Implementing it would therefore imply a potentialy larger rewrite and less freedom when designing the elements.</p>","title":"Regular virtualization"},{"location":"developer-guide/ui/infinite-scrolling/#pseudo-virtualization-with-placeholders","text":"<p>Using the IntersectionObserver API we can efficiently determine wether something is currently visible or not. We can use this information to replace all elements that are currently not in the visible area with simple placeholders of the same size. This drastically reduces the load on the browser, because these (often single-domnode) placeholder-elements require a LOT less ressources.</p> <p>This has the huge benefit that it doesn't restrict how components are structured or positioned, while also being easier to implement. There are however two caveats:</p> <ol> <li>We are still rendering something for every single loaded elements<ul> <li>The load on the browser therefore technically still increases (slightly) the more elements are loaded</li> <li>This however reduces the load so much, that this slight increase per element barely matters at all</li> </ul> </li> <li>The placeholders size should be as close to the originals size as possible.<ul> <li>If the sizes don't match, scrolling might become a little janky.</li> </ul> </li> </ol> <p>This type of virtualization more than fast enough, and because we think the benefits outweigh the downsides, we decided go this route.</p>","title":"Pseudo-Virtualization with placeholders"},{"location":"developer-guide/ui/infinite-scrolling/#implementation-details","text":"<p>The setup for a component that uses the placeholder-virtualization is as follows:</p> <ol> <li>Add a ref to all the elements whose visibilty needs to be tracked</li> <li>create a single <code>IntersectionObserver</code> in the <code>beforeCreate</code> that calls a (yet to be defined) <code>this.visibilitiesChanged</code></li> <li>add a watcher that is called when the list of elements changes. call observe on all refs from step 1</li> <li>define a function that takes an IntersectionObserverEntry and returns the index of the corresponding target (for example by adding a <code>data-index</code>-attribute to the observed element)</li> <li>add <code>firstVisibleElementIndex: 0</code>, <code>lastVisibleElementIndex: 0</code> and <code>visibleElementIndices: new Set()</code> to the components state</li> <li>conditionally render elements whose index is between <code>firstVisibleElementIndex</code> and <code>lastVisibleElementIndex</code>. Render placeholders for all other elements</li> <li>define <code>visibilitiesChanged</code>. Let it call <code>virtualizationTools.updateVisibleElementIndices</code>. Use the result as new <code>this.firstVisibleElementIndex</code> and <code>this.lastVisibileElementIndex</code></li> </ol> <p>We use the <code>visibleElementIndices</code>-Set to keep track of elements that became visible or invisible. We also use <code>firstVisibleElementIndex</code> and <code>lastVisibleElementIndex</code> for two reasons:</p> <ol> <li>Vue doesn't react to Set-changes (because its identity never changes), so manipulating it doesn't cause a rerender</li> <li>When scrolling very fast, the set may for a very brief moment contain holes (for example it has the indices <code>1, 2, 4, 5, 6</code>). By implying that everything between the smallest and largest index is visible, these short-lived holes don't have any negative effect (index 3 would be rendered anyway)</li> </ol> <p>As a bonus, you can make the IntersectionObserver only observe for example every 5th element to speed up calculation of intersections. If you do so, you should add for Example -4 to <code>firstVisibleElementIndex</code> and +4 to <code>lastVisibleElementIndex</code></p>","title":"Implementation details"},{"location":"developer-guide/ui/infinite-scrolling/#render-performance","text":"<p>When working with a huge amount of elements, render performance of these elements is critically important. The better the render performance, the more it actually feels like scrolling through an infinite list. It allowes the user to scroll faster without having to see placeholders and makes the application feel way snappier, especially on lower-end devices.</p> <p>Here are some tips on how to gain performance. They are ordered from most to least important and only apply to things that are rendered for every element:</p> <ul> <li>Prefer regular HTML-Elements over vue-components<ul> <li>Rendering vue components executes a lot of JavaScript, blocking everything else. Rendering regular HTML elements is way faster</li> <li>Example: use <code>&lt;button&gt;</code> instead of <code>&lt;v-btn&gt;</code></li> </ul> </li> <li>Prefer conditional rendering over hiding/showing elements via css<ul> <li>showing/hiding via css may prevent rerenders, but it increases the amount of rendered elements</li> <li>The less elements (and therefore domnodes) are rendered the better</li> </ul> </li> <li>Use less elements<ul> <li>Why use a <code>&lt;v-card&gt;&lt;v-img&gt;&lt;/v-img&gt;&lt;/v-card&gt;</code> when performance is important and a <code>&lt;div&gt;&lt;/div&gt;</code> with some css works too?</li> </ul> </li> </ul>","title":"Render Performance"},{"location":"developer-guide/ui/infinite-scrolling/#memoization","text":"<p>Memoization is a technique to speed up function calls by caching results. This can have a noticable impact on render-performance, especially when function results are used for placeholders</p> <p>Example: The texts on the cards in the cards-view. There are function-calls like <code>photo.locationInfo()</code> and <code>photo.getDateString()</code>. The resulting values rarely change, but are calculated again and again on every render, resulting in ~280k calls per function when scrolling through ~2k pictures.</p> <p>We use <code>memoize-one</code> for much called, non-trivial functions whose parameters rarely change. The funtions in the Photo model are a prime example for that.</p> <p>For this to work the memoized function must be pure, which means its result must not depend on outside factors, but only on its parameters. Calling the same function twice with the same parameters must always return the same result.</p> <p>If you want to memoize a function that is not pure you can still do so by moving all its logic into a new, memoized, pure function and having the old funtion just call the memoized one, providing the required parameters. Example: <pre><code>// ------------------ before ------------------\nisPlayable() {\n  if (this.Type === MediaAnimated) {\n    return true;\n  } else if (!this.Files) {\n    return false;\n  }\n\n  return this.Files.some((f) =&gt; f.Video);\n}\n</code></pre> <pre><code>// ------------------ after ------------------\nisPlayable() {\n  return this.generateIsPlayable(this.Type, this.Files);\n}\n\ngenerateIsPlayable = memoizeOne((type, files) =&gt; {\n  if (type === MediaAnimated) {\n    return true;\n  } else if (!files) {\n    return false;\n  }\n\n  return files.some((f) =&gt; f.Video);\n})\n</code></pre></p>","title":"Memoization"},{"location":"developer-guide/ui/introduction/","text":"<p>Open a terminal and type <code>photoprism start</code> to start the built-in server. It will listen on localhost:2342 by default, see docker-compose.yml and Configuration.</p>","title":"Introduction"},{"location":"developer-guide/ui/introduction/#frameworks","text":"<p>Vuetify is a powerful open-source Material Design UI component framework for building modern single-page applications.</p> <p>It is based on VueJS, a JavaScript library that combines the best ideas from AngularJS (Google) and React (Facebook); development is community driven and the API fairly stable.</p> <p>Vuetify and VueJS are initialized in frontend/src/app.js. Webpack is used as a module loader / bundler. It creates single, optimized JS and CSS files in the server assets public build directory from the original source code. You can find the build configuration in <code>frontend/webpack.config.js</code>.</p> <p>For our docs and landing pages, we may use https://materializecss.com/ as a lightweight alternative to Vuetify.</p>","title":"Frameworks"},{"location":"developer-guide/ui/introduction/#components","text":"<p>Components are reusable user-interface widgets. UI Components contains a list of custom components. Standard components like buttons or forms are well documented on vuetifyjs.com.</p>","title":"Components"},{"location":"developer-guide/ui/introduction/#dependencies","text":"<p>The full list of dependencies can be found in <code>frontend/package.json</code>. You need to run <code>npm install</code> in the frontend directory to install them (automatically happens during installation, see <code>Makefile</code>). Run <code>npm install -P [package name]</code> to add a new package (library or framework).</p>","title":"Dependencies"},{"location":"developer-guide/ui/introduction/#building","text":"<p>A build can be triggered by running <code>npm run watch</code> (watches for changes and re-builds when needed) or <code>npm run build</code> (single build) in the frontend directory. NPM is the default package manager that comes with NodeJS, a JavaScript run-time environment that executes JavaScript code outside of a browser.</p>","title":"Building"},{"location":"developer-guide/ui/introduction/#external-resources","text":"<ul> <li>https://web.dev/progressive-web-apps/</li> <li>vuejs-templates/pwa - a progressive web app template for VueJS</li> <li>https://hackernoon.com/a-progressive-web-app-in-vue-tutorial-part-1-the-vue-app-f9231b032a0b</li> <li>https://medium.com/the-web-tub/creating-your-first-vue-js-pwa-project-22f7c552fb34</li> <li>https://developers.google.com/web/fundamentals/native-hardware/fullscreen/</li> <li>https://webpack.js.org/configuration/optimization/</li> <li>https://photoswipe.com/documentation/responsive-images.html</li> <li>https://seregpie.github.io/VueWordCloud/ - Word cloud for VueJS</li> <li>snorpey/jpg-glitch - JPEG Glitch lib for JS</li> <li>https://stylable.io/ - scopes styles to components so they don\u2019t \u201cleak\u201d and clash with other styles (not sure if this is of any use for us)</li> <li>Building the Google Photos Web UI - Antin Harasymiv on Medium</li> <li>Progressive Image Grid - arrange images in a responsive, progressive-loading grid managed in JavaScript, see #85</li> </ul>","title":"External Resources"},{"location":"developer-guide/ui/maps/","text":"<p>PhotoPrism includes four high-resolution world maps that allow you to browse photos by location. Visit try.photoprism.app/places to try them on our demo.</p> <p></p> <p>The API keys required to use these maps are unfortunately not free for us due to the number of users we have, see FAQ.</p>","title":"Rendering Interactive Maps in the UI"},{"location":"developer-guide/ui/maps/#mapboxmaplibre-gl-js","text":"<p>Because Mapbox GL JS is no longer open-source, we now sponsor and use MapLibre GL JS for rendering maps in the UI. MapLibre GL is a fork from the last Mapbox GL version available under a permissive BSD license.</p> <p>Statement by former Mapbox engineer Tom MacWright:</p>  <p>OSS, we hoped, was about enabling people and unlocking people\u2019s ability to collaborate. It turns out that in 2020, it\u2019s mostly helping companies and getting nothing in return. That\u2019s not a dynamic you can build a sustainable business on.</p>","title":"Mapbox/MapLibre GL JS"},{"location":"developer-guide/ui/screenshots/","text":"","title":"UI Development in Fast Motion \u23f1"},{"location":"developer-guide/ui/screenshots/#august-15-2018","text":"<p>The first prototype was based on Bootstrap 4.</p> <p></p>","title":"August 15 , 2018"},{"location":"developer-guide/ui/screenshots/#september-6-2018","text":"<p>We switched to the Vuetify component framework, which comes complete with everything modern Web applications need.</p> <p></p>","title":"September 6, 2018"},{"location":"developer-guide/ui/screenshots/#september-7-2018","text":"<p>Navigation was extended.</p> <p></p>","title":"September 7, 2018"},{"location":"developer-guide/ui/screenshots/#september-7-2018_1","text":"<p>We started to experiment with the search form.</p> <p></p>","title":"September 7, 2018"},{"location":"developer-guide/ui/screenshots/#september-8-2018","text":"<p>Search dropdowns got populated with options.</p> <p></p>","title":"September 8, 2018"},{"location":"developer-guide/ui/screenshots/#september-10-2018","text":"<p>New logo and speed-dial action button.</p> <p></p>","title":"September 10, 2018"},{"location":"developer-guide/ui/screenshots/#september-11-2018","text":"<p></p>","title":"September 11, 2018"},{"location":"developer-guide/ui/screenshots/#september-19-2018","text":"<p>Pastel colored buttons and photo selection.</p> <p></p>","title":"September 19, 2018"},{"location":"developer-guide/ui/screenshots/#september-26-2018","text":"<p>The detail view.</p> <p></p>","title":"September 26, 2018"},{"location":"developer-guide/ui/screenshots/#july-3-2019","text":"<p>Improved UI with flat look, photo upload and powerful filters as well as new pages for searching places and labels.</p> <p></p> <p></p> <p></p>","title":"July 3, 2019"},{"location":"developer-guide/ui/screenshots/#january-24-2020","text":"<p></p> <p></p> <p></p> <p></p>","title":"January 24, 2020"},{"location":"developer-guide/ui/screenshots/#january-26-2020","text":"<p></p>","title":"January 26, 2020"},{"location":"developer-guide/ui/screenshots/#june-24-2020","text":"<p></p>","title":"June 24, 2020"},{"location":"developer-guide/ui/screenshots/#january-21-2021","text":"<p></p>","title":"January 21, 2021"},{"location":"developer-guide/ui/screenshots/#october-18-2021","text":"<p></p>","title":"October 18, 2021"},{"location":"developer-guide/ui/screenshots/#march-2-2022","text":"<p></p> <p></p> <p></p>","title":"March 2, 2022"},{"location":"getting-started/","text":"<p>PhotoPrism can be installed on all operating systems supporting Docker, as well as FreeBSD, Raspberry Pi, and many NAS devices. It is also available in the cloud on PikaPods and DigitalOcean.</p> <p>We recommend running PhotoPrism with Docker Compose when hosting it on a private server. It is available for Mac, Linux, and Windows.</p> <p>Once the initial setup is complete, our First Steps \ud83d\udc63 tutorial guides you through the user interface and settings to ensure your library is indexed according to your individual preferences.</p>  <p>Our stable version and development preview have been built into a single multi-arch Docker image for 64-bit AMD, Intel, and ARM processors. That means, Raspberry Pi 3 / 4, Apple Silicon, and other ARM64-based devices can pull from the same repository, enjoy the exact same functionality, and can follow the regular installation instructions after going through a short list of requirements. See FAQs for instructions and notes on alternative installation methods.</p>","title":"Setup"},{"location":"getting-started/#roadmap","text":"<p>Our vision is to provide the most user- and privacy-friendly solution to keep your pictures organized and accessible. The roadmap shows what tasks are in progress,  what needs testing, and which features are going to be implemented next.</p> <p>We have a zero bug policy and do our best to help users when they need support or have other questions. This comes at a price, as we can't give exact deadlines for new features.</p> <p>Having said that, funding really has the highest impact. So users can do their part and become a sponsor to get their favorite features as soon as possible.</p>","title":"Roadmap"},{"location":"getting-started/#system-requirements","text":"<p>We recommend hosting PhotoPrism on a server with at least 2 cores, 3 GB of physical memory,1 and a 64-bit operating system. Beyond these minimum requirements, the amount of RAM should match the number of CPU cores.</p> <p>If your server has less than 4 GB of swap space or a manual memory/swap limit is set, this can cause unexpected restarts, for example, when the indexer temporarily needs more memory to process large files. High-resolution panoramic images may require additional swap space and/or physical memory above the recommended minimum.</p>  <p>Indexing large photo and video collections significantly benefits from local SSD storage and plenty of memory for caching. Especially the conversion of RAW images and the transcoding of videos are very demanding. We take no responsibility for instability or performance problems if your device does not meet the requirements.</p>","title":"System Requirements"},{"location":"getting-started/#browsers","text":"<p>Our Progressive Web App (PWA) works with most modern browsers, and runs best on Chrome, Chromium, Safari, Firefox, and Edge. You can conveniently install it on the home screen of all major operating systems and mobile devices.</p> <p>Please note that not all video and audio formats can be played with every browser. For example, AAC - the default audio codec for MPEG-4 AVC / H.264 - is supported natively in Chrome, Safari, and Edge, while it is only optionally supported by the OS in Firefox and Opera.</p>","title":"Browsers"},{"location":"getting-started/#databases","text":"<p>The backend is compatible with SQLite 3 and MariaDB 10.5.12+.2 Support for MySQL 8 has been discontinued due to low demand and missing features.3</p>","title":"Databases"},{"location":"getting-started/#external-services","text":"<p>As explained in detail in our Privacy Policy, reverse geocoding and interactive world maps depend on retrieving the necessary information from us and MapTiler AG, headquartered in Switzerland. Both services are provided with a very high level of privacy and confidentiality.4</p> <p>Please make sure that you allow requests to these API endpoints if you have a firewall installed, and verify that your Internet connection is working.</p>","title":"External Services"},{"location":"getting-started/#https","text":"<p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy such as Traefik or Caddy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted by anyone,  including your provider, hackers, and governments. Backup tools and file sync apps like FolderSync  may refuse to connect as well.</p>","title":"HTTPS"},{"location":"getting-started/#getting-support","text":"<p>If you need help installing our software at home, you can join us on Reddit, ask in our Community Chat, or post your question in GitHub Discussions. Common problems can be quickly diagnosed and solved using our Troubleshooting Checklists.</p> <p>We'll do our best to answer all your questions. In return, we ask you to back us on Patreon or GitHub Sponsors. Think of \"free software\" as in \"free speech,\" not as in \"free beer\". Thank you!</p> <p>In exchange for their continued support, sponsors are also welcome to request direct technical support via email. Please bear with us if we are unable to get back to you immediately due to the high volume of emails and contact requests we receive.</p>  <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app. Contact us or a community member if you need help, it could be a local configuration problem, or a misunderstanding in how the software works.</p>    <ol> <li> <p>RAW image conversion and TensorFlow are disabled on systems with 1 GB or less memory\u00a0\u21a9</p> </li> <li> <p>Our <code>docker-compose.yml</code> examples are generally based on the latest MariaDB Server release to take advantage of performance enhancements. That doesn't mean older versions are no longer supported.\u00a0\u21a9</p> </li> <li> <p>Oracle seems to have stopped shipping new features and enhancements. As a result, the testing effort required before each release is no longer feasible.\u00a0\u21a9</p> </li> <li> <p>Our Compliance FAQ gives answers to the most frequently asked questions about product compliance and scalability.\u00a0\u21a9</p> </li> </ol>","title":"Getting Support"},{"location":"getting-started/config-options/","text":"<p>Changing values in <code>docker-compose.yml</code> or in Advanced Settings  always requires a restart to take effect. Open a terminal, run <code>docker-compose stop</code> and then <code>docker-compose up -d</code> to restart all services.</p>","title":"Config Options"},{"location":"getting-started/config-options/#authentication","text":"Environment CLI Flag Default Description     PHOTOPRISM_AUTH_MODE --auth-mode password authentication <code>MODE</code> (public, password)   PHOTOPRISM_ADMIN_PASSWORD --admin-password  initial admin <code>PASSWORD</code>, must have at least 8 characters","title":"Authentication"},{"location":"getting-started/config-options/#logging","text":"Environment CLI Flag Default Description     PHOTOPRISM_LOG_LEVEL --log-level info log message verbosity <code>LEVEL</code> (trace, debug, info, warning, error, fatal, panic)   PHOTOPRISM_DEBUG --debug  enable debug mode, show non-essential log messages   PHOTOPRISM_TRACE --trace  enable trace mode, show all log messages","title":"Logging"},{"location":"getting-started/config-options/#storage","text":"Environment CLI Flag Default Description     PHOTOPRISM_CONFIG_PATH --config-path  config storage <code>PATH</code>, values in options.yml override CLI flags and environment variables if present   PHOTOPRISM_DEFAULTS_YAML --defaults-yaml /etc/photoprism/defaults.yml load config defaults from <code>FILE</code> if exists, does not override CLI flags and environment variables   PHOTOPRISM_ORIGINALS_PATH --originals-path  storage <code>PATH</code> of your original media files (photos and videos)   PHOTOPRISM_ORIGINALS_LIMIT --originals-limit 1000 maximum size of media files in <code>MB</code> (1-100000; -1 to disable)   PHOTOPRISM_RESOLUTION_LIMIT --resolution-limit 100 maximum resolution of media files in <code>MEGAPIXELS</code> (1-900; -1 to disable)\u2002sponsors only   PHOTOPRISM_STORAGE_PATH --storage-path  writable storage <code>PATH</code> for sidecar, cache, and database files   PHOTOPRISM_SIDECAR_PATH --sidecar-path  custom relative or absolute sidecar <code>PATH</code> optional   PHOTOPRISM_BACKUP_PATH --backup-path  custom backup <code>PATH</code> for index backup files\u2002optional   PHOTOPRISM_CACHE_PATH --cache-path  custom cache <code>PATH</code> for sessions and thumbnail files\u2002optional   PHOTOPRISM_IMPORT_PATH --import-path  base <code>PATH</code> from which files can be imported to originals\u2002optional   PHOTOPRISM_ASSETS_PATH --assets-path  assets <code>PATH</code> containing static resources like icons, models, and translations   PHOTOPRISM_TEMP_PATH --temp-path  temporary file <code>PATH</code> optional","title":"Storage"},{"location":"getting-started/config-options/#index-workers","text":"Environment CLI Flag Default Description     PHOTOPRISM_WORKERS --workers 4 maximum <code>NUMBER</code> of indexing workers, default depends on the number of physical cores   PHOTOPRISM_WAKEUP_INTERVAL --wakeup-interval 15m0s <code>DURATION</code> between worker runs required for face recognition and index maintenance (1-86400s)   PHOTOPRISM_AUTO_INDEX --auto-index 300 WebDAV auto index safety delay in <code>SECONDS</code> (-1 to disable)   PHOTOPRISM_AUTO_IMPORT --auto-import 180 WebDAV auto import safety delay in <code>SECONDS</code> (-1 to disable)","title":"Index Workers"},{"location":"getting-started/config-options/#feature-flags","text":"Environment CLI Flag Default Description     PHOTOPRISM_READONLY --read-only  disable import, upload, delete, and all other operations that require write permissions   PHOTOPRISM_EXPERIMENTAL --experimental  enable experimental features   PHOTOPRISM_DISABLE_WEBDAV --disable-webdav  disable built-in WebDAV server   PHOTOPRISM_DISABLE_SETTINGS --disable-settings  disable settings UI and API   PHOTOPRISM_DISABLE_PLACES --disable-places  disable reverse geocoding and maps   PHOTOPRISM_DISABLE_BACKUPS --disable-backups  disable backing up albums and photo metadata to YAML files   PHOTOPRISM_DISABLE_TENSORFLOW --disable-tensorflow  disable all features depending on TensorFlow   PHOTOPRISM_DISABLE_FACES --disable-faces  disable face detection and recognition (requires TensorFlow)   PHOTOPRISM_DISABLE_CLASSIFICATION --disable-classification  disable image classification (requires TensorFlow)   PHOTOPRISM_DISABLE_FFMPEG --disable-ffmpeg  disable video transcoding and thumbnail extraction with FFmpeg   PHOTOPRISM_DISABLE_EXIFTOOL --disable-exiftool  disable creating JSON metadata sidecar files with ExifTool   PHOTOPRISM_DISABLE_HEIFCONVERT --disable-heifconvert  disable conversion of HEIC/HEIF files   PHOTOPRISM_DISABLE_DARKTABLE --disable-darktable  disable conversion of RAW files with Darktable   PHOTOPRISM_DISABLE_RAWTHERAPEE --disable-rawtherapee  disable conversion of RAW files with RawTherapee   PHOTOPRISM_DISABLE_SIPS --disable-sips  disable conversion of RAW files with Sips\u2002macOS only   PHOTOPRISM_DISABLE_RAW --disable-raw  disable indexing and conversion of RAW files   PHOTOPRISM_RAW_PRESETS --raw-presets  enables applying user presets when converting RAW files (reduces performance)   PHOTOPRISM_EXIF_BRUTEFORCE --exif-bruteforce  always perform a brute-force search if no Exif headers were found   PHOTOPRISM_DETECT_NSFW --detect-nsfw  automatically flag photos as private that MAY be offensive (requires TensorFlow)   PHOTOPRISM_UPLOAD_NSFW --upload-nsfw  allow uploads that MAY be offensive (no effect without TensorFlow)","title":"Feature Flags"},{"location":"getting-started/config-options/#customization","text":"Environment CLI Flag Default Description     PHOTOPRISM_DEFAULT_LOCALE --default-locale en standard user interface language <code>CODE</code>   PHOTOPRISM_DEFAULT_THEME --default-theme  standard user interface theme <code>NAME</code> sponsors only   PHOTOPRISM_APP_MODE --app-mode standalone progressive web app <code>MODE</code> (fullscreen, standalone, minimal-ui, browser)   PHOTOPRISM_APP_ICON --app-icon  progressive web app <code>ICON</code> (logo, app, crisp, mint, bold)\u2002sponsors only   PHOTOPRISM_APP_NAME --app-name  progressive web app <code>NAME</code> when installed on a device\u2002sponsors only   PHOTOPRISM_IMPRINT --imprint  legal <code>INFORMATION</code>, displayed in the page footer\u2002sponsors only   PHOTOPRISM_IMPRINT_URL --imprint-url  legal information <code>URL</code> sponsors only   PHOTOPRISM_WALLPAPER_URI --wallpaper-uri  login screen background image <code>URI</code> sponsors only","title":"Customization"},{"location":"getting-started/config-options/#site-information","text":"Environment CLI Flag Default Description     PHOTOPRISM_CDN_URL --cdn-url  content delivery network <code>URL</code> sponsors only   PHOTOPRISM_SITE_URL --site-url http://localhost:2342/ public site <code>URL</code>   PHOTOPRISM_SITE_AUTHOR --site-author  site <code>OWNER</code>, copyright, or artist   PHOTOPRISM_SITE_TITLE --site-title  site <code>TITLE</code> sponsors only   PHOTOPRISM_SITE_CAPTION --site-caption AI-Powered Photos App site <code>CAPTION</code>   PHOTOPRISM_SITE_DESCRIPTION --site-description  site <code>DESCRIPTION</code> optional   PHOTOPRISM_SITE_PREVIEW --site-preview  sharing preview image <code>URL</code> sponsors only","title":"Site Information"},{"location":"getting-started/config-options/#web-server","text":"Environment CLI Flag Default Description     PHOTOPRISM_HTTP_PORT --http-port 2342 http server port <code>NUMBER</code>   PHOTOPRISM_HTTP_HOST --http-host  http server <code>IP</code> address   PHOTOPRISM_HTTP_MODE --http-mode  http server <code>MODE</code> (debug, release, or test)   PHOTOPRISM_HTTP_COMPRESSION --http-compression  http server compression <code>METHOD</code> (none or gzip)","title":"Web Server"},{"location":"getting-started/config-options/#database-connection","text":"Environment CLI Flag Default Description     PHOTOPRISM_DATABASE_DRIVER --database-driver sqlite database <code>DRIVER</code> (sqlite, mysql)   PHOTOPRISM_DATABASE_DSN --database-dsn  database connection <code>DSN</code> (sqlite file, optional for mysql)   PHOTOPRISM_DATABASE_SERVER --database-server  database <code>HOST</code> incl. port e.g. \"mariadb:3306\" (or socket path)   PHOTOPRISM_DATABASE_NAME --database-name photoprism database schema <code>NAME</code>   PHOTOPRISM_DATABASE_USER --database-user photoprism database user <code>NAME</code>   PHOTOPRISM_DATABASE_PASSWORD --database-password  database user <code>PASSWORD</code>   PHOTOPRISM_DATABASE_CONNS --database-conns 0 maximum <code>NUMBER</code> of open database connections   PHOTOPRISM_DATABASE_CONNS_IDLE --database-conns-idle 0 maximum <code>NUMBER</code> of idle database connections","title":"Database Connection"},{"location":"getting-started/config-options/#file-converters","text":"Environment CLI Flag Default Description     PHOTOPRISM_DARKTABLE_BIN --darktable-bin darktable-cli Darktable CLI <code>COMMAND</code> for RAW to JPEG conversion   PHOTOPRISM_DARKTABLE_BLACKLIST --darktable-blacklist dng,cr3 do not use Darktable to convert files with these <code>EXTENSIONS</code>   PHOTOPRISM_DARKTABLE_CACHE_PATH --darktable-cache-path  custom Darktable cache <code>PATH</code>   PHOTOPRISM_DARKTABLE_CONFIG_PATH --darktable-config-path  custom Darktable config <code>PATH</code>   PHOTOPRISM_RAWTHERAPEE_BIN --rawtherapee-bin rawtherapee-cli RawTherapee CLI <code>COMMAND</code> for RAW to JPEG conversion   PHOTOPRISM_RAWTHERAPEE_BLACKLIST --rawtherapee-blacklist  do not use RawTherapee to convert files with these <code>EXTENSIONS</code>   PHOTOPRISM_SIPS_BIN --sips-bin sips Sips <code>COMMAND</code> for RAW to JPEG conversion\u2002macOS only   PHOTOPRISM_HEIFCONVERT_BIN --heifconvert-bin heif-convert HEIC/HEIF image conversion <code>COMMAND</code>   PHOTOPRISM_FFMPEG_BIN --ffmpeg-bin ffmpeg FFmpeg <code>COMMAND</code> for video transcoding and thumbnail extraction   PHOTOPRISM_FFMPEG_ENCODER --ffmpeg-encoder libx264 FFmpeg AVC encoder <code>NAME</code> sponsors only   PHOTOPRISM_FFMPEG_BITRATE --ffmpeg-bitrate 50 maximum FFmpeg encoding <code>BITRATE</code> (Mbit/s)   PHOTOPRISM_EXIFTOOL_BIN --exiftool-bin exiftool ExifTool <code>COMMAND</code> for extracting metadata","title":"File Converters"},{"location":"getting-started/config-options/#security-tokens","text":"Environment CLI Flag Default Description     PHOTOPRISM_DOWNLOAD_TOKEN --download-token  <code>SECRET</code> download URL token for originals (default: random)   PHOTOPRISM_PREVIEW_TOKEN --preview-token  <code>SECRET</code> thumbnail and video streaming URL token (default: random)","title":"Security Tokens"},{"location":"getting-started/config-options/#image-quality","text":"Environment CLI Flag Default Description     PHOTOPRISM_THUMB_COLOR --thumb-color sRGB standard color <code>PROFILE</code> for thumbnails (leave blank to disable)   PHOTOPRISM_THUMB_FILTER --thumb-filter lanczos image downscaling filter <code>NAME</code> (best to worst: blackman, lanczos, cubic, linear)   PHOTOPRISM_THUMB_SIZE --thumb-size 2048 maximum size of thumbnails created during indexing in <code>PIXELS</code> (720-7680)   PHOTOPRISM_THUMB_SIZE_UNCACHED --thumb-size-uncached 7680 maximum size of missing thumbnails created on demand in <code>PIXELS</code> (720-7680)   PHOTOPRISM_THUMB_UNCACHED --thumb-uncached  enable on-demand creation of missing thumbnails (high memory and cpu usage)   PHOTOPRISM_JPEG_QUALITY --jpeg-quality 85 a higher value increases the <code>QUALITY</code> and file size of JPEG images and thumbnails (25-100)   PHOTOPRISM_JPEG_SIZE --jpeg-size 7680 maximum size of created JPEG sidecar files in <code>PIXELS</code> (720-30000)","title":"Image Quality"},{"location":"getting-started/config-options/#face-recognition","text":"<p>To recognize faces, PhotoPrism first extracts crops from your images using a library based on pixel intensity comparisons. These are then fed into TensorFlow to compute 512-dimensional vectors for characterization. In the final step, the DBSCAN algorithm attempts to cluster these so-called face embeddings, so they can be matched to persons with just a few clicks. A reasonable range for the similarity distance between face embeddings is between 0.60 and 0.70, with a higher value being more aggressive and leading to larger clusters with more false positives. To cluster a smaller number of faces, you can reduce the core to 3 or 2 similar faces.</p>  <p>We recommend that only advanced users change these parameters:</p>    Environment CLI Flag Default Description     PHOTOPRISM_FACE_SIZE --face-size 50 minimum size of faces in <code>PIXELS</code> (20-10000)   PHOTOPRISM_FACE_SCORE --face-score 9.000000 minimum face <code>QUALITY</code> score (1-100)   PHOTOPRISM_FACE_OVERLAP --face-overlap 42 face area overlap threshold in <code>PERCENT</code> (1-100)   PHOTOPRISM_FACE_CLUSTER_SIZE --face-cluster-size 80 minimum size of automatically clustered faces in <code>PIXELS</code> (20-10000)\u2002sponsors only   PHOTOPRISM_FACE_CLUSTER_SCORE --face-cluster-score 15 minimum <code>QUALITY</code> score of automatically clustered faces (1-100)\u2002sponsors only   PHOTOPRISM_FACE_CLUSTER_CORE --face-cluster-core 4 <code>NUMBER</code> of faces forming a cluster core (1-100)\u2002sponsors only   PHOTOPRISM_FACE_CLUSTER_DIST --face-cluster-dist 0.640000 similarity <code>DISTANCE</code> of faces forming a cluster core (0.1-1.5)\u2002sponsors only   PHOTOPRISM_FACE_MATCH_DIST --face-match-dist 0.460000 similarity <code>OFFSET</code> for matching faces with existing clusters (0.1-1.5)\u2002sponsors only","title":"Face Recognition"},{"location":"getting-started/config-options/#daemon-mode","text":"<p>If you start the server as a daemon in the background, you can additionally specify a filename for the log and the process ID:</p>    Environment CLI Flag Default Description     PHOTOPRISM_PID_FILENAME --pid-filename  process id <code>FILE</code> daemon-mode only   PHOTOPRISM_LOG_FILENAME --log-filename  server log <code>FILE</code> daemon-mode only","title":"Daemon Mode"},{"location":"getting-started/config-options/#docker-image","text":"<p>The following variables are used by our Docker images only and have no effect otherwise:</p>    Environment Default Description     PHOTOPRISM_UID 0 run as a non-root user after initialization (supported: 0, 33, 50-99, 500-600, and 900-1200)   PHOTOPRISM_GID 0 run with a specific group id after initialization, to be used together with <code>PHOTOPRISM_UID</code>   PHOTOPRISM_UMASK 0002 file-creation mode (default: u=rwx,g=rwx,o=rx)   PHOTOPRISM_INIT  run/install on first startup (options: update gpu tensorflow davfs clitools clean)   PHOTOPRISM_DISABLE_CHOWN false disable updating storage permissions via chmod and chown on startup","title":"Docker Image"},{"location":"getting-started/docker-compose/","text":"<p>With Docker Compose, you use a YAML file to configure all application services so you can easily start them with a single command. Before you proceed, make sure you have Docker installed on your system. It is available for Mac, Linux, and Windows.</p>","title":"Setup Using Docker Compose"},{"location":"getting-started/docker-compose/#step-1-configure","text":"LinuxRaspberry PiARMv7WindowsmacOS   <p>Download our docker-compose.yml example (right click and Save Link As... or use <code>wget</code>) to a folder of your choice, and change the configuration as needed:</p> <pre><code>wget https://dl.photoprism.app/docker/docker-compose.yml\n</code></pre> <p>Commands on Linux may have to be prefixed with <code>sudo</code> when not running as root. Note that this will point the home directory shortcut <code>~</code> to <code>/root</code> in the <code>volumes:</code>  section of your <code>docker-compose.yml</code>. Kernel security modules such as AppArmor and SELinux  have been reported to cause issues. Ensure that your server has at least 4 GB of swap configured so that indexing doesn't cause restarts when there are memory usage spikes.</p>   <p>Download our docker-compose.yml example for  the Raspberry Pi 3 / 4 and other ARM64-based devices (right click and Save Link As... or use <code>wget</code>) to a folder of your choice, and change the configuration as needed:</p> <pre><code>wget https://dl.photoprism.app/docker/arm64/docker-compose.yml\n</code></pre> <p>Mostly the same installation instructions as for regular Linux servers apply. Commands may have to be prefixed with <code>sudo</code> when not running as root. Ensure your device meets the requirements and has at least 4 GB of swap configured before you continue.</p>   <p>Download our docker-compose.yml example for  older ARMv7-based devices (right click and Save Link As... or use <code>wget</code>) to a folder of your choice, and change the configuration as needed:</p> <pre><code>wget https://dl.photoprism.app/docker/armv7/docker-compose.yml\n</code></pre> <p>Mostly the same installation instructions as for regular Linux servers apply. Commands may have to be prefixed with <code>sudo</code> when not running as root. Ensure your device meets the requirements and has at least 4 GB of swap configured before you continue.</p>   <p>Download our docker-compose.yml example for Windows (right click and Save Link As...) to a folder of your choice, and change the configuration as needed:</p> <p>https://dl.photoprism.app/docker/windows/docker-compose.yml </p> <p>Windows Pro users should disable the WSL 2 based engine in Docker Settings &gt; General  so that they can mount drives other than <code>C:</code>. 1 This will enable Hyper-V, which  Microsoft doesn't offer  to its Windows Home customers. Docker Desktop uses dynamic memory allocation with WSL 2. It is important to explicitly increase the Docker memory limit to 4 GB or more when using  Hyper-V. The default of 2 GB can reduce indexing performance and cause unexpected restarts. Also, ensure that you configure at least 4 GB of swap space.</p>   <p>Download our docker-compose.yml example for macOS (right click and Save Link As...) to a folder of your choice, and change the configuration as needed:</p> <p>https://dl.photoprism.app/docker/macos/docker-compose.yml </p> <p>It is important to increase the Docker memory limit to 4 GB or more, as the default of 2 GB can reduce indexing performance and cause unexpected restarts. Also, ensure that you configure at least 4 GB of swap space.</p>     <p>Always change <code>PHOTOPRISM_ADMIN_PASSWORD</code> so that the app starts with a secure initial password. Never use easy-to-guess passwords or default values like <code>insecure</code> on publicly accessible servers. There is no default in case no password was provided. A minimum length of 8 characters is required.</p>","title":"Step 1: Configure"},{"location":"getting-started/docker-compose/#database","text":"<p>Our example includes a pre-configured MariaDB database server. If you remove it  and provide no other database server credentials, SQLite database files will be created in the  storage folder. Local SSD storage is best for databases of any kind.</p> <p>Never store database files on an unreliable device such as a USB flash drive, SD card, or shared network folder. These may also have unexpected file size limitations, which is especially problematic for databases that do not split data into smaller files.</p>  <p>It is not possible to change the password via <code>MARIADB_PASSWORD</code> after the database has been started  for the first time. Choosing a secure password is not essential if you don't expose the database to other apps and hosts. To enable automatic schema updates after upgrading to a new major version, set <code>MARIADB_AUTO_UPGRADE</code> to a non-empty value in your <code>docker-compose.yml</code>.</p>","title":"Database"},{"location":"getting-started/docker-compose/#volumes","text":"<p>Since the app is running inside a container, you have to explicitly mount the host folders you want to use. PhotoPrism won't be able to see folders that have not been mounted. That's an important security feature.</p>","title":"Volumes"},{"location":"getting-started/docker-compose/#photoprismoriginals","text":"<p>The originals folder contains your original photo and video files. </p> <p><code>~/Pictures</code> will be mounted by default, where <code>~</code> is a shortcut for your home directory:</p> <pre><code>volumes:\n  # \"/host/folder:/photoprism/folder\"  # example\n  - \"~/Pictures:/photoprism/originals\"\n</code></pre> <p>You may mount any folder accessible from the host instead, including network drives. Additional directories can be mounted as subfolders of <code>/photoprism/originals</code>:</p> <pre><code>volumes:\n  - \"/home/username/Pictures:/photoprism/originals\"\n  - \"/example/friends:/photoprism/originals/friends\"\n  - \"/mnt/photos:/photoprism/originals/media\"\n</code></pre> <p>On Windows, prefix the host path with the drive letter and use <code>/</code> instead of <code>\\</code> as separator:</p> <pre><code>volumes:\n  - \"D:/Example/Pictures:/photoprism/originals\"\n</code></pre>  <p>If read-only mode is enabled, all features that require write permission to the originals folder  are disabled, e.g. WebDAV, uploading and deleting files. Set <code>PHOTOPRISM_READONLY</code> to <code>\"true\"</code> in <code>docker-compose.yml</code> for this. You can mount a folder with the <code>:ro</code> flag to make Docker block  write operations as well.</p>","title":"/photoprism/originals"},{"location":"getting-started/docker-compose/#photoprismstorage","text":"<p>Cache, session, thumbnail and sidecar files are created in the storage folder:</p> <ul> <li>a storage folder mount must always be configured in your <code>docker-compose.yml</code> file so that you do not lose these files after a restart or upgrade</li> <li>never configure the storage folder to be inside the originals folder unless the name starts with a <code>.</code> to indicate that it is hidden</li> <li>we recommend placing the storage folder on a local SSD drive for best performance</li> <li>mounting symbolic links or using them inside the storage folder is currently not supported</li> </ul>  <p>Should you later want to move your instance to another host, the easiest and most time-saving way is to copy the entire storage folder along with your originals and database.</p>","title":"/photoprism/storage"},{"location":"getting-started/docker-compose/#photoprismimport","text":"<p>You may optionally mount an import folder from which files can be transferred to the originals folder in a structured way that avoids duplicates. Imported files receive a canonical filename and will be organized by year and month.</p>  <p>You can safely skip this. Adding files via Web Upload and WebDAV remains possible, unless read-only mode is enabled or the features have been disabled.</p>","title":"/photoprism/import"},{"location":"getting-started/docker-compose/#step-2-start-the-server","text":"<p>Open a terminal and change to the folder in which the <code>docker-compose.yml</code> file has been saved.2 Run this command to start the application and database services in the background:</p> <pre><code>docker-compose up -d\n</code></pre> <p>Now open the Web UI by navigating to http://localhost:2342/. You should see a login screen. Sign in with the user <code>admin</code> and the initial password configured via <code>PHOTOPRISM_ADMIN_PASSWORD</code>. You may change it on the account settings page. Enabling public mode will disable authentication.</p>  <p>It can be helpful to keep Docker running in the foreground while debugging so that log messages are displayed directly. To do this, omit the <code>-d</code> parameter when restarting.</p> <p>Should the server already be running, or you see no errors, you may have started it on a different host and/or port. There could also be an issue with your browser, ad blocker, or firewall settings.</p>   <p>It is not possible to change the password via <code>PHOTOPRISM_ADMIN_PASSWORD</code> after the app has been  started for the first time. You may run <code>docker-compose exec photoprism photoprism passwd</code>  in a terminal to change an existing password. You can also reset your database for a clean start.</p>  <p>The server port and other config options can be changed in <code>docker-compose.yml</code> at any time. Remember to restart the services for changes to take effect:</p> <pre><code>docker-compose stop\ndocker-compose up -d\n</code></pre>","title":"Step 2: Start the server"},{"location":"getting-started/docker-compose/#step-3-index-your-library","text":"<p>Our First Steps \ud83d\udc63 tutorial guides you through the user interface and settings to ensure your library is indexed according to your individual preferences.</p>  <p>Easy, isn't it?</p>  <p>Back us on Patreon or GitHub Sponsors. Your continued support helps us provide regular updates and services like world maps. Thank you! </p>","title":"Step 3: Index Your Library"},{"location":"getting-started/docker-compose/#troubleshooting","text":"<p>If your server runs out of memory, the index is frequently locked, or other system resources are running low:</p> <ul> <li> Try reducing the number of workers by setting <code>PHOTOPRISM_WORKERS</code> to a reasonably small value in <code>docker-compose.yml</code>, depending on the CPU performance and number of cores</li> <li> Make sure your server has at least 4 GB of swap space so that indexing doesn't cause restarts when memory usage spikes; RAW image conversion and video transcoding are especially demanding</li> <li> If you are using SQLite, switch to MariaDB, which is better optimized for high concurrency</li> <li> As a last measure, you can disable the use of TensorFlow for image classification and facial recognition</li> </ul> <p>Other issues? Our troubleshooting checklists help you quickly diagnose and solve them.</p>  <p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>","title":"Troubleshooting"},{"location":"getting-started/docker-compose/#command-line-interface","text":"<p><code>photoprism help</code> lists all commands and config options available in the current version:</p> <pre><code>docker-compose exec photoprism photoprism help\n</code></pre> <p>Use the <code>--help</code> flag to see a detailed command description, for example:</p> <pre><code>docker-compose exec photoprism photoprism backup --help\n</code></pre>  <p>When using Docker Compose, you can prepend commands like <code>docker-compose exec [service] [command]</code> to run them in a service container. Should this fail with no container found, make sure the service has been started, you have specified an existing service (usually <code>photoprism</code>) and you are in the folder where the <code>docker-compose.yml</code> file is located.</p>  <p>PhotoPrism's command-line interface is well suited for job automation using a scheduler.</p>","title":"Command-Line Interface"},{"location":"getting-started/docker-compose/#examples","text":"Action Command     Start Services <code>docker-compose up -d</code>   Stop Services <code>docker-compose stop</code>   Download Updates <code>docker-compose pull</code>   Uninstall <code>docker-compose rm -s -v</code>   View Logs <code>docker-compose logs --tail=100 -f</code>   Display Config Values <code>docker-compose exec photoprism photoprism show config</code>   Show Migration Status <code>docker-compose exec photoprism photoprism migrations ls</code>   Repeat Failed Migrations <code>docker-compose exec photoprism photoprism migrations run -f</code>   Reset Index Database <code>docker-compose exec photoprism photoprism reset -y</code>   Backup Index Database <code>docker-compose exec photoprism photoprism backup -a -i</code>   Restore Index Database <code>docker-compose exec photoprism photoprism restore -a -i</code>   Change Admin Password <code>docker-compose exec photoprism photoprism passwd</code>   Show User Management Commands <code>docker-compose exec photoprism photoprism users help</code>   Show Face Recognition Commands <code>docker-compose exec photoprism photoprism faces help</code>   Index Faces <code>docker-compose exec photoprism photoprism faces index</code>   Reset People &amp; Faces <code>docker-compose exec photoprism photoprism faces reset -f</code>   Transcode Videos to AVC <code>docker-compose exec photoprism photoprism convert</code>   Regenerate Thumbnails <code>docker-compose exec photoprism photoprism thumbs -f</code>   Update Index <code>docker-compose exec photoprism photoprism index --cleanup</code>   Import Files <code>docker-compose exec photoprism photoprism import [path]</code>     <p>Complete Rescan</p> <p><code>docker-compose exec photoprism photoprism index -f</code> rescans all originals, including already indexed and unchanged files. This may be necessary after major upgrades and after migrations of the database schema, especially if search results are missing or incorrect. Note you can also start a rescan from the user interface by navigating to Library &gt; Index, checking \"Full Rescan\" and then clicking \"Start\".</p>    <ol> <li> <p>https://rominirani.com/docker-on-windows-mounting-host-directories-d96f3f056a2c \u21a9</p> </li> <li> <p>The default Docker Compose config filename is <code>docker-compose.yml</code>. For simplicity, it doesn't need to be specified when running the <code>docker-compose</code> command in the same directory. Config files for other apps or instances should be placed in separate folders.\u00a0\u21a9</p> </li> </ol>","title":"Examples"},{"location":"getting-started/docker/","text":"<p>We recommend using Docker Compose because it is easier and provides more convenience for running multiple services than the pure Docker command-line interface. Before you proceed, make sure you have Docker installed on your system. It is available for Mac, Linux, and Windows.</p>","title":"Running PhotoPrism with Docker"},{"location":"getting-started/docker/#step-1-start-the-server","text":"Linux   <p>Open a terminal and run this command to start the app after replacing <code>~/Pictures</code> with the folder containing your pictures:</p> <pre><code>docker run -d \\\n  --name photoprism \\\n  --security-opt seccomp=unconfined \\\n  --security-opt apparmor=unconfined \\\n  -p 2342:2342 \\\n  -e PHOTOPRISM_UPLOAD_NSFW=\"true\" \\\n  -e PHOTOPRISM_ADMIN_PASSWORD=\"insecure\" \\\n  -v /photoprism/storage \\\n  -v ~/Pictures:/photoprism/originals \\\n  photoprism/photoprism\n</code></pre>    <p>The server port and other config options can be changed as needed. If you provide no database server credentials, SQLite database files will be created in the storage folder.</p>  <p>Always change <code>PHOTOPRISM_ADMIN_PASSWORD</code> so that the app starts with a secure initial password. Never use easy-to-guess passwords or default values like <code>insecure</code> on publicly accessible servers. There is no default in case no password was provided. A minimum length of 8 characters is required.</p>  <p>Commands on Linux may have to be prefixed with <code>sudo</code> when not running as root. Note that this will point the home directory shortcut <code>~</code> to <code>/root</code> in volume mounts. Kernel security modules such as AppArmor and SELinux have been reported to cause issues.</p> <p>When the app has been started, open the Web UI by navigating to http://localhost:2342/. You should see a login screen. Sign in with the user <code>admin</code> and the password configured via <code>PHOTOPRISM_ADMIN_PASSWORD</code>. You may change it on the account settings page. Enabling public mode will disable authentication.</p>  <p>It can be helpful to keep Docker running in the foreground while debugging so that log messages are displayed directly. To do this, omit the <code>-d</code> parameter when restarting.</p> <p>Should the server already be running, or you see no errors, you may have started it on a different host and/or port. There could also be an issue with your browser, ad blocker, or firewall settings.</p>   <p>It is not possible to change the password via <code>PHOTOPRISM_ADMIN_PASSWORD</code> after the app has been  started for the first time. You may run <code>docker exec -ti photoprism photoprism passwd</code> in a terminal to change an existing password. You can also reset your database for a clean start. </p>","title":"Step 1: Start the server"},{"location":"getting-started/docker/#volumes","text":"<p>Since the app is running inside a container, you have to explicitly mount the host folders you want to use. PhotoPrism won't be able to see folders that have not been mounted. That's an important security feature.</p>","title":"Volumes"},{"location":"getting-started/docker/#photoprismoriginals","text":"<p>The originals folder contains your original photo and video files. They are mounted from <code>~/Pictures</code> in the example above, where <code>~</code> is a shortcut for your home directory.</p> <p>You may mount any folder accessible from the host instead, including network drives. Additional directories can be mounted as subfolders of <code>/photoprism/originals</code>:</p> <pre><code>-v ~/Example:/photoprism/originals/Example\n</code></pre>  <p>If read-only mode is enabled, all features that require write permission to the originals folder are disabled, e.g. WebDAV, uploading and deleting files. Run the app with <code>-e PHOTOPRISM_READONLY=\"true\"</code>  for this. You can mount a folder with the <code>:ro</code> flag to make Docker block write operations as well.</p>","title":"/photoprism/originals"},{"location":"getting-started/docker/#photoprismstorage","text":"<p>SQLite, cache, session, thumbnail and sidecar files are created in the storage folder:</p> <ul> <li>a storage folder must always be mounted so that you do not lose these files after a restart or upgrade</li> <li>never configure the storage folder to be inside the originals folder unless the name starts with a <code>.</code> to indicate that it is hidden</li> <li>we recommend placing the storage folder on a local SSD drive for best performance</li> <li>mounting symbolic links or using them inside the storage folder is currently not supported</li> </ul> <p>Using our example, an anonymous volume is created and mounted as storage folder. You can mount a specific host folder instead, just as with originals, which is better for production environments.</p>  <p>Should you later want to move your instance to another host, the easiest and most time-saving way is to copy the entire storage folder along with your originals and database.</p>","title":"/photoprism/storage"},{"location":"getting-started/docker/#photoprismimport","text":"<p>You may optionally mount an import folder from which files can be transferred to the originals folder in a structured way that avoids duplicates. Imported files receive a canonical filename and will be organized by year and month.</p>  <p>You can safely skip this. Adding files via Web Upload and WebDAV remains possible, unless read-only mode is enabled or the features have been disabled.</p>","title":"/photoprism/import"},{"location":"getting-started/docker/#step-2-first-steps","text":"<p>Our First Steps \ud83d\udc63 tutorial guides you through the user interface and settings to ensure your library is indexed according to your individual preferences.</p>  <p>Easy, isn't it?</p>","title":"Step 2: First steps"},{"location":"getting-started/docker/#step-3-when-youre-done","text":"<p>You can stop PhotoPrism and start it again using the following commands:</p> <pre><code>docker stop photoprism\ndocker start photoprism\n</code></pre> <p>To remove the container completely:</p> <pre><code>docker rm -f photoprism\n</code></pre>  <p>Back us on Patreon or GitHub Sponsors. Your continued support helps us provide regular updates and services like world maps. Thank you! </p>","title":"Step 3: When you're done..."},{"location":"getting-started/docker/#troubleshooting","text":"<p>If your server runs out of memory, the index is frequently locked, or other system resources are running low:</p> <ul> <li> Try reducing the number of workers by setting <code>PHOTOPRISM_WORKERS</code> to a reasonably small value, depending on the CPU performance and number of cores</li> <li> Make sure your server has at least 4 GB of swap space so that indexing doesn't cause restarts when memory usage spikes; RAW image conversion and video transcoding are especially demanding</li> <li> If you are using SQLite, switch to MariaDB, which is better optimized for high concurrency</li> <li> As a last measure, you can disable the use of TensorFlow for image classification and facial recognition</li> </ul> <p>Other issues? Our troubleshooting checklists help you quickly diagnose and solve them.</p>  <p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>","title":"Troubleshooting"},{"location":"getting-started/docker/#command-line-interface","text":"<p><code>photoprism help</code> lists all commands and config options available in the current version:</p> <pre><code>docker exec -ti photoprism photoprism help\n</code></pre> <p>Use the <code>--help</code> flag to see a detailed command description, for example:</p> <pre><code>docker exec -ti photoprism photoprism backup --help\n</code></pre>  <p>When using Docker, you can prepend commands like <code>docker exec -ti [container] [command]</code> to run them in a container. Should this fail with no container found, make sure the container has been started and you have specified an existing container name or id.</p>  <p>PhotoPrism's command-line interface is well suited for job automation using a scheduler.</p>","title":"Command-Line Interface"},{"location":"getting-started/docker/#examples","text":"Action Command     Start PhotoPrism <code>docker start photoprism</code>   Stop PhotoPrism <code>docker stop photoprism</code>   Download Update <code>docker pull photoprism/photoprism:latest</code>   Uninstall <code>docker rm -f photoprism</code>   View Logs <code>docker logs --tail=100 -f photoprism</code>   Display Config Values <code>docker exec -ti photoprism photoprism show config</code>   Show Migration Status <code>docker exec -ti photoprism photoprism migrations ls</code>   Repeat Failed Migrations <code>docker exec -ti photoprism photoprism migrations run -f</code>   Reset Index Database <code>docker exec -ti photoprism photoprism reset -y</code>   Backup Index Database <code>docker exec -ti photoprism photoprism backup -a -i</code>   Restore Index Database <code>docker exec -ti photoprism photoprism restore -a -i</code>   Change Admin Password <code>docker exec -ti photoprism photoprism passwd</code>   Show User Management Commands <code>docker exec -ti photoprism photoprism users help</code>   Show Face Recognition Commands <code>docker exec -ti photoprism photoprism faces help</code>   Index Faces <code>docker exec -ti photoprism photoprism faces index</code>   Reset People &amp; Faces <code>docker exec -ti photoprism photoprism faces reset -f</code>   Transcode Videos to AVC <code>docker exec -ti photoprism photoprism convert</code>   Regenerate Thumbnails <code>docker exec -ti photoprism photoprism thumbs -f</code>   Update Index <code>docker exec -ti photoprism photoprism index --cleanup</code>   Import Files <code>docker exec -ti photoprism photoprism import [path]</code>     <p>Complete Rescan</p> <p><code>docker exec -ti photoprism photoprism index -f</code> rescans all originals, including already indexed and unchanged files. This may be necessary after major upgrades and after migrations of the database schema, especially if search results are missing or incorrect. Note You can also start a rescan from the user interface by navigating to Library &gt; Index, checking \"Full Rescan\" and then clicking \"Start\".</p>","title":"Examples"},{"location":"getting-started/faq/","text":"","title":"Frequently Asked Questions"},{"location":"getting-started/faq/#what-media-file-types-are-supported","text":"<p>PhotoPrism supports indexing, viewing, and converting most popular image, video and RAW formats, including JPEG, PNG, GIF, BMP, HEIF, HEIC, MP4, MOV, WebP, and WebM. TIFF is partially supported without extensions such as GeoTIFF.</p> <p>The internally used image format is JPEG. When indexing, a JPEG sidecar file can be created automatically for videos and images in other formats. It is needed for thumbnail generation, image classification, and face detection. JPEG XL support is planned as soon as it is generally available and enough compatible tools exist.</p> <p>If installed, converting RAW files is possible with the following converters (our Docker image includes both):</p> <ul> <li>Darktable (supported cameras)</li> <li>RawTherapee (supported cameras)</li> </ul> <p>On a Mac, RAW files can also be converted with Sips (supported cameras). Our goal is to provide top-notch support for all RAW formats, regardless of camera make and model. Please let us know about any issues with a particular camera or file format.</p> <p>For maximum browser compatibility, video codecs and containers supported by FFmpeg can be transcoded to MPEG-4 AVC on demand, just as still images can be extracted for thumbnail creation.</p> <p>Make sure you have JSON sidecar files enabled if you have videos, live photos, and/or animated GIFs so that video-specific metadata such as codec, frames, and duration can be extracted, indexed, and searched.</p> <p>For a complete list of file formats and extensions, see our downloadable Feature Overview.</p>","title":"What media file types are supported?"},{"location":"getting-started/faq/#what-are-sidecar-files-and-where-do-i-find-them","text":"<p>A sidecar is a file that sits next to your main photo or video files and usually has the same name but a different extension:</p> <ul> <li><code>IMG_0123.mov</code></li> <li><code>IMG_0123.mov.jpg</code></li> <li><code>IMG_0123.json</code></li> </ul> <p>New sidecar files are created in the storage folder by default, so the originals folder can be mounted read-only.</p>  <p>Even if <code>PHOTOPRISM_DISABLE_EXIFTOOL</code> and <code>PHOTOPRISM_DISABLE_BACKUPS</code> are set to <code>true</code>, the indexer looks for existing sidecar files and uses them.</p>","title":"What are sidecar files and where do I find them?"},{"location":"getting-started/faq/#what-metadata-sidecar-file-types-are-supported","text":"<p>Currently, three types of file formats are supported:</p>","title":"What metadata sidecar file types are supported?"},{"location":"getting-started/faq/#json","text":"<p>If not disabled via <code>PHOTOPRISM_DISABLE_EXIFTOOL</code> or <code>--disable-exiftool</code>, Exiftool is used to automatically create a JSON sidecar for each media file. In this way, embedded XMP and video metadata can also be indexed. Native metadata extraction is limited to common Exif headers. Note that this causes small amount of overhead when indexing for the first time.</p> <p>JSON files can also be useful for debugging, as they contain the full metadata and can be processed with common  development tools and text editors.</p>  <p>JSON files exported from Google Photos can be read as well. Support for more schemas may be added over time.</p>","title":"JSON"},{"location":"getting-started/faq/#yaml","text":"<p>Unless disabled via <code>PHOTOPRISM_DISABLE_BACKUPS</code> or <code>--disable-backups</code>, PhotoPrism automatically creates/updates human-friendly YAML sidecar files during indexing and after manual editing of fields such as title, date, or location. They serve as a backup in case the database (index) is lost, or when folders are synchronized with a remote instance.</p> <p>Like JSON, YAML files can be opened with common development tools and  text editors. However, changes are not synchronized with the original index, as this could overwrite existing data.</p>","title":"YAML"},{"location":"getting-started/faq/#xmp","text":"<p>XMP (Extensible Metadata Platform) is an XML-based metadata container format developed by Adobe. It provides many more fields (as part of embedded models like Dublin Core) than Exif. This also makes it difficult - if not  impossible - to provide full support. Reading title, copyright, artist, and description from XMP sidecar files is  implemented as a proof-of-concept, contributions are welcome. Indexing of  embedded XMP is only possible via Exiftool, see above.</p>","title":"XMP"},{"location":"getting-started/faq/#does-your-software-depend-on-any-external-services","text":"<p>As explained in detail in our Privacy Policy, reverse geocoding and interactive world maps depend on retrieving the necessary information from us and MapTiler AG, headquartered in Switzerland. Both services are provided with a very high level of privacy and confidentiality.</p> <p>Your use of these services is fully covered by us at the moment. Depending on your usage, this can save you thousands of dollars every month. Other providers typically charge usage-based fees and may also not allow you to cache the data they provide, compromising your privacy with unnecessary requests.</p> <p>Should you still wish to operate one or both of these services on your own premises, we can set up such a fully autonomous solution for you, provided you are prepared to cover the initial setup costs as well as ongoing maintenance fees for content licenses and updates.</p> <p>View Privacy Policy \u203a View Compliance FAQ \u203a</p>","title":"Does your software depend on any external services?"},{"location":"getting-started/faq/#why-do-i-see-connection-errors-when-requesting-api-keys-at-startup","text":"<p>As explained above, reverse geocoding and interactive world maps depend on retrieving the necessary information from external services. Please make sure that you allow requests to these API endpoints if you have a firewall installed, and verify that your Internet connection is working.</p>","title":"Why do I see connection errors when requesting API keys at startup?"},{"location":"getting-started/faq/#are-the-keys-for-using-interactive-world-maps-provided-free-of-charge","text":"<p>The API keys required to use the maps are unfortunately not free for us due to the number of users we have. Those costs are one of the reasons why we encourage all users to support our mission by signing up as a sponsor or purchasing a commercial license.</p> <p>While we could register several \"non-commercial test accounts\" instead, we don't think that would be fair and Maptiler might then stop offering them to those in need.</p> <p>Compare Personal Editions \u203a</p>","title":"Are the keys for using interactive world maps provided free of charge?"},{"location":"getting-started/faq/#what-are-the-advantages-of-purchasing-a-commercial-license","text":"<p>A key difference between the public license and a commercial license agreement is that you get access to additional support and configuration options, as well as the right to customize functionality to your needs without having to publicly disclose your changes. Our Compliance FAQ gives answers to the most frequently asked questions about product compliance and scalability.</p> <p>Compare Team Editions \u203a</p>","title":"What are the advantages of purchasing a commercial license?"},{"location":"getting-started/faq/#will-the-self-hosted-version-continue-to-be-supported","text":"<p>Absolutely! We are on a mission to protect your freedom and privacy. Self-hosting is the easiest way to stay in control and protect your privacy. It also provides the best experience for advanced users who often rely on a local toolchain to select, edit, and publish their pictures.</p> <p>At the same time, we know there's a huge demand and many practical uses for a cloud-hosted app that is easy to set up. We like to give our users the choice and therefore offer a fully managed service as a deployment option. Selected hosting partners ensure that your privacy is protected as much as technically possible, even in the cloud.</p>","title":"Will the self-hosted version continue to be supported?"},{"location":"getting-started/faq/#are-jpegs-updated-when-raw-or-xmp-files-change","text":"<p>JPEGs are currently not regenerated when related RAW or XMP files change. RAW files are digital negatives by design. PhotoPrism therefore assumes that their image information is immutable.</p> <p>XMP files can affect the appearance, but most of the metadata they contain, such as title and description, does not. Creating JPEGs from RAW files is a time-consuming task, and in most cases would cause a huge, unjustified amount of overhead. In addition, the rendering information in XMP files is not well standardized. For example, changes you make in Photoshop may not be compatible with Darktable.</p> <p>We recommend manually updating existing JPEG sidecar files as needed or creating additional JPEGs, so you can choose between different versions. New files and other metadata changes are detected and reflected in the index as usual when your library is scanned.</p>","title":"Are JPEGs updated when RAW or XMP files change?"},{"location":"getting-started/faq/#which-folder-will-be-indexed","text":"<p>This depends on your environment and configuration. While subfolders can be selected for indexing in the UI, changing the originals base folder requires a restart for security reasons.</p> <p>If you skip configuration and don't use one of our Docker images, PhotoPrism will attempt to find a photo library by searching a list of common folder names such as <code>/photoprism/originals</code> and <code>~/Pictures</code>. It also searches for other resources such as external applications, classification models, and frontend assets.</p> <p>If you use our Docker Compose example without modifications, pictures will be mounted from <code>~/Pictures</code> where <code>~</code> is a shortcut for your home directory:</p> <ul> <li><code>\\user\\username</code> on Windows</li> <li><code>/Users/username</code> on macOS</li> <li>and <code>/root</code> or <code>/home/username</code> on Linux</li> </ul> <p>Since the app is running inside a container, you have to explicitly mount the host folders you want to use. PhotoPrism won't be able to see folders that have not been mounted. Multiple folders can be made accessible by mounting them as subfolders of <code>/photoprism/originals</code>, for example:</p> <pre><code>volumes:\n  - \"/home/username/Pictures:/photoprism/originals\"\n  - \"/example/friends:/photoprism/originals/friends\"\n  - \"/mnt/photos:/photoprism/originals/media\"\n</code></pre>","title":"Which folder will be indexed?"},{"location":"getting-started/faq/#how-can-i-install-photoprism-without-docker","text":"","title":"How can I install PhotoPrism without Docker?"},{"location":"getting-started/faq/#building-from-source","text":"<p>You can build and install PhotoPrism from the publicly available source code:</p> <pre><code>git clone https://github.com/photoprism/photoprism.git\ncd photoprism\nmake all install DESTDIR=/opt/photoprism\n</code></pre> <p>Missing build dependencies must be installed manually as shown in our human-readable and versioned Dockerfile. You often don't need to use the exact same versions, so it's possible to replace packages with what is available in your environment.</p> <p>Please note that we do not have the resources to provide private users with dependencies and TensorFlow libraries for their personal environments. We recommend giving Docker a try if you use Linux as it saves developers a lot of time when building, testing, and deploying complex applications like PhotoPrism. It also effectively helps avoid \"works for me\" moments and missing dependencies, see next question.</p>","title":"Building From Source"},{"location":"getting-started/faq/#installation-packages","text":"<p>An unofficial port is available for FreeBSD / FreeNAS users. Developers are invited to contribute by building and testing standalone packages for Linux distributions and other operating systems. </p> <p>Updates are released several times a month, so maintaining the long list of dependencies for additional environments would currently consume too many of our resources.</p>","title":"Installation Packages"},{"location":"getting-started/faq/#lxc-images","text":"<p>There is no official LXC image available yet, see related GitHub issue for details.</p>","title":"LXC Images"},{"location":"getting-started/faq/#why-are-you-using-docker","text":"<p>Containers are nothing new; Solaris Zones have been around for about 15 years, first released publicly in 2004. The chroot system call was introduced during development of Version 7 Unix in 1979. It is used ever since for hosting applications exposed to the public Internet.</p> <p>Modern Linux containers are an incremental enhancement. A main advantage of Docker is that application images can be easily made available to users via Internet. It provides a common standard across most operating systems and devices, which saves our team a lot of time that we can then spend more effectively, for example, providing support and developing one of the many features that users are waiting for.</p> <p>Human-readable and versioned Dockerfiles as part of our public source code also help avoid \"works for me\" moments and other unwelcome surprises by enabling teams to have the exact same environment everywhere in development, staging, and production.</p> <p>Last but not least, virtually all file format parsers have vulnerabilities that just haven't been discovered yet. This is a known risk that can affect you even if your computer is not directly connected to the Internet. Running apps in a container with limited host access is an easy way to improve security without compromising performance and usability.</p>  <p>A virtual machine running its own operating system provides more security, but typically has side effects such as lower performance and more difficult handling. You can also run Docker in a VM to get the best of both worlds. It's essentially what happens when you run dockerized applications on virtual cloud servers and operating systems other than Linux.</p>","title":"Why are you using Docker?"},{"location":"getting-started/faq/#should-i-use-sqlite-mariadb-or-mysql","text":"<p>PhotoPrism is compatible with SQLite 3 and MariaDB 10.5.12+. Official support for MySQL 8 is discontinued as Oracle seems to have stopped shipping new features and enhancements. As a result, the testing effort required before each release is no longer feasible.</p> <p>If you have few pictures, concurrent users, and CPU cores, SQLite may seem faster compared to full-featured database servers like MariaDB.</p> <p>This changes as the index grows and the number of concurrent accesses increases. The way MariaDB and MySQL handle multiple queries is completely different and optimized for high concurrency. SQLite, for example, locks the index on updates so that other operations have to wait. In the worst case, this can lead to timeout errors. Its main advantage is that you don't need to run a separate database server. This can be very useful for testing and also works great if you only have a few thousand files to index.</p> <p>MariaDB lacks some features that MySQL Enterprise Edition offers. On the other hand, MariaDB has many optimizations. It is also completely open-source.</p>","title":"Should I use SQLite, MariaDB, or MySQL?"},{"location":"getting-started/faq/#ive-configured-an-external-database-but-cant-connect","text":"<p>Most often this happens when new users configure <code>localhost</code> or <code>127.0.0.1</code> as database server host, since these always point back to the current container or computer. So it is not possible to access an external service with such a hostname or an IP address starting with 127. It works only if it is used directly in the container or on the computer where the database server is running. Instead, you must use a hostname or IP address that is accessible from other machines and containers.</p>","title":"I've configured an external database, but can't connect?"},{"location":"getting-started/faq/#why-does-photoprism-always-consume-100-of-cpu-when-the-background-worker-is-running","text":"<p>Many users reporting poor performance and high CPU load have migrated from SQLite to MariaDB so that their database schema is not optimized for performance, for example, because indexes are missing or columns have the wrong data type. The instructions for these migrations were provided by a contributor and are not part of the original software distribution. As such, they have not been officially released, recommended, or extensively tested by us.</p> <p>In some instances, users have manually changed the contents of the database. It is also possible that the database is in an inconsistent state for other reasons, e.g. due to bugs in previous versions that have been fixed in the meantime. However, we are not currently aware of any such cases.</p> <p>Due to the amount of time required to review each report, we can only offer this to eligible sponsors and business customers, and not to users who have chosen our free community edition.</p> <p>Get Performance Tips \u203a View Database Schema \u203a</p>","title":"Why does PhotoPrism always consume 100% of CPU when the background worker is running?"},{"location":"getting-started/faq/#can-you-improve-performance-when-using-older-or-otherwise-slow-hardware","text":"<p>It is a known issue that the user interface and backend operations, especially face recognition, can be slow or even crash on older hardware due to a lack of resources. Like most applications, PhotoPrism has certain requirements and our development process does not include testing on unsupported or unusual hardware.</p> <p>In many cases, performance can be improved through optimizations. Since these can prove to be very time-consuming and cost-intensive in practice, users and developers must decide on a case-by-case basis whether this provides sufficient benefit in relation to the costs or whether the use of more powerful hardware is faster and cheaper overall.</p> <p>We kindly ask you not to open a problem report on GitHub Issues for poor performance on older hardware until a full cause and feasibility analysis has been performed. GitHub Discussions or any of our other public forums and communities are great places to start a discussion.</p> <p>That being said, one of the advantages of open-source software is that users can submit pull requests with performance and other enhancements they would like to see implemented. This will result in a much faster solution than waiting for a core team member to remotely analyze your problem and then provide a fix.</p>","title":"Can you improve performance when using older or otherwise slow hardware?"},{"location":"getting-started/faq/#is-a-raspberry-pi-fast-enough","text":"<p>This largely depends on your expectations and the number of files you have. Most users report that PhotoPrism runs smoothly on their Raspberry Pi 4. However, initial indexing typically takes much longer than on standard desktop computers.</p> <p>Also keep in mind that the hardware has limited video transcoding capabilities, so the conversion of video file formats is not well-supported and software transcoding is generally slow.</p>","title":"Is a Raspberry Pi fast enough?"},{"location":"getting-started/faq/#should-i-use-an-sd-card-or-a-usb-stick","text":"<p>Conventional USB sticks and SD cards are not suitable for long-term storage. Not only because of the performance, but also because they can lose data over time. Local Solid-State Drives (SSDs) are best, even when connected externally via USB 3. USB 1 and 2 devices will be slow either way.</p>","title":"Should I use an SD card or a USB stick?"},{"location":"getting-started/faq/#why-dont-you-display-animated-gifs-natively","text":"<p>Support for animated GIFs was added in April 2022.</p>","title":"Why don't you display animated GIFs natively?"},{"location":"getting-started/faq/#why-is-my-storage-folder-so-large-what-is-in-it","text":"<p>The storage folder contains sidecar, cache, and configuration files. It may also contain index database files if you are using SQLite.</p> <p>Most of the space is taken up by the thumbnails: These are high-quality, scaled-down versions of your originals. Thumbnails are necessary because web browsers are bad at resizing large images to fit the screen. Using full-resolution originals for slideshows and in search results would also consume a lot of browser memory and significantly reduce indexing performance.</p> <p>We are working to implement storage optimizations whenever there is an opportunity. It is also possible to increase the JPEG compression and/or limit the resolution if you are happy with lower quality thumbnails.</p> <p>To free up as much space as possible, the most effective way is to delete all files in the <code>/cache/thumbnails</code> storage folder. It is located outside the originals folder by default, depending on your configuration. Then perform a full rescan of your library or run the command <code>photoprism thumbs -f</code> in a terminal if you have direct server access. This command can also be used to replace existing thumbnails, for example after changing the quality settings. Higher resolution thumbnails cannot be automatically removed at this time.</p> <p>If you have a fast CPU and enough memory, you can choose to render certain thumbnails only on demand. However, storage is usually so cheap that most users opt for better quality and performance instead.</p> <p>Actual storage requirements vary and depend, among other things, on file resolutions and formats (RAW, JPEG, video,...). For highly compressed, high-resolution videos in modern formats that cannot be displayed natively by browsers, the storage folder may even be larger than the originals, since videos transcoded to AVC are not as heavily compressed.</p>","title":"Why is my storage folder so large? What is in it?"},{"location":"getting-started/faq/#can-i-skip-creating-thumbnails-completely","text":"<p>The smallest configurable size is 720px for use by the indexer to perform color detection, image classification, as well as face detection and recognition. Recreating them every time they are needed is too demanding even for the most powerful servers. Unless you have just a few small pictures, this would make the app unusable.</p>  <p>Reducing the Static Size Limit of thumbnails has a significant impact on face recognition and image classification results. Simply put, it means that the indexer can no longer see properly.</p>","title":"Can I skip creating thumbnails completely?"},{"location":"getting-started/faq/#im-having-issues-understanding-the-difference-between-the-import-and-originals-folders","text":"<p>You may optionally mount an import folder from which files can be transferred to the originals folder in a structured way that avoids duplicates. Imported files receive a canonical filename and will be organized by year and month.</p> <p>Most users with existing photo libraries will want to index their originals folder directly without importing files, leaving the existing file and folder names unchanged. On the other hand importing is an efficient way to add files, since PhotoPrism doesn't have to search your originals folder to find new files.</p>","title":"I'm having issues understanding the difference between the import and originals folders?"},{"location":"getting-started/faq/#can-i-use-photoprism-to-sort-files-into-a-configurable-folder-structure","text":"<p>You have complete freedom in how you organize your originals. If you don't like the unique names and  folders used by the import function, you can resort to external batch renaming tools, for example ExifTool, PhockUp, or Photo Organizer.</p> <p>Configurable import folders may be available in a later version. This is because - depending on the specific  pattern - appropriate conflict resolution is required and the patterns must be well understood and validated  to avoid typos or other misconfigurations that lead to undesired results for which we do not want to be responsible.</p>","title":"Can I use PhotoPrism to sort files into a configurable folder structure?"},{"location":"getting-started/faq/#why-is-only-the-logo-displayed-when-i-open-the-app","text":"<p>This may happen when the server cannot be reached, for example, because a proxy is misconfigured, JavaScript is disabled in your browser, an ad blocker is blocking requests, or you are using an incompatible browser.</p> <p>We recommend going through the checklist provided and to verify that your browser meets the system requirements.</p>","title":"Why is only the logo displayed when I open the app?"},{"location":"getting-started/faq/#why-is-photoprism-getting-stuck-in-a-restart-loop","text":"<p>This happens when Docker was configured to automatically restart services after failures.</p> <p>We recommend going through the checklist for fatal server errors and to verify that your computer meets the system requirements.</p>","title":"Why is PhotoPrism getting stuck in a restart loop?"},{"location":"getting-started/faq/#can-i-install-photoprism-in-a-sub-directory-on-a-shared-domain","text":"<p>Setting up PhotoPrism behind a reverse proxy in a sub-directory on a shared domain is possible in principle. This method is experimental, however, and not generally recommended because a number of detailed issues remain to be addressed and technical expertise is required.</p>","title":"Can I install PhotoPrism in a sub-directory on a shared domain?"},{"location":"getting-started/faq/#i-could-not-find-a-documentation-of-config-parameters","text":"<p>We maintain a complete list of config options in Getting Started. When you run <code>photoprism help</code> in a terminal,  all commands and parameters available in your currently installed version  are listed:</p> <pre><code>docker-compose exec photoprism photoprism help\n</code></pre> <p>Our Docker Compose examples are continuously  updated and inline documentation has been added to simplify installation.</p>","title":"I could not find a documentation of config parameters?"},{"location":"getting-started/faq/#what-exactly-does-the-read-only-mode","text":"<p>When you enable read-only mode, all features that require write permission to the originals folder are disabled, for example import, upload, and delete. Set <code>PHOTOPRISM_READONLY</code> to <code>\"true\"</code> in <code>docker-compose.yml</code> for this. You can mount a folder with the <code>:ro</code> flag to make Docker block write operations as well.</p>","title":"What exactly does the read-only mode?"},{"location":"getting-started/faq/#how-can-i-uninstall-photoprism","text":"<p>This depends on how you installed it. If you're running PhotoPrism with Docker Compose,  this command will stop and remove the Docker container:</p> <pre><code>docker-compose rm -s -v\n</code></pre> <p>Please refer to the official Docker documentation  for further details.</p>","title":"How can I uninstall PhotoPrism?"},{"location":"getting-started/faq/#how-can-i-mount-network-shares-with-docker","text":"<p>You can mount remote folders that you can access on your host if they have already been mounted there, using your operating system's standard tools and methods. This requires no changes compared to specifying any other path or drive on your host.</p> <p>Alternatively, you can mount network storage using Docker Compose.  Follow this <code>docker-compose.yml</code> example for NFS (Linux, Unix) shares:</p> <pre><code>services:\n  photoprism:\n    # ...\n    volumes:\n      # Map originals folder to NFS:\n      - \"photoprism-originals:/photoprism/originals\"     \n\nvolumes:\n  photoprism-originals:\n    driver: local\n    driver_opts:\n      type: nfs\n      # The IP of your NAS:\n      o: \"username=user,password=secret,addr=1.2.3.4,soft,rw\"\n      # Share path on your NAS:\n      device: \":/mnt/photos\" \n</code></pre> <p>For mounting CIFS (Windows, Samba, SMB) network shares:</p> <pre><code>volumes:\n  photoprism-originals:\n    driver: local\n    driver_opts:\n      type: cifs\n      o: \"username=user,password=secret,rw\"\n      device: \"//host/folder\"\n</code></pre>  <p>Mounting the import folder from a network drive that can also be accessed via other ways (e.g. CIFS) is handy  because you can dump all data from an SD card/camera directly to this folder and then start the import process under Library &gt; Import. PhotoPrism also has WebDAV support for remote file management and uploading, for example, through PhotoSync.</p>","title":"How can I mount network shares with Docker?"},{"location":"getting-started/faq/#why-does-changing-permissions-using-chmod-does-not-work-for-my-network-shares","text":"<p>This is a common phenomenon with NFS shares. For security reasons, permissions must be changed on the server to take effect; unless the server allows them to be changed remotely, which depends on the settings.  Even then, the actual permissions on the server and those effective on the clients may be different in the worst case.</p>","title":"Why does changing permissions using chmod does not work for my  network shares?"},{"location":"getting-started/faq/#do-you-support-podman","text":"<p>Podman works just fine both in rootless and under root. Mind the SELinux which is enabled on  Red Hat compatible systems, you may hit permission error problems. </p> <p>More details on how to run PhotoPrism with Podman on CentOS in  this blog post,  it includes all the details including root and rootless modes, user mapping and SELinux.</p>","title":"Do you support Podman?"},{"location":"getting-started/faq/#any-plans-to-add-support-for-active-directory-ldap-or-other-centralized-account-management-options","text":"<p>There is no single sign-on support yet as we didn't consider it essential for our initial release. Our team is currently working on OpenID Connect, which will be available in a future release.</p>","title":"Any plans to add support for Active Directory, LDAP or other centralized account management options?"},{"location":"getting-started/faq/#your-app-is-really-terrible-can-i-tell-you-how-bad-it-is","text":"<p>Please take the time to read this documentation and determine the cause of your problem before opening invalid bug reports, starting a public \"shitstorm\" or insulting other community members in our chat rooms. Aside from being annoying for everyone, it also keeps our team from working on features and enhancements that users like you are waiting for. Visit photoprism.app/code-of-conduct to learn more.</p>  <p>Professional Users</p> <p>Our Community Edition is designed primarily for small servers and home users. Professional users are welcome to contact us for a commercial solution.</p>","title":"Your app is really terrible, can I tell you how bad it is?"},{"location":"getting-started/raspberry-pi/","text":"<p>Our stable version and development preview have been built into a single multi-arch Docker image for 64-bit AMD, Intel, and ARM processors.</p> <p>As a result, Raspberry Pi 3 / 4, Apple Silicon, and other ARM64-based devices can pull from the same repository, enjoy the same functionality, and can follow the regular installation instructions after going through a short list of system requirements.</p>  <p>PhotoPrismPi</p> <p>The easiest way to run PhotoPrism on a Raspberry Pi is with PhotoPrismPi.1 Simply flash the image to an SD card, plug it into the Pi and boot it. After a few minutes, our latest release will be ready to use!</p>","title":"Running PhotoPrism on a Raspberry Pi"},{"location":"getting-started/raspberry-pi/#system-requirements","text":"<ul> <li>Your device should have at least 3 GB of physical memory and a 64-bit operating system</li> <li>While PhotoPrism has been reported to work on devices with less memory, we take no responsibility for instability or performance problems</li> <li>RAW image conversion and TensorFlow are disabled on systems with 1 GB or less memory</li> <li>Indexing large photo and video collections significantly benefits from local SSD storage and plenty of memory for caching, especially the conversion of RAW images and the transcoding of videos are very demanding</li> <li>If less than 4 GB of swap space is configured or a manual memory/swap limit is set, this can cause unexpected restarts, for example, when the indexer temporarily needs more memory to process large files</li> <li>High-resolution panoramic images may require additional swap space and/or physical memory above the recommended minimum</li> <li>We recommend disabling kernel security in your    docker-compose.yml, especially if you do    not have experience with the configuration:   <pre><code>photoprism:\n  security_opt:\n    - seccomp:unconfined\n    - apparmor:unconfined\n</code></pre></li> <li>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy such as Traefik or Caddy</li> </ul>","title":"System Requirements"},{"location":"getting-started/raspberry-pi/#architecture-specific-notes","text":"","title":"Architecture Specific Notes"},{"location":"getting-started/raspberry-pi/#modern-arm64-based-devices","text":"Image Name     Stable Release <code>photoprism/photoprism:latest</code>   Development Preview <code>photoprism/photoprism:preview</code>   MariaDB <code>arm64v8/mariadb:10.8</code>    <p>Running 64-bit Docker images under Raspbian Linux requires a minimum of technical experience to perform the necessary configuration changes. This is because it is a 32-bit operating system with merely a 64-bit kernel to ensure compatibility with legacy software.  If you don't need compatibility with 32-bit apps, we recommend choosing a standard 64-bit Linux distribution instead as it will save you time and requires less experience:</p> <ul> <li>Raspberry Pi Debian</li> <li>Ubuntu for Raspberry Pi</li> <li>UbuntuDockerPi is a 64-bit Ubuntu Server with Docker pre-configured</li> </ul>  <p>Other distributions that target the same use case as Raspbian, such as CoreELEC, will have similar issues and should therefore also be avoided to run modern server applications.</p>","title":"Modern ARM64-based Devices"},{"location":"getting-started/raspberry-pi/#raspberry-pi-os","text":"<p>To ensure compatibility with 64-bit Docker images, your Raspberry Pi 3 / 4 must boot with the <code>arm_64bit=1</code> flag in its config.txt file. An \"exec format\" error will occur otherwise.</p> <p>Try explicitly pulling the ARM64 version if you've booted your device with the <code>arm_64bit=1</code> flag  and you see the \"no matching manifest\" error on Raspberry Pi OS (Raspbian):</p> <pre><code>docker pull --platform=arm64 photoprism/photoprism:latest\n</code></pre> <p>It may also help to set the <code>DOCKER_DEFAULT_PLATFORM</code> environment variable to <code>linux/arm64</code>.</p> <p>In case you see Docker errors related to \"cgroups\", try adding the following parameters to  <code>/boot/firmware/cmdline.txt</code> or <code>/boot/cmdline.txt</code> (file location depends on the OS in use):</p> <pre><code>cgroup_enable=cpuset cgroup_enable=memory cgroup_memory=1\n</code></pre>","title":"Raspberry Pi OS"},{"location":"getting-started/raspberry-pi/#older-armv7-based-devices","text":"<p>You may use the following 32-bit Docker images to run PhotoPrism and MariaDB on ARMv7-based devices (always use our ARM64 image if possible):</p>    Image Name     Stable Release <code>photoprism/photoprism:armv7</code>   Development Preview <code>photoprism/photoprism:preview-armv7</code>   MariaDB <code>linuxserver/mariadb:latest</code>    <p>If your device meets the requirements, mostly the same installation instructions as  for regular Linux servers apply. Please pay close attention to changed directory and environment variable names.</p>  <p>Darktable is not included in the ARMv7 image because it is not 32-bit compatible. Always choose the regular 64-bit version if your device supports it.</p>","title":"Older ARMv7-based Devices"},{"location":"getting-started/raspberry-pi/#is-a-raspberry-pi-fast-enough","text":"<p>This largely depends on your expectations and the number of files you have. Most users report that PhotoPrism runs smoothly on their Raspberry Pi 4. However, initial indexing typically takes much longer than on standard desktop computers.</p> <p>Also keep in mind that the hardware has limited video transcoding capabilities, so the conversion of video file formats is not well-supported and software transcoding is generally slow.</p>","title":"Is a Raspberry Pi fast enough?"},{"location":"getting-started/raspberry-pi/#getting-updates","text":"<p>Open a terminal and change to the folder where the <code>docker-compose.yml</code> file is located.2 Now run the following commands to download the most recent image from Docker Hub and restart your instance in the background:</p> <pre><code>docker-compose pull\ndocker-compose stop\ndocker-compose up -d\n</code></pre> <p>Pulling a new version can take several minutes, depending on your internet connection speed.</p> <p>Advanced users can add this to a <code>Makefile</code> so that they only have to type a single command like <code>make update</code>. See Command-Line Interface  to learn more about terminal commands.</p>  <p>Even when you use an image with the <code>:latest</code> tag, Docker does not automatically download new images for you. You can either manually upgrade as shown above, or set up a service like Watchtower to get automatic updates.</p>","title":"Getting Updates"},{"location":"getting-started/raspberry-pi/#config-examples","text":"<p>We recommend that you compare your own <code>docker-compose.yml</code> with our latest examples from time to time, as they may include new config options or other enhancements relevant to you.</p>","title":"Config Examples"},{"location":"getting-started/raspberry-pi/#mariadb-server","text":"<p>Our config examples are generally based on the latest stable release to take advantage of performance enhancements. This does not mean older versions are no longer supported and you have to upgrade immediately.</p>  <p>If MariaDB fails to start after upgrading from an earlier version (or migrating from MySQL), the internal management schema may be outdated. See Troubleshooting MariaDB Problems for instructions on how to fix this.</p>","title":"MariaDB Server"},{"location":"getting-started/raspberry-pi/#troubleshooting","text":"<p>If your device runs out of memory, the index is frequently locked, or other system resources are running low:</p> <ul> <li> Try reducing the number of workers by setting <code>PHOTOPRISM_WORKERS</code> to a reasonably small value in <code>docker-compose.yml</code>, depending on the performance of your device</li> <li> Make sure your device has at least 4 GB of swap space so that indexing doesn't cause restarts when memory usage spikes; RAW image conversion and video transcoding are especially demanding</li> <li> If you are using SQLite, switch to MariaDB, which is better optimized for high concurrency</li> <li> As a last measure, you can disable the use of TensorFlow for image classification and facial recognition</li> </ul> <p>Other issues? Our troubleshooting checklists help you quickly diagnose and solve them.</p>  <p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>","title":"Troubleshooting"},{"location":"getting-started/raspberry-pi/#credits","text":"<ol> <li> <p>A big thank you to Guy Sheffer for helping us build a Raspberry Pi version!\u00a0\u21a9</p> </li> <li> <p>The default Docker Compose config filename is <code>docker-compose.yml</code>. For simplicity, it doesn't need to be specified when running the <code>docker-compose</code> command in the same directory. Config files for other apps or instances should be placed in separate folders.\u00a0\u21a9</p> </li> </ol>","title":"Credits"},{"location":"getting-started/updates/","text":"<p>Back us on Patreon or GitHub Sponsors. Your continued support helps us provide regular updates and services like world maps. Thank you! </p>","title":"Getting Updates"},{"location":"getting-started/updates/#docker-compose","text":"<p>Open a terminal and change to the folder where the <code>docker-compose.yml</code> file is located.1 Now run the following commands to download the most recent image from Docker Hub and restart your instance in the background:</p> <pre><code>docker-compose pull\ndocker-compose stop\ndocker-compose up -d\n</code></pre> <p>Pulling a new version can take several minutes, depending on your internet connection speed.</p> <p>Advanced users can add this to a <code>Makefile</code> so that they only have to type a single  command like <code>make update</code>. See Command-Line Interface to learn more about terminal commands.</p>  <p>Even when you use an image with the <code>:latest</code> tag, Docker does not automatically download new images for you. You can either manually upgrade as shown above, or set up a service like Watchtower to get automatic updates.</p>","title":"Docker Compose"},{"location":"getting-started/updates/#config-examples","text":"<p>We recommend that you compare your own <code>docker-compose.yml</code> with our latest examples from time to time, as they may include new config options or other enhancements relevant to you.</p>","title":"Config Examples"},{"location":"getting-started/updates/#mariadb-server","text":"<p>Our config examples are generally based on the latest stable release to take advantage of performance enhancements. This does not mean older versions are no longer supported and you have to upgrade immediately.</p>  <p>If MariaDB fails to start after upgrading from an earlier version (or migrating from MySQL), the internal management schema may be outdated. See Troubleshooting MariaDB Problems for instructions on how to fix this.</p>","title":"MariaDB Server"},{"location":"getting-started/updates/#development-preview","text":"<p>You can test upcoming features and enhancements by changing the image from <code>photoprism/photoprism:latest</code> to <code>photoprism/photoprism:preview</code> in your <code>docker-compose.yml</code>. Then pull the most recent image and restart your instance as shown above.</p>","title":"Development Preview"},{"location":"getting-started/updates/#raspberry-pi","text":"<p>Our stable version and development preview have been built into a single multi-arch Docker image for 64-bit AMD, Intel, and ARM processors.</p> <p>That means, Raspberry Pi 3 / 4, Apple Silicon, and other ARM64-based devices can pull from the same repository, enjoy the exact same functionality, and can follow the regular Installation Instructions after going through a short list of System Requirements and Architecture Specific Notes.</p> <p>Try explicitly pulling the ARM64 version if you've booted your device with the <code>arm_64bit=1</code> flag and you see the \"no matching manifest\" error on Raspberry Pi OS (Raspbian):</p> <pre><code>docker pull --platform=arm64 photoprism/photoprism:latest\n</code></pre> <p>If you do not have legacy software, we recommend choosing a standard 64-bit Linux distribution as this requires less experience. Alternative 32-bit Docker images are provided for ARMv7-based devices.</p>  <p>Darktable is not included in the ARMv7 version because it is not 32-bit compatible.</p>","title":"Raspberry Pi"},{"location":"getting-started/updates/#face-recognition","text":"<p>Existing users may index faces without performing a complete rescan:</p> <pre><code>docker-compose exec photoprism photoprism faces index\n</code></pre> <p>Remove existing people and faces for a clean start e.g. after upgrading from our  development preview:</p> <pre><code>docker-compose exec photoprism photoprism faces reset -f\n</code></pre>","title":"Face Recognition"},{"location":"getting-started/updates/#watchtower","text":"<p>Adding Watchtower as a service to your <code>docker-compose.yml</code> will automatically keep images up-to-date:</p> <pre><code>services:\n  watchtower:\n    image: containrrr/watchtower\n    restart: unless-stopped\n    volumes:\n      - \"/var/run/docker.sock:/var/run/docker.sock\"\n</code></pre> <p>Users of our DigitalOcean 1-Click App have Watchtower pre-installed.</p>  <p>Caution</p> <p>Automatic updates may interrupt indexing and import operations. Only enable Watchtower if you are comfortable with this.</p>","title":"Watchtower"},{"location":"getting-started/updates/#pure-docker","text":"<p>Open a terminal on your server, and run the following command to pull the most recent container image:</p> <pre><code>docker pull photoprism/photoprism:latest\n</code></pre> <p>See Running PhotoPrism with Docker for a command reference.</p>   <ol> <li> <p>The default Docker Compose config filename is <code>docker-compose.yml</code>. For simplicity, it doesn't need to be specified when running the <code>docker-compose</code> command in the same directory. Config files for other apps or instances should be placed in separate folders.\u00a0\u21a9</p> </li> </ol>","title":"Pure Docker"},{"location":"getting-started/advanced/backups/","text":"<p>A full backup of your PhotoPrism instance includes:</p> <ol> <li>All content from your <code>originals</code> folder</li> <li>An index database SQL dump</li> </ol> <p>The best way to create an index backup is to run this command in a terminal:</p> <pre><code>photoprism backup -i [filename]\n</code></pre> <p>Or the following for docker-compose:</p> <pre><code>docker-compose exec -T photoprism photoprism backup -i - &gt; photoprism-db.sql\n</code></pre> <p>As seen above, you can use <code>-</code> as filename to write the backup to stdout. This is done to ensure the backup resides outside of the container environment.</p> <p>If you leave the filename empty, the backup will be written to the default backup folder configured via <code>PHOTOPRISM_BACKUP_PATH</code>.</p> <p>If you want, you can also export your cache and thumbnails, but it can also be re-generated after restore. It will save you from re-generating thumbnails from scratch however.</p> <p>Helpful information can be found on GitHub as well.</p>","title":"Creating Backups"},{"location":"getting-started/advanced/backups/#restore-from-backup","text":"<p>Follow this guide to restore PhotoPrism from backups.</p>  <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>","title":"Restore from Backup"},{"location":"getting-started/advanced/caching/","text":"<p>For advanced users only: The instructions for these migrations were provided by a contributor and are not part of the original software distribution. As such, they have not been officially released, recommended, or extensively tested by us. You can contribute by clicking  to send a pull request with your changes.</p> <p>Some users might want to place the thumbnail cache on a separate, faster file system while keeping the actual photo files on large, slow bulk storage. This should result in faster access to the thumbnails. </p> <p>To do this, we add a further volume (<code>-v</code>) parameter to the docker script so we use an external path (outside the container) for the cache files. You can get the internal path with <code>photoprism config</code>, or as a docker command in a running system (for Linux/BSD systems): </p> <pre><code>sudo docker exec photoprism photoprism config | grep cache-path\n</code></pre> <p>This should return a line such as:</p> <pre><code>cache-path            /home/photoprism/.cache/photoprism\n</code></pre> <p>for the internal path. We now know to add a line like</p> <pre><code>  -v &lt;MYCACHE_FOLDER&gt;:/home/photoprism/.cache/photoprism \\\n</code></pre> <p>to the docker invocation, with your actual path to the cache folder replacing <code>&lt;MYCACHE_FOLDER&gt;</code>. </p> <p>As an example, let's assume a ZFS filesystem with two pools (\"volumes\" in classical terminology): A pool tank in a raidz2 (RAID6) configuration based on hard drives that holds the original pictures, and a pool dozer in a mirrored (RAID1) configuration based on SSD or NVMe drives to store the thumbnails. Our docker script could be:</p> <pre><code>docker run -d \\\n  --name photoprism \\\n  -p 2342:2342 \\\n  -v /tank/photos/:/home/photoprism/Pictures/Originals \\\n  -v /dozer/cache/:/home/photoprism/.cache/photoprism \\\n  photoprism/photoprism:latest\n</code></pre> <p>In a case like this, you will probably also want to optimize the datasets (\"file systems\") <code>tank/photos</code> and <code>dozer/cache</code> further. For instance, the original photo files will call for a larger recordsize than the smaller cache files.</p>","title":"Optimizing Cache Performance"},{"location":"getting-started/advanced/databases/","text":"<p>PhotoPrism is compatible with SQLite 3 and MariaDB 10.5.12+. Older databases using the same dialect, such as MySQL 8, may work but are not officially supported.</p> <p>Never store database files on an unreliable device such as a USB flash drive, SD card, or shared network folder. These may also have unexpected file size limitations, which is especially problematic for databases that do not split data into smaller files.</p>  <p>Info</p> <p>Our docker-compose.yml examples include tested and working database configurations. These docs are for advanced users only.</p>   <p>MySQL</p> <p>Official support for MySQL 8 is discontinued as Oracle seems to have stopped shipping new features and enhancements. As a result, the testing effort required before each release is no longer feasible.</p>","title":"Advanced Database Setup"},{"location":"getting-started/advanced/databases/#configuring-mariadb","text":"<p>When creating a new database, make sure to set the charset and collation as follows:</p> <pre><code>CREATE DATABASE photoprism\nCHARACTER SET = 'utf8mb4'\nCOLLATE = 'utf8mb4_unicode_ci';\n</code></pre> <p>Now create a user and grant privileges for this new database:</p> <pre><code>CREATE USER 'photoprism'@'%' IDENTIFIED BY 'insecure';\nGRANT ALL PRIVILEGES ON photoprism.* to 'photoprism'@'%';\nFLUSH PRIVILEGES;\n</code></pre> <p>Set the database environment variables for PhotoPrism and MariaDB as follows:</p> <pre><code>services:\n  photoprism:\n    environment:\n      PHOTOPRISM_DATABASE_DRIVER: \"mysql\"\n      PHOTOPRISM_DATABASE_SERVER: \"mariadb:3306\"\n      PHOTOPRISM_DATABASE_NAME: \"photoprism\"\n      PHOTOPRISM_DATABASE_USER: \"photoprism\"\n      PHOTOPRISM_DATABASE_PASSWORD: \"insecure\"\n\n  mariadb:\n    environment:\n      MARIADB_AUTO_UPGRADE: \"1\"\n      MARIADB_INITDB_SKIP_TZINFO: \"1\"\n      MARIADB_DATABASE: \"photoprism\"\n      MARIADB_USER: \"photoprism\"\n      MARIADB_PASSWORD: \"insecure\"\n      MARIADB_ROOT_PASSWORD: \"insecure\"\n</code></pre>  <p>Set strong passwords if the database is exposed to an external network. Never expose your database to the public Internet in this way, for example, if it is running on a cloud server.</p>","title":"Configuring MariaDB"},{"location":"getting-started/advanced/databases/#schema-migrations","text":"<p>An index schema migration is performed automatically every time PhotoPrism is (re)started. The following instructions may be helpful in special cases, such as when a temporary problem has prevented a successful migration:</p> <p>Run Migrations \u203a</p>","title":"Schema Migrations"},{"location":"getting-started/advanced/databases/#change-database","text":"<p>Migrate from SQLite to MariaDB \u203a</p> <p>Migrate from MariaDB to SQLite \u203a</p>  <p>Bad Performance</p> <p>Many users reporting poor performance and high CPU usage have migrated from SQLite to MariaDB, so their database schema is no longer optimized for performance. For example, MariaDB cannot handle rows with <code>text</code> columns in memory and always uses temporary tables on disk if there are any.</p> <p>If this is the case, please make sure that your migrated database schema matches that of a fresh, non-migrated installation. It may help to run the migrations manually in a terminal using the migrations subcommands. However, this does not guarantee that all issues such as missing indexes are resolved.</p> <p>Due to the amount of time required to review each report, we can only offer this to eligible sponsors and business customers, and not to users who have chosen our free community edition.</p> <p>Get Performance Tips \u203a View Database Schema \u203a </p>","title":"Change Database"},{"location":"getting-started/advanced/kubernetes/","text":"<p>For advanced users only: The instructions for these migrations were provided by a contributor and are not part of the original software distribution. As such, they have not been officially released, recommended, or extensively tested by us. You can contribute by clicking  to send a pull request with your changes.</p> <p>Running PhotoPrism on a Kubernetes cluster is straightforward.</p> <p>At a minimum, you can just define a Kubernetes <code>Service</code> and a <code>StatefulSet</code> and be up and running. For more real-world usage, you'll probably want to at least include persistent storage, and possibly some <code>Ingress</code> rules for exposing PhotoPrism outside your cluster.</p> <p>For those familiar with Helm, a PhotoPrism Helm chart is available.</p> <p>Once you've got PhotoPrism deployed, you can <code>exec</code> into the running container and <code>photoprism import</code> your photos.</p> <p>Here's an example of a YAML file that creates the following Kubernetes objects:</p> <ul> <li><code>Namespace</code></li> <li><code>Service</code> exposing PhotoPrism on port 80</li> <li><code>StatefulSet</code> with persistent NFS volumes</li> <li><code>Secret</code> which stores the database DSN and admin password</li> <li><code>Ingress</code> rule for a Kubernetes ingress controller</li> <li>Annotations for a Kubernetes <code>Certificate Manager</code></li> </ul> <pre><code>apiVersion: v1\nkind: Namespace\nmetadata:\n  name: photoprism\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: photoprism-secrets\n  namespace: photoprism\nstringData:\n  PHOTOPRISM_ADMIN_PASSWORD: &lt;your admin password here&gt;\n  PHOTOPRISM_DATABASE_DSN: username:password@tcp(db-server-address:3306)/dbname?charset=utf8mb4,utf8&amp;parseTime=true\n---\napiVersion: apps/v1\nkind: StatefulSet\nmetadata:\n  name: photoprism\n  namespace: photoprism\nspec:\n  selector:\n    matchLabels:\n      app: photoprism\n  serviceName: photoprism\n  replicas: 1\n  template:\n    metadata:\n      labels:\n        app: photoprism\n    spec:\n      containers:\n      - name: photoprism\n        image: photoprism/photoprism:latest\n        env:\n        - name: PHOTOPRISM_DEBUG\n          value: \"true\"\n        - name: PHOTOPRISM_CACHE_PATH\n          value: /assets/cache\n        - name: PHOTOPRISM_IMPORT_PATH\n          value: /assets/photos/import\n        - name: PHOTOPRISM_EXPORT_PATH\n          value: /assets/photos/export\n        - name: PHOTOPRISM_ORIGINALS_PATH\n          value: /assets/photos/originals\n        - name: PHOTOPRISM_DATABASE_DRIVER\n          value: mysql\n        - name: PHOTOPRISM_HTTP_HOST\n          value: 0.0.0.0\n        - name: PHOTOPRISM_HTTP_PORT\n          value: \"2342\"\n        # Load database DSN &amp; admin password from secret\n        envFrom:\n        - secretRef:\n            name: photoprism-secrets\n            optional: false\n        ports:\n        - containerPort: 2342\n          name: http\n        volumeMounts:\n        - mountPath: /assets/photos/originals\n          name: originals\n          subPath: media/photos\n        - mountPath: /assets/cache\n          name: photoprism\n          subPath: cache\n        - mountPath: /assets/photos/import\n          name: photoprism\n          subPath: import\n        - mountPath: /assets/photos/export\n          name: photoprism\n          subPath: export\n        readinessProbe:\n          httpGet:\n            path: /api/v1/status\n            port: http\n      volumes:\n      - name: originals\n        nfs:\n          path: /share\n          readOnly: true\n          server: my.nas.host\n      - name: photoprism\n        nfs:\n          path: /photoprism\n          server: my.nas.host\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: photoprism\n  namespace: photoprism\nspec:\n  ports:\n  - name: http\n    port: 80\n    protocol: TCP\n    targetPort: http\n  selector:\n    app: photoprism\n  type: ClusterIP\n---\napiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  annotations:\n    # For nginx ingress controller:\n    kubernetes.io/ingress.class: nginx\n    # Default is very low so most photo uploads will fail\n    nginx.ingress.kubernetes.io/proxy-body-size: \"512M\"\n    # If using cert-manager:\n    certmanager.k8s.io/cluster-issuer: letsencrypt-prod\n    kubernetes.io/tls-acme: \"true\"\n  name: photoprism\n  namespace: photoprism\nspec:\n  rules:\n  - host: photoprism.my.domain\n    http:\n      paths:\n      - backend:\n          service:\n            name: photoprism\n            port:\n              name: http\n        path: /\n        pathType: Prefix\n  tls:\n  - hosts:\n    - photoprism.my.domain\n    secretName: photoprism-cert\n</code></pre> <p>To run this locally, you can use minikube or a similar local cluster deployer.</p> <p>Once your cluster is up and running with your <code>kubectl</code> commands. Simply copy the above YAML markup to a file, make the necessary changes, and use the <code>kubectl</code> CLI command to deploy:</p> <pre><code>kubectl create -f photoprism.yaml\n</code></pre> <p>If you prefer to use helm, see p80n/photoprism-helm.</p>","title":"Running PhotoPrism with Kubernetes"},{"location":"getting-started/advanced/nginx-proxy-setup/","text":"<p>For advanced users only: The instructions for these migrations were provided by a contributor and are not part of the original software distribution. As such, they have not been officially released, recommended, or extensively tested by us. You can contribute by clicking  to send a pull request with your changes.</p>  <p>Getting Support</p> <p>If you are experiencing problems with NGINX, such as failed uploads, connection errors, broken thumbnails, and video playback problems, please consider asking the NGINX community for advice, as we do not specialize in supporting their product, which is notoriously difficult to configure. Instead, we recommend using Traefik as a reverse proxy as this is easier and more convenient.</p>  <p>Using a reverse proxy in front of PhotoPrism has various benefits:</p> <ul> <li>Make use of HTTP/2</li> <li>Add encryption</li> <li>Perform traffic optimization</li> <li>Enhance security (NGINX may block dangerous request patterns the embedded Go-based HTTP server does not know about)</li> </ul> <p>If you consider exposing your PhotoPrism instance to the evil internet, you should at least secure it with a proper HTTPS encryption.</p> <p>This guide aims for a little more advanced setup, with good security in mind.</p> <p>Trough the entire guide we use <code>photoprism.example.com</code> as domain. You have to change all these occurrences with your own domain / DynDNS.</p> <p>Also, this was all tested on <code>ubuntu/20.04</code> - But the commands should work on a lot of other versions as well. If you use CentOS, SuSE, or any other distro, look up the commands for your package manager.</p>","title":"Advanced NGINX Proxy Setup"},{"location":"getting-started/advanced/nginx-proxy-setup/#setup","text":"","title":"Setup"},{"location":"getting-started/advanced/nginx-proxy-setup/#domain-setup","text":"<p>First, we need to decide what we want to use as domain / address. We will use a proper domain in this guide, but it will technically also work with just a static IP address. </p> <p>If you're lucky enough to have your own domain, just create a subdomain and use this for PhotoPrism.</p> <p>If you want to expose your instance hosted at home, just use a DynDNS  provider (just duckduckgo it, there a multiple ones that are free).</p>  <p>Tip</p> <p>if you're new to DynDNS it might be good to know that most routers do support DynDNS.  Therefore only minimal setup is required. Just search for <code>your router name + DynDNS</code> ;)</p>","title":"Domain setup"},{"location":"getting-started/advanced/nginx-proxy-setup/#install-nginx-on-your-machine","text":"<p>If not already done, install the webserver on your machine which you wish to use as proxy.  This also can be the same host that is running the docker container. <pre><code>apt-get update &amp;&amp; apt-get install -y nginx apache2-utils\n</code></pre></p>  <p>Info</p> <p>We use <code>apache2-utils</code> later for the password generation of the optional extra security with http basic auth.</p>","title":"Install NGINX on your machine"},{"location":"getting-started/advanced/nginx-proxy-setup/#acquire-a-certificate","text":"","title":"Acquire a certificate"},{"location":"getting-started/advanced/nginx-proxy-setup/#install-cerbot","text":"<p>Luckily nowadays there is a free certificate authority called Let's Encrypt. You can just use  their <code>certbot</code> tool and acquire a new certificate in seconds.</p> <p>For Ubuntu / Debian the package is directly in the repository. Therefore, you can easily install it using this command: </p> <pre><code>apt-get update &amp;&amp; apt-get install -y certbot python3-certbot-nginx\n</code></pre>","title":"Install cerbot"},{"location":"getting-started/advanced/nginx-proxy-setup/#generate-the-certificate","text":"<p>Now, just request a new certificate by using this command: </p> <pre><code>certbot -d photoprism.example.com\n</code></pre> <p>After that you should have a new certificate in: <code>/etc/letsencrypt/live/photoprism.example.com/</code></p>  <p>Note</p> <p>In order for Let's Encrypt to work, the server has to be accessible from the internet on port 443</p>   <p>Tip</p> <p>Please refer to Let's Encrypts documentation for automated certificate renewal. The certificates are valid for around 90 days.</p>","title":"Generate the certificate"},{"location":"getting-started/advanced/nginx-proxy-setup/#setup-nginx","text":"<p>Now that we have our certificate its time to setup the NGINX itself. Since it is best practice to create a configuration file per application / domain, this is exactly what we gonna do.</p> <p>Create a new file <code>/etc/nginx/sites-enabled/photoprism.example.com</code> and put the following content in it. Keep in mind to change the domain (there a multiple entries!) <pre><code># PhotoPrism Nginx config with SSL HTTP/2 and reverse proxy\n# This file gives you an example on how to secure you PP instance with SSL\nserver {\n    # listen 80; # If you really need HTTP (unsecure) remove the \"#\" on the beginning. Not recommended!\n    # listen [::]:80; # HTTP IPv6\n\n    listen 443 ssl http2; # Listen on port 443 and enable ssl and HTTP/2\n    listen [::]:443 ssl http2; # Same for IPv6\n\n    # Put your domain name in here.\n    server_name  photoprism.example.com;\n\n    # - - - - - - - - - -\n    # SSL security\n    # - - - - - - - - - -\n    ssl_certificate          /etc/letsencrypt/live/photoprism.example.com/fullchain.pem;\n    ssl_certificate_key      /etc/letsencrypt/live/photoprism.example.com/privkey.pem;\n\n    # Since the PP API is also used on Android, we have to keep TLS1.2 in here for a while.\n    # A lot of the older Android devices do not support TLS1.3 yet :/\n    ssl_protocols            TLSv1.2 TLSv1.3;\n\n    # Use good and strong ciphers, disable weak and old ciphers\n    ssl_ciphers              HIGH:!RC4:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS;\n\n    # Enable HSTS (https://developer.mozilla.org/en-US/docs/Security/HTTP_Strict_Transport_Security)\n    add_header Strict-Transport-Security \"max-age=172800; includeSubdomains\";\n\n    # This checks if the certificate has been invalidated by the certificate authority\n    # You can remove this section if you use self-singed certificates...\n    # Enable OCSP stapling (http://blog.mozilla.org/security/2013/07/29/ocsp-stapling-in-firefox)\n    ssl_stapling on;\n    ssl_stapling_verify on;\n    ssl_trusted_certificate /etc/letsencrypt/live/photoprism.example.com/fullchain.pem;\n\n    # DNS Servers to use for OCSP lookups\n    resolver 8.8.8.8 1.1.1.1 9.9.9.9 valid=300s;\n    resolver_timeout 5s;\n\n    # - - - - - - - - -\n    # Reverse Proxy\n    # - - - - - - - - -\n    proxy_redirect           off;\n    proxy_set_header         X-Real-IP $remote_addr;                        # Let PP know the clients real IP\n    proxy_set_header         X-Forwarded-For $proxy_add_x_forwarded_for;    # Let PP know that a proxy did forward this request\n    proxy_set_header         Host $http_host;                               # Set Proxy host info\n\n    proxy_http_version 1.1;                                                 # Required for WebSocket connection\n    proxy_set_header Upgrade $http_upgrade;                                 # Allow protocol switch to websocket\n    proxy_set_header Connection \"upgrade\";                                  # Do protocol switch\n    proxy_set_header X-Forwarded-Proto $scheme;                             # Let PP know that this connection used HTTP or HTTPS\n\n    client_max_body_size 500M;                                              # Bump the max body size, you may want to upload huge stuff via the upload GUI\n    proxy_buffering off;                                                    # Do not hold back the request while the client sends data, give the stream directly to PP\n\n    location / {\n            # Optional; additional protection with Basic Auth.\n            # Note: This breaks WebDAV without additional configuration\n            #       You also have to create a .htpasswd file using the command:\n            #       \"htpasswd -c /etc/nginx/.pp_htpasswd my_secret_user\"\n            # - - -\n            # auth_basic           \"PhotoPrism Pre Auth\";\n            # auth_basic_user_file /etc/nginx/.pp_htpasswd;\n\n            # pipes the traffic to PhotoPrism\n            # Change this to your PhotoPrisms IP / DNS\n            proxy_pass http://docker.homenet:2342;\n    }\n}\n</code></pre></p> <p>Have a look at the individual comments in the configuration for a further description.</p>  <p>Tip</p> <p>Don't forget to change the PhotoPrism IP / DNS on the bottom of the config... ;)</p>  <p>Once you've changed everything you need, let's restart <code>nginx</code>:</p> <p><pre><code>service nginx restart\n</code></pre> Now, you should have access to PhotoPrism.</p>  <p>Warning</p> <p>Make sure to setup proper firewalling on the machine that is running PhotoPrism. Have a look at ufw for simple firewall rules.</p>","title":"Setup NGINX"},{"location":"getting-started/advanced/scalability/","text":"<p>Our team aims to get the most of what is there. Development and testing have been focused on smaller servers and typical home users with  less than 500,000 files.</p> <p>While PhotoPrism has been reported to run well on 24 cores or more, we can not invest a  lot of time in optimizing it for enterprise-class servers. There are more important  feature requests waiting - and most users don't actually own such hardware.</p> <p>If the primary focus was on larger servers or clusters, the current architecture might be different in some aspects, and had other tradeoffs. For example, relying on database locking and conflict resolution tends  to be inefficient with an increasing number of cores and workers. On the other hand, this simplifies application logic,  especially when running multiple instances on the same index.</p> <p>Traditional database servers like MariaDB might be slower and less powerful  than specialized NoSQL or in-memory engines. They are often better documented and easier  to maintain for the majority of users though.</p> <p>Also, there is no native support for sharding or cloud storage APIs like S3.  Instead, PhotoPrism prefers a fast, local solid-state drive. Support for S3 may be added for backing up originals later.</p> <p>We are happy to assist if you need a custom solution  that runs well in a corporate cloud environment.</p>","title":"Scalability, Distributed Computing and Cloud Storage"},{"location":"getting-started/advanced/transcoding/","text":"<p>Note: This is contributed content intended for advanced users. You can contribute by clicking  to send a pull request with your changes.</p> <p>The encoder used by FFmpeg can be configured within your <code>docker-compose.yml</code> config file.  </p> <p>Experimental hardware accelerated transcoding on a Raspberry Pi (and compatible devices) may be enabled using the <code>h264_v4l2m2m</code> encoder:</p> <pre><code>PHOTOPRISM_FFMPEG_ENCODER: \"h264_v4l2m2m\"\n</code></pre> <p>It defaults to <code>libx264</code> if no value is set or transcoding with <code>h264_v4l2m2m</code> fails.</p> <p>Please refer to the official documentation for a full list of encoders and their implementation status.</p>  <p>Info</p> <p>Some server configurations, specifically Raspberry Pi's, may run into memory  allocation issues when using hardware acceleration.  Monitor your server logs carefully and increase available GPU and/or CMA memory  allocations if necessary. </p>  <p>The Docker container will also need access to one or more video devices. For the <code>h264_v4l2m2m</code> encoder on a Raspberry Pi, also add: <pre><code>devices:\n - \"/dev/video11:/dev/video11\"\n</code></pre></p> <p>Additional advanced configuration options:</p> <pre><code>PHOTOPRISM_FFMPEG_BUFFERS: \"64\" # FFmpeg capture buffers (default: 32)\n</code></pre>  <p>Warning</p> <p>Hardware accelerated transcoding within Photoprism is currently experimental. It may not work on all server configurations. Some users report unexpected hangs in the FFmpeg process when attempting to  transcode large video files. </p>","title":"Video Transcoding"},{"location":"getting-started/advanced/migrations/","text":"<p>When using Docker Compose, you can prepend commands like <code>docker-compose exec [service] [command]</code> to run them in a service container. Should this fail with no container found, make sure the service has been started, you have specified an existing service (usually <code>photoprism</code>) and you are in the folder where the <code>docker-compose.yml</code> file is located.</p>","title":"Performing Index Migrations"},{"location":"getting-started/advanced/migrations/#show-migration-status","text":"<p>Run the <code>photoprism migrations ls</code> command in a terminal to see a list of all migrations and their current status:</p> <pre><code>$ photoprism migrations ls\n\n|-----------------|---------|---------------------|---------------------|--------|\n|       ID        | Dialect |     Started At      |     Finished At     | Status |\n|-----------------|---------|---------------------|---------------------|--------|\n| 20211121-094727 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20211124-120008 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-030000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-040000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-050000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-060000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-061000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-070000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-071000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-080000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-081000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-083000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-090000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-091000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-093000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220421-200000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220521-000001 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220521-000002 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220521-000003 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n|-----------------|---------|---------------------|---------------------|--------|\n</code></pre>","title":"Show Migration Status"},{"location":"getting-started/advanced/migrations/#run-specific-migrations","text":"<p>To explicitly re-run specific migrations, you can pass them as arguments to the <code>photoprism migrations run</code> command:</p> <pre><code>$ photoprism migrations run 20220521-000003\n\nINFO[2022-07-12T11:45:29Z] migrate: 20220521-000003 successful [12.967654ms] \nINFO[2022-07-12T11:45:29Z] migration completed in 40.89123ms            \nINFO[2022-07-12T11:45:29Z] closed database connection \n</code></pre>","title":"Run Specific Migrations"},{"location":"getting-started/advanced/migrations/#retry-failed-migrations","text":"<p>To automatically retry previously failed migrations, pass the <code>-f</code> flag to the <code>photoprism migrations run</code> command:</p> <pre><code>$ photoprism migrations run -f\n</code></pre>","title":"Retry Failed Migrations"},{"location":"getting-started/advanced/migrations/mariadb-to-sqlite/","text":"<p>For advanced users only: The instructions for these migrations were provided by a contributor and are not part of the original software distribution. As such, they have not been officially released, recommended, or extensively tested by us. You can contribute by clicking  to send a pull request with your changes.</p> <ul> <li>Install techouse/mysql-to-sqlite3 on your host.</li> <li>Stop Photoprism: <code>docker-compose stop photoprism</code></li> <li>Add the port to the MariaDB service</li> <li>On the host now run <code>sudo mysql2sqlite -f &lt;PATH_TO_STORAGE_MOUNT&gt;/storage/index.db -d photoprism -u root --mysql-password 'insecure'</code></li> <li>Shutdown your current stack fully: <code>docker-compose down</code></li> <li>Edit your <code>docker-compose.yml</code>:</li> <li>Remove the MariaDB service.</li> <li>Change in the Photoprism settings to use the sqlite driver and remove the other database settings</li> <li>Start your stack again with <code>docker-compose up -d</code></li> <li>If this worked you may want to delete the old mountpoint for the MariaDB database.</li> </ul>  <p>Bad Performance</p> <p>Many users reporting poor performance and high CPU usage have migrated, so their database schema is no longer optimized for performance, for example, because indexes are missing or columns have the wrong data type.</p> <p>If this is the case, please make sure that your migrated database schema matches that of a fresh, non-migrated installation. It may help to run the migrations manually in a terminal using the migrations subcommands. However, this does not guarantee that all issues such as missing indexes are resolved.</p>","title":"Migrating from MariaDB to SQLite"},{"location":"getting-started/advanced/migrations/sqlite-to-mariadb/","text":"<p>For advanced users only: The instructions for these migrations were provided by a contributor and are not part of the original software distribution. As such, they have not been officially released, recommended, or extensively tested by us. You can contribute by clicking  to send a pull request with your changes.</p> <ul> <li>Install techouse/sqlite3-to-mysql on your host. (openSUSE: <code>zypper in python-sqlite3-to-mysql</code>)</li> <li>Shutdown your current stack: <code>docker-compose down</code></li> <li>Add the current snippet of the MariaDB to your Sqlite Photoprism Docker-Compose with the addition of the extra <code>ports</code>   section where you expose port 3306 to the Host. In my case this looked like attachment 1.</li> <li>Start the stack again: <code>docker-compose up -d</code></li> <li>Stop Photoprism: <code>docker-compose stop photoprism</code></li> <li>On the host now run <code>sudo sqlite3mysql -f &lt;PATH_TO_STORAGE_MOUNT&gt;/storage/index.db -d photoprism -u root --mysql-password 'insecure'</code></li> <li>Shutdown your current stack again: <code>docker-compose down</code></li> <li>Edit your <code>docker-compose.yml</code> so it uses the MariaDB database you added before. Don't forget to remove the <code>ports</code>   section of the MariaDB Container.</li> <li>Start your stack again with <code>docker-compose up -d</code></li> <li>If this worked you may want to delete the file <code>index.db</code> in the <code>storage</code> mount since it contains out of date   information.</li> </ul> <p>Attachment 1:</p> <pre><code>services:\n  mariadb:\n    restart: unless-stopped\n    image: mariadb:10.8\n    ports:\n      - 3306:3306 # Expose Port 3306 \n    security_opt:\n      - seccomp:unconfined\n      - apparmor:unconfined\n    command: mysqld --innodb-buffer-pool-size=1G &gt;\n      --transaction-isolation=READ-COMMITTED --character-set-server=utf8mb4\n      --collation-server=utf8mb4_unicode_ci --max-connections=512\n      --innodb-rollback-on-timeout=OFF --innodb-lock-wait-timeout=120\n    volumes:\n      - \"./database:/var/lib/mysql\" # DO NOT REMOVE\n    environment:\n      MARIADB_AUTO_UPGRADE: \"1\"\n      MARIADB_INITDB_SKIP_TZINFO: \"1\"\n      MARIADB_DATABASE: \"photoprism\"\n      MARIADB_USER: \"photoprism\"\n      MARIADB_PASSWORD: \"insecure\"\n      MARIADB_ROOT_PASSWORD: \"insecure\"\n</code></pre>  <p>Bad Performance</p> <p>Many users reporting poor performance and high CPU usage have migrated from SQLite to MariaDB, so their database schema is no longer optimized for performance. For example, MariaDB cannot handle rows with <code>text</code> columns in memory and always uses temporary tables on disk if there are any.</p> <p>If this is the case, please make sure that your migrated database schema matches that of a fresh, non-migrated installation. It may help to run the migrations manually in a terminal using the migrations subcommands. However, this does not guarantee that all issues such as missing indexing are resolved.</p> <p>View Database Schema \u203a </p>","title":"Migrating from SQLite to MariaDB"},{"location":"getting-started/cloud/digitalocean/","text":"<p>PhotoPrism can be deployed at DigitalOcean with just a few clicks. If you have no DigitalOcean account yet, you may use this sign-up link to receive a $100, 60-day account credit:</p> <p> Sign up at DigitalOcean </p>","title":"Using our DigitalOcean 1-Click App"},{"location":"getting-started/cloud/digitalocean/#install-photoprism","text":"<ul> <li>Sign Up or Log In at DigitalOcean</li> <li>Open the PhotoPrism listing in the marketplace</li> <li>Click Create PhotoPrism Droplet</li> </ul> <p></p>","title":"Install PhotoPrism"},{"location":"getting-started/cloud/digitalocean/#configure-your-droplet","text":"","title":"Configure Your Droplet"},{"location":"getting-started/cloud/digitalocean/#choose-an-image","text":"<p>The PhotoPrism image will be pre-selected</p> <p></p>","title":"Choose an Image"},{"location":"getting-started/cloud/digitalocean/#choose-a-plan","text":"<p>We recommend hosting PhotoPrism on a server with at least 2 cores and 3 GB of physical memory. Indexing and searching can be slow on smaller Droplets, depending on how many and what types of files you upload.</p>  <p>While PhotoPrism has been reported to work on Droplets with less memory, we take no responsibility for instability or performance problems. RAW image conversion and TensorFlow are disabled on Droplets with 1 GB or less memory.</p>  <p></p>","title":"Choose a Plan"},{"location":"getting-started/cloud/digitalocean/#choose-a-datacenter-region","text":"<p></p> <p></p>","title":"Choose a Datacenter Region"},{"location":"getting-started/cloud/digitalocean/#choose-an-authentication-mode","text":"<p></p>","title":"Choose an Authentication Mode"},{"location":"getting-started/cloud/digitalocean/#finalize-your-droplet","text":"<p>Finalize your droplet and click Create Droplet </p> <p></p> <p>Your droplet is now being created.</p>","title":"Finalize Your Droplet"},{"location":"getting-started/cloud/digitalocean/#admin-password","text":"<ul> <li>Click More</li> </ul> <p></p> <ul> <li>Click Access console</li> </ul> <p></p> <ul> <li>Launch the console as root</li> </ul> <p></p> <ul> <li>Within the console type <code>cat /root/.initial-password.txt</code> and click enter</li> <li>Copy your initial password</li> </ul>","title":"Admin Password"},{"location":"getting-started/cloud/digitalocean/#open-photoprism","text":"<ul> <li>Click Get started</li> </ul> <p></p> <ul> <li>Click Quick access</li> </ul> <p></p>  <p>Info</p> <p>In case you have no domain and let's encrypt set up you will see the notice \"Your connection is not private\".  Click Advanced and click Open page.</p>  <ul> <li>Use username \"admin\" and your initial password to sign in</li> <li>You may change your password using the Web UI</li> </ul>","title":"Open PhotoPrism"},{"location":"getting-started/cloud/digitalocean/#first-steps","text":"<ol> <li>Configure library and advanced settings according to your needs.</li> <li>Choose whether you want to index your originals so that the existing file and folder names are preserved, or import them so that they are automatically organized by year and month.</li> <li>To add new pictures, you can either copy them to the import or originals folder e.g. using WebDAV, or upload them with a browser, which will import them automatically after upload.</li> <li>Start indexing or importing</li> <li>Finally, set up automatic syncing from your mobile phone and install the Progressive Web App (PWA) on your desktop, tablet, and phone home screens as needed.</li> </ol>","title":"First Steps"},{"location":"getting-started/cloud/pikapods/","text":"<p>Trusted Partner</p> <p>PhotoPrism has partnered with PikaPods to offer you this officially supported, cloud-hosted solution. Your personal app instance is ready to use in just a few steps and includes sponsor features like interactive world maps and dark themes - at no additional cost! New customers also currently receive a $5 welcome credit.</p>","title":"PikaPods Open Source App Hosting"},{"location":"getting-started/cloud/pikapods/#setup","text":"<p>This step-by-step guide explains how to set up a new PhotoPrism instance at PikaPods.</p>","title":"Setup"},{"location":"getting-started/cloud/pikapods/#1-create-account","text":"<p>Sign up at www.pikapods.com/register with your contact details. You will then receive a confirmation email with an activation link that you must click to continue.</p> <p>Before proceeding, please also provide your credit card details to avoid usage restrictions.</p>","title":"1. Create Account"},{"location":"getting-started/cloud/pikapods/#2-add-your-pod","text":"<ul> <li>Go to Available Apps and select PhotoPrism </li> <li>Click Run Your Own</li> </ul> <p></p> <ul> <li>Enter a Pod Name and select a Region</li> </ul> <p></p> <ul> <li>Click ENV VARS to specify the initial password for the \"admin\" user account</li> </ul> <p></p> <ul> <li>In RESOURCES, you can configure the storage space available for photos and videos, as well as the compute resources PhotoPrism can use, such as for indexing and face recognition</li> </ul>  <p>PhotoPrism currently requires at least 2 CPUs and 8 GB of memory. We are working to lower these minimum requirements.</p>  <ul> <li>The approximate price per month is shown at the bottom</li> </ul> <p></p> <ul> <li>Click Add Pod to complete the setup</li> </ul>","title":"2. Add Your Pod"},{"location":"getting-started/cloud/pikapods/#3-sign-in","text":"<p>PhotoPrism is now fully set up and ready to use. To log in, click Open Pod, enter the username \"admin\" and the password you have specified:</p> <p></p>","title":"3. Sign In"},{"location":"getting-started/cloud/pikapods/#first-steps","text":"<ol> <li>Configure library and advanced settings according to your needs.</li> <li>Choose whether you want to index your originals so that the existing file and folder names are preserved, or import them so that they are automatically organized by year and month.</li> <li>To add new pictures, you can either copy them to the import or originals folder e.g. using WebDAV, or upload them with a browser, which will import them automatically after upload.</li> <li>Start indexing or importing</li> <li>Finally, set up automatic syncing from your mobile phone and install the Progressive Web App (PWA) on your desktop, tablet, and phone home screens as needed.</li> </ol>","title":"First Steps"},{"location":"getting-started/nas/openmediavault/","text":"<p>Should you experience problems with the installation, we recommend that you ask the openmediavault community for advice, as we cannot provide support for third-party software and services.</p>  <p>PhotoPrism can be conveniently installed using the openmediavault plugin.</p> <p></p>  <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>","title":"Running PhotoPrism on openmediavault"},{"location":"getting-started/nas/qnap/","text":"<p>Should you experience problems with the installation, we recommend that you ask the QNAP community for advice, as we cannot provide support for third-party software and services.</p>  <p>You can follow this tutorial to install PhotoPrism on QNAP:</p> <p>\u21aa https://safjan.com/install-photoprism-on-qnap-nas-using-docker-compose/</p>  <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>","title":"Setting Up PhotoPrism on QNAP"},{"location":"getting-started/nas/synology/","text":"<p>Should you experience problems with the installation, we recommend that you ask the Synology community for advice, as we cannot provide support for third-party software and services.</p>  <p>Visit the Synology Knowledge Base to learn what kind of CPU and how much memory your device has. We recommend hosting PhotoPrism on a 64-bit system with at least 2 cores and 3 GB of physical memory. High-resolution panoramic images may require additional swap space and/or physical memory above the recommended minimum.</p> <p>RAW image conversion and TensorFlow are disabled on devices with 1 GB or less memory. You will have to resort to 32-bit Docker images to run  PhotoPrism and MariaDB on ARMv7-based entry-level devices like the Synology DS218j.</p>  <p>Indexing large photo and video collections significantly benefits from local SSD storage and plenty of memory for caching. Especially the conversion of RAW images and the transcoding of videos are very demanding. We take no responsibility for instability or performance problems if your device does not meet the requirements.</p>","title":"Running PhotoPrism on a Synology NAS"},{"location":"getting-started/nas/synology/#setup-using-docker","text":"<p>The Synology user interface has been updated in the meantime, so the screenshots from the tutorial below may be outdated. Also, we recommend using mariadb instead of SQlite.</p> <p>Since we don't have a Synology test device, contributions to a step-by-step tutorial are greatly appreciated. You can contribute by clicking  to send a pull request with your changes.</p>  <p>You can follow these instructions to install PhotoPrism on your Synology NAS:</p> <p>https://www.wundertech.net/how-to-setup-photoprism-on-a-synology-nas</p>","title":"Setup using Docker"},{"location":"getting-started/nas/synology/#will-my-device-be-fast-enough","text":"<p>This largely depends on your expectations and the number of files you have. Most users report that PhotoPrism runs well on their Synology NAS. However, you should keep in mind:</p> <ul> <li>initial indexing may take longer than on standard desktop computers</li> <li>the hardware has no video transcoding support and software transcoding is generally slow</li> </ul>","title":"Will my device be fast enough?"},{"location":"getting-started/nas/synology/#troubleshooting","text":"<p>If your device runs out of memory, the index is frequently locked, or other system resources are running low:</p> <ul> <li> Try reducing the number of workers by setting <code>PHOTOPRISM_WORKERS</code> to a reasonably small value in <code>docker-compose.yml</code>, depending on the performance of your device</li> <li> Make sure your device has at least 4 GB of swap space so that indexing doesn't cause restarts when memory usage spikes; RAW image conversion and video transcoding are especially demanding</li> <li> If you are using SQLite, switch to MariaDB, which is better optimized for high concurrency</li> <li> As a last measure, you can disable the use of TensorFlow for image classification and facial recognition</li> </ul> <p>Other issues? Our troubleshooting checklists help you quickly diagnose and solve them.</p>   <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>","title":"Troubleshooting"},{"location":"getting-started/nas/unraid/","text":"<p>Should you experience problems with the installation, we recommend that you ask the Unraid community for advice, as we cannot provide support for third-party software and services.</p>  <p>We recommend you follow this tutorial provided by IBRACORP to install PhotoPrism on Unraid:</p> <p></p>  <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>","title":"Setting Up PhotoPrism on Unraid"},{"location":"getting-started/ports/freebsd/","text":"<p>Should you experience problems with the installation, we recommend that you ask the FreeBSD community for advice, as we cannot provide support for third-party software and services.</p>  <p>For FreeBSD / FreeNAS users, an unofficial PhotoPrism port  is available.</p> <p>The port will compile and install libtensorflow 1.15.2 and build <code>photoprism</code> from source on FreeBSD.</p> <p>1. Clone or download the port:</p> <pre><code>git clone https://github.com/huo-ju/photoprism-freebsd-port\n</code></pre> <p>2. Build TensorFlow and PhotoPrism from source, then install:</p> <pre><code>cd photoprism-freebsd-port\nmake config\nmake &amp;&amp; make install\n</code></pre> <p>When running the make config command, a CPU feature options dialog will be presented, and the default option is NONE.</p> <p>3. Add entries to rc.conf:</p> <pre><code>photoprism_enable=\"YES\"\nphotoprism_assetspath=\"/var/photoprism/assets\"\nphotoprism_storagepath=\"/var/photoprism/storage\"\n</code></pre> <p>You can add more command line parameters into photoprism_flags=\"\" in the rc.conf</p> <p><code>photoprism config</code> shows all config parameters. </p> <p>4. Start the service:</p> <pre><code>service photoprism start\n</code></pre> <p>Done!</p>  <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>","title":"Running PhotoPrism On FreeBSD"},{"location":"getting-started/proxies/apache-2/","text":"<p>Should you experience problems with Apache, we recommend that you ask the Apache community for advice, as we cannot provide support for third-party software and services.</p>   <p>Example</p> <pre><code>ProxyPass /api/v1/ws ws://photoprism.lxd:2342/api/v1/ws\nProxyPassReverse /api/v1/ws ws://photoprism.lxd:2342/api/v1/ws\nProxyPass / http://photoprism:2342/\nProxyPassReverse / http://photoprism:2342/\nProxyRequests off\n</code></pre>  <p>The official documentation explains in detail, how to configure Apache Web Server 2.4 to reverse proxy WebSockets.</p>","title":"Using Apache 2.4 as Reverse Proxy"},{"location":"getting-started/proxies/apache-2/#why-use-a-proxy","text":"<p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted  by anyone, including your provider, hackers, and governments. Backup tools and file sync apps may refuse to  connect as well.</p>  <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>","title":"Why Use a Proxy?"},{"location":"getting-started/proxies/caddy-1/","text":"<p>Should you experience problems with Caddy, we recommend that you ask the Caddy community for advice, as we cannot provide support for third-party software and services.</p>  <p>For PhotoPrism to work properly, you need to enable websockets and transparent proxying:</p>  <p>Example</p> <pre><code>example.com {\n    proxy / photoprism:2342 {\n        websocket\n        transparent\n    }\n}\n</code></pre>  <p>Please refer to the official documentation for further details.</p>","title":"Using Caddy 1 as Reverse Proxy"},{"location":"getting-started/proxies/caddy-1/#why-use-a-proxy","text":"<p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted by anyone, including your provider, hackers, and governments. Backup tools and file sync apps may refuse to connect as well.</p>  <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>","title":"Why Use a Proxy?"},{"location":"getting-started/proxies/caddy-2/","text":"<p>Should you experience problems with Caddy, we recommend that you ask the Caddy community for advice, as we cannot provide support for third-party software and services.</p>  <p>WebSocket proxying automatically works in Caddy 2. There is no need to enable this as necessary for Caddy 1, Apache, and NGINX. In addition, Caddy 2 may automatically create  and update Let's Encrypt HTTPS certificates.</p>  <p>Example</p> <pre><code>example.com {\n    reverse_proxy photoprism:2342\n}\n</code></pre>  <p>Please refer to the official documentation for further details.</p>","title":"Using Caddy 2 as Reverse Proxy"},{"location":"getting-started/proxies/caddy-2/#why-use-a-proxy","text":"<p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted by anyone, including your provider, hackers, and governments. Backup tools and file sync apps may refuse to connect as well.</p>  <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>","title":"Why Use a Proxy?"},{"location":"getting-started/proxies/haproxy/","text":"<p>Should you experience problems with Haproxy, we recommend that you ask the Haproxy community for advice, as we cannot provide support for third-party software and services.</p>  <pre><code>#frontend connection handling\n#'photo' is the name of the subdomain\nacl photo hdr(host) -i photo.example.com\nuse_backend be_photo_ipvANY if photo aclcrt_fe_http\n\n#backend config\n#be_photo is the name of the backend\nbackend be_photo_ipvANY\nmode http\nid 112\nlog global\ntimeout connect 30000\ntimeout server 30000\nretries 3\nload-server-state-from-file global\ntimeout queue 5s\ntimeout tunnel 2m\noption redispatch\n\nmode http\noption forwardfor\nno option httpclose\n\nhttp-request set-header Host photo.example.com\nhttp-request del-header  X-Frame-Options\nhttp-request del-header  Connection\nhttp-request add-header  X-Frame-Options SAMEORIGIN\nhttp-request add-header  Connection Upgrade\n             # Websocket configuration\n             acl is_websocket hdr(Upgrade) -i WebSocket\nacl is_websocket hdr_beg(Host) -i ws\n             # photoprism ip address and port\nserver photo x.x.x.x:2342 id 106  \n</code></pre>  <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>","title":"Using HAPROXY as Reverse Proxy"},{"location":"getting-started/proxies/nginx/","text":"<p>If you are experiencing problems with NGINX, such as failed uploads, connection errors, broken thumbnails, and video playback problems, please consider asking the NGINX community for advice, as we do not specialize in supporting their product, which is notoriously difficult to configure. Instead, we recommend using Traefik as a reverse proxy as this is easier and more convenient.</p>  <p>This tutorial explains, how to configure NGINX WebSocket connections between your client and backend services.</p>  <p>Example</p> <pre><code>http {\n  server {\n    listen 80 ssl;\n    listen [::]:80 ssl;\n    server_name example.com\n    client_max_body_size 500M;\n\n    # With SSL via Let's Encrypt\n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem; # managed by Certbot\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem; # managed by Certbot\n    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot\n    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot\n\n    location / {\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n      proxy_set_header Host $host;\n\n      proxy_pass http://photoprism:2342;\n\n      proxy_buffering off;\n      proxy_http_version 1.1;\n      proxy_set_header Upgrade $http_upgrade;\n      proxy_set_header Connection \"upgrade\";\n\n      client_max_body_size 500M;\n    }\n  }\n}\n</code></pre>  <p>At the very least you will need to adapt <code>server_name</code> and the <code>ssl_certificate</code>/<code>ssl_certificate_key</code> paths to match your setup. Please refer to their official documentation for further details.</p>","title":"Using NGINX as Reverse Proxy"},{"location":"getting-started/proxies/nginx/#why-use-a-proxy","text":"<p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted by anyone, including your provider, hackers, and governments. Backup tools and file sync apps may refuse to connect as well.</p>  <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>","title":"Why Use a Proxy?"},{"location":"getting-started/proxies/swag/","text":"<p>Should you experience problems with Swag, we recommend that you ask the Swag community for advice, as we cannot provide support for third-party software and services.</p>  <p>To simplify the setup of a reverse HTTPS proxy, Linuxserver.io developed SWAG.</p> <p>SWAG - Secure Web Application Gateway (formerly known as letsencrypt, no relation to Let's Encrypt\u2122) sets up a Nginx web server and reverse proxy with PHP support and a built-in certbot client that automates free SSL server certificate generation and renewal processes (Let's Encrypt and ZeroSSL). It also contains fail2ban for intrusion prevention.</p>","title":"Using SWAG as Reverse Proxy"},{"location":"getting-started/proxies/swag/#setup","text":"","title":"Setup"},{"location":"getting-started/proxies/swag/#step-1-get-a-domain","text":"<p>The first step is to grab a dynamic DNS if you don't have your own subdomain already. You can get this from for example DuckDNS.</p>","title":"Step 1: Get a domain"},{"location":"getting-started/proxies/swag/#step-2-set-up-swag","text":"<p>Then you will need to set up SWAG, the variables of the docker-compose are explained on the Github page of SWAG. This is an example of how to set it up using duckdns and docker-compose. </p>  <p>docker-compose.yml</p> <pre><code>version: \"2.1\"\nservices:\n swag:\n image: ghcr.io/linuxserver/swag\n container_name: swag\n        cap_add:\n        - NET_ADMIN\n    environment:\n        - PUID=1000\n        - PGID=1000\n        - TZ=Europe/Brussels\n        - URL=&lt;mydomain.duckdns&gt;\n        - SUBDOMAINS=wildcard\n        - VALIDATION=duckdns\n        - CERTPROVIDER= #optional\n        - DNSPLUGIN= #optional\n        - DUCKDNSTOKEN=&lt;duckdnstoken&gt; \n        - EMAIL=&lt;e-mail&gt; #optional\n        - ONLY_SUBDOMAINS=false #optional\n        - EXTRA_DOMAINS=&lt;extradomains&gt; #optional\n        - STAGING=false #optional\n        volumes:\n        - /etc/config/swag:/config\n        ports:\n        - 443:443\n        restart: unless-stopped\n</code></pre>  <p>Don't forget to change the <code>mydomain.duckdns</code> into your personal domain and the <code>duckdnstoken</code> into your token and remove the brackets.</p>","title":"Step 2: Set-up SWAG"},{"location":"getting-started/proxies/swag/#step-3-change-the-config-files","text":"<p>Navigate to the config folder of SWAG and head to <code>proxy-confs</code>. If you used the example above, you should navigate to: <code>/etc/config/swag/nginx/proxy-confs/ </code>. There are a lot of preconfigured files to use for different apps such as radarr,sonarr,overseerr,... </p> <p>To use the bundled configuration file, simply rename <code>photoprism.subdomain.conf.sample</code> in the proxy-confs folder to <code>photoprism.subdomain.conf</code>. Alternatively, you can create a new file <code>photoprism.subdomain.conf</code> in proxy-confs with the following configuration:</p>  <p>photoprism.subdomain.conf</p> <pre><code>server {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n\n    server_name photoprism.*;\n\n    include /config/nginx/ssl.conf;\n\n    client_max_body_size 0;\n\n    location / {\n        include /config/nginx/proxy.conf;\n        resolver 127.0.0.11 valid=30s;\n        set $upstream_app photoprism;\n        set $upstream_port 2342;\n        set $upstream_proto http;\n        proxy_pass $upstream_proto://$upstream_app:$upstream_port;\n        }\n\n}   \n</code></pre>","title":"Step 3: Change the config files"},{"location":"getting-started/proxies/swag/#step-4-port-forward-port-443","text":"<p>Since SWAG allows you to set up a secure connection, you will need to open port 443 on your router for encrypted traffic. This is way more secure than port 80 for http.</p>","title":"Step 4: Port-forward port 443"},{"location":"getting-started/proxies/swag/#step-5-restart-swag","text":"<p>When you change anything in the config of Nginx, you will need to restart the container using <code>docker restart swag</code>. If everything went well, you can now access photoprism on the subdomain you configured: photoprism.mydomain.duckdns.org</p>  <p>Attention</p> <p>The docker-container of photoprism won't be named \"photoprism\", it will be \"name_photoprism\". To check this, execute <code>docker ps</code> and check wether it is named \"photoprism\". If it's not, go to your docker-compose file and add the following line to photoprism below 'image' <code>container_name=photoprism</code>. Restart swag afterwards. Keep in mind to not have two photoprism containers with the same name!  You could also change the config file of Swag with the right name in the proxy-confs directory.</p>","title":"Step 5: Restart SWAG"},{"location":"getting-started/proxies/swag/#why-use-a-proxy","text":"<p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted by anyone, including your provider, hackers, and governments. Backup tools and file sync apps may refuse to connect as well.</p>  <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>","title":"Why Use a Proxy?"},{"location":"getting-started/proxies/traefik/","text":"<p>Best Choice</p> <ul> <li>No special settings required in combination with modern web applications</li> <li>WebSocket proxying automatically works</li> <li>Traefik can create and update Let's Encrypt HTTPS certificates for you</li> </ul>  <p>Our example shows a working configuration, excluding general PhotoPrism config options  documented in Setup Using Docker Compose:</p>  <p>docker-compose.yml</p> <pre><code>services:\n  traefik:\n    image: traefik:v2.5\n    restart: unless-stopped\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - \"./traefik.yaml:/etc/traefik/traefik.yaml\"\n      - \"./traefik/data:/data\"\n      - \"/var/run/docker.sock:/var/run/docker.sock\"\n\n  photoprism:\n    image: photoprism/photoprism:latest\n    restart: unless-stopped\n    labels:\n      - \"traefik.http.routers.photoprism.rule=Host(`example.com`)\"\n      - \"traefik.http.routers.photoprism.tls=true\"\n      - \"traefik.http.routers.photoprism.tls.certresolver=myresolver\"\n    volumes:\n      - \"./originals:/photoprism/originals\"\n      - \"./storage:/photoprism/storage\"\n    environment:\n        PHOTOPRISM_SITE_URL: \"https://example.com/\"\n</code></pre>   <p>traefik.yaml</p> <pre><code>entryPoints:\n  web:\n    address: \":80\"\n    http:\n      redirections:\n        entryPoint:\n          to: websecure\n  websecure:\n    address: \":443\"\n\nproviders:\n  docker: {}\n\ncertificatesResolvers:\n  myresolver:\n    acme:\n      email: you@example.com\n      storage: /data/letsencrypt.json\n      httpChallenge:\n        entryPoint: web\n</code></pre>  <p>Please refer to the official documentation for further details.</p>","title":"Using Traefik as Reverse Proxy"},{"location":"getting-started/proxies/traefik/#why-use-a-proxy","text":"<p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted by anyone, including your provider, hackers, and governments. Backup tools and file sync apps may refuse to connect as well.</p>  <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>","title":"Why Use a Proxy?"},{"location":"getting-started/raspberry-pi/microsd-image/","text":"<p> The easiest way to run PhotoPrism on a Raspberry Pi is with PhotoPrismPi.1 Simply flash the image to an SD card and boot your device with it.</p> <p>We recommend using a fast MicroSD card with at least 64 GB so that you don't run out of storage space later on. These are usually sold with an adapter that fits into normal SD card slots.</p>","title":"MicroSD Image for the Raspberry Pi"},{"location":"getting-started/raspberry-pi/microsd-image/#step-1-install-balenaetcher","text":"<p>Etcher is a powerful OS image flasher that makes flashing an SD card a pleasant and safe experience. You can download it from the official website or GitHub:</p> <ul> <li>https://www.balena.io/etcher/</li> <li>https://github.com/balena-io/etcher/releases</li> </ul>","title":"Step 1: Install balenaEtcher"},{"location":"getting-started/raspberry-pi/microsd-image/#step-2-flash-from-url","text":"<p>Open balenaEtcher and enter the following URL as image source:</p> <pre><code>https://dl.photoprism.app/dist/photoprismpi/latest.zip\n</code></pre> <p></p> <p>When you have selected the image and inserted a suitable card into your computer, press Flash!.</p>","title":"Step 2: Flash from URL"},{"location":"getting-started/raspberry-pi/microsd-image/#step-3-boot-your-device","text":"<p>Insert the MicroSD card into the Pi, make sure your device is connected to a wired network, and turn it on. After a few minutes,2 our latest release should be ready to use when you navigate to http://photoprismpi.local/!3</p>","title":"Step 3: Boot Your Device"},{"location":"getting-started/raspberry-pi/microsd-image/#user-accounts","text":"<p>The default password for the <code>admin</code> user is <code>photoprismpi</code>. You can also connect via SSH with the user and password <code>ubuntu</code>.</p>  <p>Be sure to change both passwords immediately if your Pi is connected to a public network.</p>","title":"User Accounts"},{"location":"getting-started/raspberry-pi/microsd-image/#storage-folders","text":"<p>Uploads, sidecar and cache files are stored in <code>/srv/photoprism</code>. External drives can be connected via USB and accessed as folders <code>/mnt/a</code> to <code>/mnt/d</code> without further configuration.</p> <p>Should you want to make changes to the default settings, you can find the <code>docker-compose.yml</code> file in <code>/boot/firmware/docker-compose/photoprism</code>. After connecting via SSH with the credentials provided above, you can obtain root privileges by running <code>sudo -i</code>.</p>","title":"Storage Folders"},{"location":"getting-started/raspberry-pi/microsd-image/#https-proxy","text":"<p>Caddy is installed as a reverse proxy that can be configured in <code>/etc/caddy/Caddyfile</code>. By default, the automatically generated certificates are not recognized as valid by browsers, so you will see a warning when connecting over HTTPS.</p>   <ol> <li> <p>Based on Ubuntu Server 22.04 and CustomPiOS by Guy Sheffer.\u00a0\u21a9</p> </li> <li> <p>Download and installation time depends on the speed of your Internet connection.\u00a0\u21a9</p> </li> <li> <p>If you can't connect, try using the existing hostname or IP address instead.\u00a0\u21a9</p> </li> </ol>","title":"HTTPS Proxy"},{"location":"getting-started/troubleshooting/","text":"<p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>","title":"Troubleshooting Checklists"},{"location":"getting-started/troubleshooting/#connection-fails","text":"<p>If your browser cannot connect to the Web UI even after waiting a few minutes, run this command to display the last 100 log messages (omit <code>--tail=100</code> to see all):</p> <pre><code>docker-compose logs --tail=100\n</code></pre> <p>Before reporting a bug:</p> <ul> <li> Check the logs for messages like disk full, disk quota exceeded, no space left on device, read-only file system, error creating path, wrong permissions, no route to host, connection failed, and killed:<ul> <li> If a service has been \"killed\" or otherwise automatically terminated, this points to a memory problem (add swap and/or memory; remove or increase usage limits)</li> <li> In case the logs show \"disk full\", \"quota exceeded\", or \"no space left\" errors, either the disk containing the storage folder is full (add storage) or a disk usage limit is configured (remove or increase it)</li> <li> Errors such as \"read-only file system\", \"error creating path\", or \"wrong permissions\" indicate a filesystem permission problem</li> <li> It may help to add the <code>:z</code> mount flag to volumes when using SELinux (RedHat/Fedora)</li> <li> Log messages that contain \"no route to host\" indicate a problem with the database or Docker network configuration (follow our examples)</li> </ul> </li> <li> Make sure you are using the correct protocol (default is <code>http</code>), port (default is <code>2342</code>), and hostname or IP address (default is <code>localhost</code>)</li> <li> Note that HTTP security headers will prevent the app from loading in a frame (override them)</li> <li> Verify your computer meets the system requirements</li> <li> Go through the checklist for fatal server errors</li> </ul> <p>Should MariaDB get stuck in a restart loop and PhotoPrism can't connect to it, this indicates a memory, filesystem, or other permission issue:</p> <pre><code>mariadb: mysqld: ready for connections.\nmariadb: mysqld (initiated by: unknown): Normal shutdown\nphotoprism: dial tcp 172.18.0.2:3306: connect: no route to host\nmariadb: mysqld: Shutdown complete\n</code></pre> <p>To enable debug mode, set <code>PHOTOPRISM_DEBUG</code> to <code>true</code> in the <code>environment:</code> section of the <code>photoprism</code> service (or use the <code>--debug</code> flag when running the <code>photoprism</code> command directly):</p> <pre><code>services:\n  photoprism:\n    environment:\n      PHOTOPRISM_DEBUG: \"true\"\n</code></pre> <p>Then restart all services for the changes to take effect. It can be helpful to keep Docker running in the foreground while debugging so that log messages are displayed directly. To do this, omit the <code>-d</code> parameter when restarting:</p> <pre><code>docker-compose stop\ndocker-compose up \n</code></pre>  <p>If you see no errors or no logs at all, you may have started the server on a different host and/or port. There could also be an issue with your browser, browser plugins, firewall settings, or other tools you may have installed.</p>   <p>The default Docker Compose config filename is <code>docker-compose.yml</code>. For simplicity, it doesn't need to be specified when running the <code>docker-compose</code> command in the same directory. Config files for other apps or instances should be placed in separate folders.</p>","title":"Connection Fails"},{"location":"getting-started/troubleshooting/#docker-doesnt-work","text":"<p>\u21aa Getting Docker Up and Running</p>","title":"Docker Doesn't Work"},{"location":"getting-started/troubleshooting/#mariadb-issues","text":"<p>\u21aa Troubleshooting MariaDB Problems</p>","title":"MariaDB Issues"},{"location":"getting-started/troubleshooting/#mysql-errors","text":"<p>\u21aa Official support for MySQL 8 is discontinued</p>","title":"MySQL Errors"},{"location":"getting-started/troubleshooting/#bad-performance","text":"<p>\u21aa Performance Tips</p> <p>\u21aa Solving Windows-Specific Issues</p>","title":"Bad Performance"},{"location":"getting-started/troubleshooting/#fatal-server-errors","text":"<p>Fatal errors are often caused by one of the following conditions:</p> <ul> <li> Your (virtual) server disk is full (add storage)</li> <li> You have accidentally mounted the wrong folders (update config and restart)</li> <li> There is disk space left, but a usage or the inode limit has been reached (change it)</li> <li> You are using a filesystem or network drive with a file size limit (change settings or storage)</li> <li> The storage folder is not writable or mounted read-only (change permissions)</li> <li> Symbolic links were mounted or used within a storage folder (replace with actual paths)</li> <li> The server is low on memory (add memory)</li> <li> You didn't configure at least 4 GB of swap space (add swap)</li> <li> High-resolution panoramic images require additional memory above the recommended minimum (add more swap or memory)</li> <li> The server CPU is overheating (improve cooling)</li> <li> The server has an outdated operating system that is not fully compatible (update)</li> <li> The server hardware is defective and causes random panics (test on another server)</li> <li> The database server is not running, incompatible, or misconfigured (start, upgrade, or fix it)</li> <li> You've upgraded the MariaDB server without running <code>mariadb-upgrade</code></li> <li> Files are stored on an unreliable device such as a USB flash drive or a shared network folder</li> <li> There are network problems caused by a bad configuration, firewall, or unstable connection</li> <li> Kernel security modules such as AppArmor and SELinux are blocking permissions</li> <li> Your Raspberry Pi has not been configured according to our recommendations</li> </ul> <p>We recommend checking your Docker Logs for messages like disk full, disk quota exceeded, no space left on device, read-only file system, error creating path, wrong permissions, no route to host, connection failed, and killed:</p> <ul> <li> If a service has been \"killed\" or otherwise automatically terminated, this points to a memory problem (add swap and/or memory; remove or increase usage limits)</li> <li> In case the logs show \"disk full\", \"quota exceeded\", or \"no space left\" errors, either the disk containing the storage folder is full (add storage) or a disk usage limit is configured (remove or increase it)</li> <li> Errors such as \"read-only file system\", \"error creating path\", or \"wrong permissions\" indicate a filesystem permission problem </li> <li> Log messages that contain \"no route to host\" indicate a problem with the database or network configuration (follow our examples)</li> </ul> <p>Start a full rescan if necessary, for example, if it looks like thumbnails or pictures are missing.</p>","title":"Fatal Server Errors"},{"location":"getting-started/troubleshooting/#app-not-loading","text":"<p>If the app doesn't load in your browser when you navigate to the server URL, you can check the browser console for helpful errors and warnings. Sometimes you just need to wait a moment, for example, if you are using a slow wireless connection or the server was started only a few seconds ago. In case this does not help:</p> <ul> <li> You are using an incompatible browser (try another browser)</li> <li> JavaScript is disabled in your browser settings, so you only see the splash screen (enable it)</li> <li> JavaScript was disabled by a browser plugin (disable it or add an exception)</li> <li> Your browser cannot communicate properly with the server, e.g. because a Reverse Proxy, VPN, or CDN is configured incorrectly (check its configuration and try without)</li> <li> HTTP security headers prevent the app from loading in a frame (override them)</li> <li> An ad blocker or other plugins block requests (disable them or add an exception)</li> <li> There is a problem with your network connection (test if other sites work)</li> <li> You are connected to the wrong server, VPN, CDN, or a DNS record has not been updated yet</li> </ul>","title":"App Not Loading"},{"location":"getting-started/troubleshooting/#missing-pictures","text":"<p>If you have indexed your library and some images or videos are missing, first check Library &gt; Errors for errors and warnings. In case the application logs don't contain anything helpful:</p> <ul> <li> The pictures are in Review due to low quality or incomplete metadata</li> <li> The file type is generally unsupported</li> <li> The file type is generally supported, but a specific feature or codec is not</li> <li> The originals have bad filesystem permissions, so they cannot be opened by the indexer</li> <li> The indexer has skipped the files because they are exact duplicates</li> <li> The files are ignored based on pattern in a <code>.ppignore</code> file</li> <li> They are in Library &gt; Hidden because thumbnails could not be created:<ul> <li> Convert to JPEG is disabled in Settings &gt; Library (enable it)</li> <li> FFmpeg and/or RAW converters are disabled in Settings &gt; Advanced</li> <li> The file is broken, e.g. because of short Huffman data (try to fix it)</li> <li> Your (virtual) server disk is full (add storage)</li> <li> The storage folder is not writable (change permissions)</li> <li> A disk usage or the inode limit has been reached (remove or increase it)</li> </ul> </li> <li> Multiple files were stacked based on their metadata or file names</li> <li> The private or archived status was restored from a backup</li> <li> The NSFW filter is enabled, so they were marked as private</li> <li> You are not signed in as admin, so you can't see everything</li> <li> You try to index a shared drive on a remote server, but the server is offline</li> <li> The indexer has crashed because you didn't configure at least 4 GB of swap</li> <li> Somebody has deleted files without telling you</li> <li> You are connected to the wrong server, VPN, CDN, or a DNS record has not been updated yet</li> </ul> <p>Depending on the cause of the problem, you may need to perform a full rescan once the issue is resolved.</p>","title":"Missing Pictures"},{"location":"getting-started/troubleshooting/#wrong-search-results","text":"<p>If search results are incorrect, for example, in the wrong order or not filtered properly:</p> <ul> <li> Indexing is still in progress and has not been completed yet</li> <li> You need to re-index your pictures, for example after updating PhotoPrism</li> <li> Previously failed migrations must be re-run to update the index schema</li> <li> The database server is incompatible or needs to be updated</li> </ul> <p>It may be a bug if you cannot find any other reasons, such as a local configuration problem or a misunderstanding in how the software works. Please note that reports must be reproducible in order for us to provide a solution.</p>","title":"Wrong Search Results"},{"location":"getting-started/troubleshooting/#broken-thumbnails","text":"<p>If some pictures have broken or missing thumbnails, first check Library &gt; Errors for errors and warnings. In case the application logs don't contain anything helpful:</p> <ul> <li> The issue can be resolved by reloading the page or clearing the browser cache</li> <li> You browse non-JPEG files in Library &gt; Originals which have an icon but no preview</li> <li> Dynamic Previews are enabled in Settings &gt; Advanced, but the server is not powerful enough</li> <li> The sizes in Settings &gt; Advanced have been changed so the request can't be fulfilled</li> <li> FFmpeg and/or RAW converters are disabled in Settings &gt; Advanced (enable them)</li> <li> Convert to JPEG is disabled in Settings &gt; Library (enable it)</li> <li> Your (virtual) server disk is full (add storage)</li> <li> A disk usage or the inode limit has been reached (remove or increase it)</li> <li> The storage folder is not writable or mounted read-only (change permissions)</li> <li> Files were deleted manually, for example to free up disk space</li> <li> Files can't be opened, e.g. because the file system permissions have been changed</li> <li> Files are stored on an unreliable device such as a USB flash drive or a shared network folder</li> <li> Some thumbnails could not be created because you didn't configure at least 4 GB of swap</li> <li> Your browser cannot communicate properly with the server, e.g. because a Reverse Proxy, VPN, or CDN is configured incorrectly (check its configuration and try without)</li> <li> Your proxy, router, or firewall has a request rate limit, so some requests fail</li> <li> There are other network problems caused by a firewall, router, or unstable connection</li> <li> An ad blocker or other plugins block requests (disable them or add an exception)</li> <li> You are connected to the wrong server, VPN, CDN, or a DNS record has not been updated yet</li> </ul> <p>We also recommend checking your Docker Logs for messages like disk full, disk quota exceeded, no space left on device, read-only file system, error creating path, wrong permissions, and killed:</p> <ul> <li> If a service has been \"killed\" or otherwise automatically terminated, this points to a memory problem</li> <li> In case the logs show \"disk full\", \"quota exceeded\", or \"no space left\" errors, either the disk containing the storage folder is full (add storage) or a disk usage limit is configured (remove or increase it)</li> <li> Errors such as \"read-only file system\", \"error creating path\", or \"wrong permissions\" indicate a filesystem permission problem</li> </ul> <p>Depending on the cause of the problem, you may need to perform a full rescan once the issue is resolved.</p>","title":"Broken Thumbnails"},{"location":"getting-started/troubleshooting/#videos-dont-play","text":"<p>If videos do not play and/or you only see a white/black area when you open a video:</p> <ul> <li> You are using an incompatible browser, e.g. without AVC support (try another browser)</li> <li> AVC support or related JavaScript features have been disabled in your browser (check the settings and try another browser)</li> <li> It is a large non-AVC video that needs to be transcoded first (wait or run <code>photoprism convert</code> to pre-transcode videos)</li> <li> An ad blocker or other plugins block requests (disable them or add an exception)</li> <li> Your (virtual) server disk is full (add storage)</li> <li> A disk usage or the inode limit has been reached (remove or increase it)</li> <li> The storage folder is not writable or mounted read-only (change permissions)</li> <li> Files are stored on an unreliable device such as a USB flash drive or a shared network folder (check if the files are accessible)</li> <li> Your browser cannot communicate properly with the server, e.g. because a Reverse Proxy, VPN, or CDN is configured incorrectly (check its configuration and try without)</li> <li> There are other network problems caused by a proxy, firewall, or unstable connection (try a direct connection)</li> <li> You are connected to the wrong server, VPN, CDN, or a DNS record has not been updated yet</li> </ul> <p>We recommend that you check your Docker Logs and the browser console for messages related to HTTP requests, permissions, security, FFmpeg, videos, and file conversion.</p> <p>Please note:</p> <ol> <li>Not all video and audio formats can be played with every browser. For example, AAC - the default audio codec for MPEG-4 AVC / H.264 - is supported natively in Chrome, Safari, and Edge, while it is only optionally supported by the OS in Firefox and Opera.</li> <li>HEVC/H.265 video files can have a <code>.mp4</code> file extension too, which is often associated with AVC only. This is because MP4 is a container format, meaning that the actual video content may be compressed with H.264, H.265, or something else. The file extension doesn't really tell you anything other than that it's probably a video file.</li> </ol>  <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app. Ask for technical support if you need help, it could be a local configuration problem, or a misunderstanding in how the software works.</p>","title":"Videos Don't Play"},{"location":"getting-started/troubleshooting/browsers/","text":"<p>Problems with the user interface can be caused by a bug or an incompatible browser:</p> <ul> <li>some features may not be supported by non-standard browsers, as well as nightly, unofficial, or outdated versions</li> <li>not all video and audio formats can be played with every browser, device, and operating system</li> <li>for example, AAC - the default audio codec for MPEG-4 AVC / H.264 - is supported natively in Chrome, Safari, and Edge, while it is only optionally supported by the OS in Firefox and Opera</li> </ul>  <p>If the user interface doesn't load at all, our App Not Loading checklist helps you identify and resolve the cause.</p>","title":"Diagnosing Frontend Issues"},{"location":"getting-started/troubleshooting/browsers/#try-another-browser","text":"<p>To test if you have a general problem that is not browser-specific, open the Web UI in other browsers:</p> <ul> <li>if you are using Firefox Nightly, try the stable version and Chrome or Chromium</li> <li>if you have browser plugins installed, try disabling them to see if this makes a difference</li> <li>when the problem disappears, you know that the issue is browser-dependent or caused by a plugin</li> <li>otherwise, the issue may not be specific to the browser version</li> <li>make a note in which browsers the problem occurs, as this will be helpful when submitting a support request</li> </ul>  <p>The user interface works with most modern browsers, and runs best on Chrome, Chromium, Safari, Firefox, and Edge. Opera and Samsung Internet have been reported to be compatible as well. Due to limited resources, we can not test every release with all browser types and versions.</p>","title":"Try Another Browser"},{"location":"getting-started/troubleshooting/browsers/#getting-error-details","text":"<p>If possible, please also include the error type, error message, and URL of the affected resource when submitting a support request. For this purpose, check the browser console for warnings and errors as described below. It is perfectly fine to take screenshots instead of writing down the details.</p> <p>In case you don't see any log messages, try reloading the page, as the problem may occur while the page is loading.</p> Chrome, Chromium, and EdgeFirefoxSafari   <ul> <li>press \u2318+Option+J (Mac) or Ctrl+Shift+J (Windows, Linux, Chrome OS) to go directly to the Developer Tools</li> <li>or, navigate to More tools &gt; Developer tools in the browser menu and open the Console tab</li> </ul>   <ul> <li>press \u2318+Option+K (Mac) or Ctrl+Shift+K (Windows) to go directly to the Firefox Web Console panel</li> <li>or, navigate to Web Development &gt; Web Console in the menu and open the Console panel</li> </ul>   <p>Before you can access the console in Safari, you first need to enable the Develop menu:</p> <ol> <li>Choose Safari Menu &gt; Preferences and select the Advanced Tab</li> <li>Select \"Show Develop menu in menu bar\"</li> </ol> <p>Once the Develop menu is enabled:</p> <ul> <li>press Option+\u2318+C to go directly to the Javascript Console</li> <li>or, navigate to Develop &gt; Show Javascript Console in the browser menu</li> </ul>     <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app. Ask for technical support if you need help, it could be a local configuration problem, or a misunderstanding in how the software works.</p>","title":"Getting Error Details"},{"location":"getting-started/troubleshooting/docker/","text":"<p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>","title":"Getting Docker Up and Running"},{"location":"getting-started/troubleshooting/docker/#installation","text":"<p>If you can't use the <code>docker</code> and <code>docker-compose</code> commands at all, make sure Docker is running on the host you are connected to and your current user has the permission to use it. The following guides explain how to install Docker:</p> <ul> <li>Ubuntu, Mint, Debian, Arch, and Fedora Linux</li> <li>Microsoft Windows</li> <li>Apple macOS</li> </ul>  <p>Docker Compose</p> <p>Linux distributions may require you to install the <code>docker-compose</code> command separately, for example by running <code>sudo apt install docker-compose</code> in a terminal or using a graphical software package manager.</p>","title":"Installation"},{"location":"getting-started/troubleshooting/docker/#using-docker","text":"","title":"Using Docker"},{"location":"getting-started/troubleshooting/docker/#cannot-connect","text":"<p>If you see the error message \"Cannot connect to the Docker daemon\", it means that Docker is not installed or not running yet. Before you try anything else, it may help to simply restart your computer.</p> <p>On many Linux distributions, this command will start the Docker daemon manually if needed:</p> <pre><code>sudo systemctl start docker.service\n</code></pre> <p>On other operating systems, start Docker Desktop and enable the \"Start Docker Desktop when you log in\" option in its settings.</p>","title":"Cannot Connect"},{"location":"getting-started/troubleshooting/docker/#connection-aborted","text":"<p>If you see the error message \"Connection aborted\" or \"Connection denied\", it usually means that your current user does not have permission to use Docker.</p> <p>On Linux, this command grants permission by adding a user to the <code>docker</code> group (relogin for changes to take effect):</p> <pre><code>sudo usermod -aG docker [username]\n</code></pre> <p>Alternatively, you can prefix the <code>docker</code> and <code>docker-compose</code> commands with <code>sudo</code> when not running as root, for example:</p> <pre><code>sudo docker-compose stop\nsudo docker-compose up -d\n</code></pre> <p>Note that this will point the home directory shortcut <code>~</code> to <code>/root</code> in the <code>volumes:</code> section of your <code>docker-compose.yml</code>.</p>","title":"Connection Aborted"},{"location":"getting-started/troubleshooting/docker/#viewing-logs","text":"<p>Run this command to display the last 100 log messages (omit <code>--tail=100</code> to see all):</p> <pre><code>docker-compose logs --tail=100\n</code></pre> <p>To enable debug mode, set <code>PHOTOPRISM_DEBUG</code> to <code>true</code> in the <code>environment:</code> section of the <code>photoprism</code> service (or use the <code>--debug</code> flag when running the <code>photoprism</code> command directly):</p> <pre><code>services:\n  photoprism:\n    environment:\n      PHOTOPRISM_DEBUG: \"true\"\n</code></pre> <p>Then restart all services for the changes to take effect. It can be helpful to keep Docker running in the foreground while debugging so that log messages are displayed directly. To do this, omit the <code>-d</code> parameter when restarting:</p> <pre><code>docker-compose stop\ndocker-compose up \n</code></pre>  <p>If you see no errors or no logs at all, you may have started the server on a different host and/or port. There could also be an issue with your browser, browser plugins, firewall settings, or other tools you may have installed.</p>   <p>The default Docker Compose config filename is <code>docker-compose.yml</code>. For simplicity, it doesn't need to be specified when running the <code>docker-compose</code> command in the same directory. Config files for other apps or instances should be placed in separate folders.</p>","title":"Viewing Logs"},{"location":"getting-started/troubleshooting/docker/#adding-swap","text":"<p>Note that high-resolution panoramic images may require additional swap space and/or physical memory above the recommended minimum.</p>","title":"Adding Swap"},{"location":"getting-started/troubleshooting/docker/#linux","text":"<p>Open a terminal and run this command to check if your server has swap configured.</p> <pre><code>swapon --show\n</code></pre> <p>Example output:</p> <pre><code>NAME      TYPE SIZE USED PRIO\n/swapfile file  64G  88M   -2\n</code></pre> <p>This means you have 64 GB of swap and don't need to add more. Learn how much you need.</p> <p>Otherwise, run these commands to permanently add 4 GB of swap (or more depending on how much physical memory you have):</p> <pre><code>sudo -i\nfallocate -l 4G /swapfile\nchmod 600 /swapfile\nmkswap /swapfile\nswapon /swapfile\necho '/swapfile none swap sw 0 0' | tee -a /etc/fstab\n</code></pre>  <p>You can skip <code>sudo -i</code> if you are already logged in as root.</p>","title":"Linux"},{"location":"getting-started/troubleshooting/docker/#windows","text":"<p>Windows Pro users should disable the WSL 2 based engine in Docker Settings &gt; General so that they can mount drives other than <code>C:</code>. This will enable Hyper-V, which Microsoft doesn't offer to its Windows Home customers. Docker Desktop uses dynamic memory allocation with WSL 2.</p> <p>It is important to explicitly increase the Docker memory limit to 4 GB or more when using Hyper-V. The default of 2 GB can reduce indexing performance and cause unexpected restarts. Also, ensure that you configure at least 4 GB of swap space.</p>","title":"Windows"},{"location":"getting-started/troubleshooting/docker/#macos","text":"<p>It is important to increase the Docker memory limit to 4 GB or more, as the default of 2 GB can reduce indexing performance and cause unexpected restarts. Also, ensure that you configure at least 4 GB of swap space.</p>","title":"macOS"},{"location":"getting-started/troubleshooting/docker/#kernel-security","text":"<p>We recommend disabling Linux kernel security modules like SELinux (RedHat/Fedora) on private servers, especially if you have no experience configuring them.</p> <p>If you have working configuration rules for a particular Linux distribution, feel free to share the instructions with the community so that less experienced users can harden their installation without running into problems.</p>","title":"Kernel Security"},{"location":"getting-started/troubleshooting/docker/#file-permissions","text":"<p>Errors such as \"read-only file system\", \"error creating path\", or \"wrong permissions\" indicate a filesystem permission problem:</p> <ul> <li> Use a file manager, or the commands <code>ls -alh</code>, <code>chmod</code>, and <code>chown</code> on Unix-like operating systems, to check and change filesystem permissions so all files and folders are accessible</li> <li> The app and database storage folders must be writable as well: Verify that the services have write permissions and that you have not mounted the folders read-only on your host or via Docker using the <code>:ro</code> flag</li> <li> If you have configured specific user and group IDs for a service, make sure they match</li> <li> If symbolic links are mounted or used within storage folders, replace them with actual paths</li> <li> It may help to add the <code>:z</code> mount flag to volumes when using SELinux (RedHat/Fedora)</li> <li> When mounting folders that only root has access to, you may have to prefix the <code>docker</code> and <code>docker-compose</code> commands with <code>sudo</code> on Linux if you are not already logged in as root</li> </ul> <p>An easy way to test for missing permissions is to (temporarily) remove restrictions and make the entire folder accessible to everyone:</p> <p><pre><code>sudo chmod -R a+rwx [folder]\n</code></pre> Start a full rescan once all issues have been resolved, especially if it looks like thumbnails or pictures are missing.</p>  <p>Be very careful when changing permissions in shared hosting environments. If you are using PhotoPrism on corporate or university servers, we recommend that you ask your IT help desk for advice.</p>","title":"File Permissions"},{"location":"getting-started/troubleshooting/docker/#disk-space","text":"<p>In case the logs show \"disk full\", \"quota exceeded\", or \"no space left\" errors, either the disk containing the storage folder is full (get a new one or use a different disk) or a disk usage limit is configured, for example in the Docker, Kubernetes, or Virtual Machine configuration (remove or increase it):</p> <ul> <li>on Linux and other Unix-like operating systems, the available disk space can be viewed by running <code>df -h</code> in a terminal</li> <li>if you are using Kubernetes, Docker Desktop, Hyper-V, or a Virtual Machine, they have their own settings to adjust the size of storage, RAM, and swap</li> <li>for details, refer to the corresponding documentation</li> </ul> <p>Start a full rescan if necessary, for example, if it looks like thumbnails or pictures are missing.</p>  <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app. Ask for technical support if you need help, it could be a local configuration problem, or a misunderstanding in how the software works.</p>","title":"Disk Space"},{"location":"getting-started/troubleshooting/logs/","text":"Web AppBrowserDocker Logs   <p>Make sure Logs is enabled under Settings &gt; General so you can see log messages in the Web UI.</p> <p>Live Logs</p> <p>The continuously updated live logs in Library &gt; Logs are especially useful for diagnosing indexing and import issues, but also display other types of logs (depending on the log level):</p> <ol> <li>Navigate to Library</li> <li>Open the Logs tab</li> </ol>  <p>Only a limited number of messages are visible in the Web App to reduce memory usage. You can see all messages in the Docker Logs. This may be more convenient if you are looking for information on a specific file or want to attach your full logs to a support request.</p>  <p>Errors and Warnings</p> <ol> <li>Expand the main navigation</li> <li>Open the Library sub navigation</li> <li>Navigate to Library &gt; Errors</li> </ol> <p></p>   <p>If you have a frontend issue, it is often helpful to check the browser console for errors and warnings. A console is available in all modern browsers and can be activated via keyboard shortcuts or the browser menu.</p> <p>Problems with the user interface can be caused by a bug or an incompatible browser: Some features may not be supported by non-standard browsers, as well as nightly, unofficial, or outdated versions.</p> <p>In case you don't see any log messages, try reloading the page, as the problem may occur while the page is loading.</p> <p>Chrome, Chromium, and Edge</p> <ul> <li>press \u2318+Option+J (Mac) or Ctrl+Shift+J (Windows, Linux, Chrome OS) to go directly to the Developer Tools</li> <li>or, navigate to More tools &gt; Developer tools in the browser menu and open the Console tab</li> </ul> <p>Firefox</p> <ul> <li>press \u2318+Option+K (Mac) or Ctrl+Shift+K (Windows) to go directly to the Firefox Web Console panel</li> <li>or, navigate to Web Development &gt; Web Console in the menu and open the Console panel</li> </ul> <p>Safari</p> <p>Before you can access the console in Safari, you first need to enable the Develop menu:</p> <ol> <li>Choose Safari Menu &gt; Preferences and select the Advanced Tab</li> <li>Select \"Show Develop menu in menu bar\"</li> </ol> <p>Once the Develop menu is enabled:</p> <ul> <li>press Option+\u2318+C to go directly to the Javascript Console</li> <li>or, navigate to Develop &gt; Show Javascript Console in the browser menu</li> </ul>   <p>Run this command to display the last 100 log messages (omit <code>--tail=100</code> to see all):</p> <pre><code>docker-compose logs --tail=100\n</code></pre> <p>To enable debug mode, set <code>PHOTOPRISM_DEBUG</code> to <code>true</code> in the <code>environment:</code> section of the <code>photoprism</code> service (or use the <code>--debug</code> flag when running the <code>photoprism</code> command directly):</p> <pre><code>services:\n  photoprism:\n    environment:\n      PHOTOPRISM_DEBUG: \"true\"\n</code></pre> <p>Then restart all services for the changes to take effect. It can be helpful to keep Docker running in the foreground while debugging so that log messages are displayed directly. To do this, omit the <code>-d</code> parameter when restarting:</p> <pre><code>docker-compose stop\ndocker-compose up \n</code></pre>  <p>If you see no errors or no logs at all, you may have started the server on a different host and/or port. There could also be an issue with your browser, browser plugins, firewall settings, or other tools you may have installed.</p>   <p>The default Docker Compose config filename is <code>docker-compose.yml</code>. For simplicity, it doesn't need to be specified when running the <code>docker-compose</code> command in the same directory. Config files for other apps or instances should be placed in separate folders.</p>      <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app. Ask for technical support if you need help, it could be a local configuration problem, or a misunderstanding in how the software works.</p>","title":"Collecting Debug Information"},{"location":"getting-started/troubleshooting/mariadb/","text":"<p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>","title":"Troubleshooting MariaDB Problems"},{"location":"getting-started/troubleshooting/mariadb/#cannot-connect","text":"<p>First, verify that you are using the correct port (default is <code>3306</code>) and hostname or IP address:</p> <ul> <li>in the Docker environment, the default hostname is <code>mariadb</code> (same as the service name) </li> <li>use <code>localhost</code> on your host if the port has been exposed as described below</li> <li>use your private host IP from inside your home network (see network settings)</li> </ul> <p>To connect to MariaDB from your host or home network, you need to expose port <code>3306</code> in your <code>docker-compose.yml</code> and restart the service for changes to take effect:</p> <pre><code>services:\n  mariadb:\n    ports:\n      - \"3306:3306\"\n</code></pre>  <p>Set strong passwords if the database is exposed to an external network. Never expose your database to the public Internet in this way, for example, if it is running on a cloud server.</p>  <p>If this doesn't help, check the Docker Logs for messages like disk full, disk quota exceeded, no space left on device, read-only file system, error creating path, wrong permissions, no route to host, connection failed, exec format error, no matching manifest, and killed:</p> <ul> <li> Make sure that the database storage folder is readable and writable: Errors such as \"read-only file system\", \"error creating path\", or \"wrong permissions\" indicate a filesystem permission problem</li> <li> If symbolic links are mounted or used within the storage folder, replace them with the actual paths and verify that they are accessible</li> <li> If the MariaDB service has been \"killed\" or otherwise automatically terminated, this can point to a memory problem (add swap and/or memory; remove or increase usage limits)</li> <li> In case the logs also show \"disk full\", \"quota exceeded\", or \"no space left\" errors, either the disk containing the storage folder is full (add storage) or a disk usage limit is configured (remove or increase it)</li> <li> Log messages that contain \"no route to host\" may also indicate a general network configuration problem (follow our examples)</li> <li> You have to resort to alternative Docker images to run MariaDB on ARMv7-based devices and those with a 32-bit operating system</li> </ul>","title":"Cannot Connect"},{"location":"getting-started/troubleshooting/mariadb/#bad-performance","text":"<p>Many users reporting poor performance and high CPU usage have migrated from SQLite to MariaDB, so their database schema is no longer optimized for performance. For example, MariaDB cannot handle rows with <code>text</code> columns in memory and always uses temporary tables on disk if there are any.</p> <p>The instructions for these migrations were provided by a contributor and are not part of the original software distribution. As such, they have not been officially released, recommended, or extensively tested by us.</p> <p>If this is the case, please make sure that your migrated database schema matches that of a fresh, non-migrated installation . It may help to run the migrations manually in a terminal using the migrations subcommands. However, this does not guarantee that all issues such as missing indexes are resolved.</p> <p>Get Performance Tips \u203a View Database Schema \u203a</p>","title":"Bad Performance"},{"location":"getting-started/troubleshooting/mariadb/#version-upgrade","text":"<p>If MariaDB fails to start after upgrading from an earlier version (or migrating from MySQL), the internal management schema may be outdated. With older versions, it could only be updated manually. However, newer MariaDB Docker images support automatic upgrades on startup, so you don't have to worry about that anymore.</p>","title":"Version Upgrade"},{"location":"getting-started/troubleshooting/mariadb/#manual-update","text":"<p>To manually upgrade the internal database schema, run this command in a terminal:</p> <pre><code>docker-compose exec mariadb mariadb-upgrade -uroot -p\n</code></pre> <p>Enter the MariaDB \"root\" password specified in your <code>docker-compose.yml</code> when prompted.</p> <p>Alternatively, you can downgrade to the previous version, create a database backup using the <code>photoprism backup</code> command, start a new database instance based on the latest version, and then restore your index with the <code>photoprism restore</code> command.</p>","title":"Manual Update"},{"location":"getting-started/troubleshooting/mariadb/#auto-upgrade","text":"<p>To enable automatic schema updates, set <code>MARIADB_AUTO_UPGRADE</code> to a non-empty value in your <code>docker-compose.yml</code> as shown in our config example:</p> <pre><code>services:\n  ...\n\n  mariadb:\n    image: mariadb:10.8\n    ...\n    environment:\n      MARIADB_AUTO_UPGRADE: \"1\"\n      MARIADB_INITDB_SKIP_TZINFO: \"1\"\n      ...\n</code></pre> <p>Before starting MariaDB in production mode, the database image entrypoint script now runs <code>mariadb-upgrade</code> to update the internal management schema as needed. For example, when you pull a new major release and restart the service.</p>  <p>Since PhotoPrism does not require time zone support, you can also add <code>MARIADB_INITDB_SKIP_TZINFO</code> to your config as shown above. However, this is only a recommendation and optional.</p>","title":"Auto Upgrade"},{"location":"getting-started/troubleshooting/mariadb/#incompatible-schema","text":"<p>If your database does not seem to be compatible with the currently installed version of PhotoPrism, for example because search results are missing or incorrect, first make sure you are using a supported database and that its internal management schema is up-to-date. How to do that is explained in the previous section.</p> <p>Once you have verified that neither is a problem, you can run the following command in a terminal to check the status of previous database schema migrations:</p> <pre><code>docker-compose exec photoprism photoprism migrations ls\n</code></pre>  <p>Omit the <code>docker-compose exec photoprism</code> prefix if you are using an interactive terminal session or are running PhotoPrism directly on your computer without Docker.</p>","title":"Incompatible Schema"},{"location":"getting-started/troubleshooting/mariadb/#re-run-migrations","text":"<p>Should the status of any migration not be OK, you can re-run failed migrations using this command in a terminal:</p> <pre><code>docker-compose exec photoprism photoprism migrations run -f\n</code></pre> <p>The <code>-f</code> flag instructs the <code>photoprism migrations run</code> subcommand to re-run previously failed migrations. Use <code>--help</code> to see the command help.</p> <p>Additional migration command examples can be found in the Developer Guide.</p>","title":"Re-Run Migrations"},{"location":"getting-started/troubleshooting/mariadb/#complete-rescan","text":"<p>We recommend that you re-index your pictures after a schema migration, especially if problems persist. You can either start a rescan from the user interface by navigating to Library &gt; Index, checking \"Complete Rescan\", and then clicking \"Start\", or by running this command in a terminal:</p> <pre><code>docker-compose exec photoprism photoprism index -f\n</code></pre>  <p>Be careful not to start multiple indexing processes at the same time, as this will lead to a high server load.</p>","title":"Complete Rescan"},{"location":"getting-started/troubleshooting/mariadb/#lost-root-password","text":"<p>In case you forgot the MariaDB \"root\" password and the one specified in your configuration does not work, you can start the server with the <code>--skip-grant-tables</code> flag added to the <code>mysqld</code> command in your <code>docker-compose.yml</code>. This will temporarily give full access to all users after a restart:</p> <pre><code>services:\n  mariadb:\n    command: mysqld --skip-grant-tables\n</code></pre> <p>Restart the <code>mariadb</code> service for changes to take effect:</p> <pre><code>docker-compose stop mariadb\ndocker-compose up -d mariadb\n</code></pre> <p>Now open a database console:</p> <pre><code>docker-compose exec mariadb mysql -uroot\n</code></pre> <p>Enter the following commands to change the password for \"root\":</p> <pre><code>FLUSH PRIVILEGES;\nALTER USER 'root'@'%' IDENTIFIED BY 'new_password';\nALTER USER 'root'@'localhost' IDENTIFIED BY 'new_password';\nUPDATE mysql.user SET authentication_string = '' WHERE user = 'root';\nUPDATE mysql.user SET plugin = '' WHERE user = 'root';\nexit\n</code></pre> <p>When you are done, remove the <code>--skip-grant-tables</code> flag again to restore the original command and restart the <code>mariadb</code> service as described above.</p>","title":"Lost Root Password"},{"location":"getting-started/troubleshooting/mariadb/#corrupted-files","text":"<p>If your database files get corrupted frequently, it is usually because they are stored on an unreliable device such as a USB flash drive, an SD card, or a shared network folder. These may also have unexpected file size limitations, which is especially problematic for databases that do not split data into smaller files.</p> <ul> <li> Never use the same database files with more than one server instance</li> <li> To share a database over a network, run the database server directly on the remote server instead of sharing database files</li> <li> To repair your tables after you have moved the files to a local disk, you can start MariaDB with <code>--innodb-force-recovery=1</code> (otherwise the same procedure as for recovering a lost password, see above)</li> </ul>","title":"Corrupted Files"},{"location":"getting-started/troubleshooting/mariadb/#server-relocation","text":"<p>When moving MariaDB to another computer, cloud server, or virtual machine:</p> <ul> <li> Move the complete storage folder along with it and preserve the file permissions</li> <li> or restore your index from an SQL dump (backup file)</li> <li> Perform a version upgrade if necessary</li> <li> Make sure that PhotoPrism can access the database on the new host</li> <li> Set strong passwords if the database is exposed to an external network</li> <li> Never expose your database to the public Internet</li> </ul>","title":"Server Relocation"},{"location":"getting-started/troubleshooting/mariadb/#unicode-support","text":"<p>If the logs show \"incorrect string value\" database errors and you are running a custom MariaDB or MySQL server that is not based on our default configuration:</p> <ul> <li> Full Unicode support must be enabled, e.g. using the <code>mysqld</code> command parameters <code>--character-set-server=utf8mb4</code> and <code>--collation-server=utf8mb4_unicode_ci</code></li> <li> Note that an existing database may use a different character set if you imported it from another server</li> <li> Before submitting a support request, verify the problem still occurs with a newly created database based on our example</li> </ul> <p>Run this command in a terminal to see the current values of the collation and character set variables (change the root password <code>insecure</code> and database name <code>photoprism</code> as specified in your <code>docker-compose.yml</code>):</p> <pre><code>echo \"SHOW VARIABLES WHERE Variable_name LIKE 'character\\_set\\_%' OR Variable_name LIKE 'collation%';\" | \\\ndocker-compose exec -T mariadb mysql -uroot -pinsecure photoprism\n</code></pre>","title":"Unicode Support"},{"location":"getting-started/troubleshooting/mariadb/#mysql-errors","text":"<p>Official support for MySQL 8 is discontinued as Oracle seems to have stopped shipping new features and enhancements. As a result, the testing effort required before each release is no longer feasible.</p>","title":"MySQL Errors"},{"location":"getting-started/troubleshooting/performance/","text":"","title":"Performance Tips"},{"location":"getting-started/troubleshooting/performance/#mariadb","text":"<p>The InnoDB buffer pool serves as a cache for data and indexes. It is a key component for optimizing MariaDB performance. Its size should be as large as possible to keep frequently used data in memory and reduce disk I/O - typically the biggest bottleneck.</p> <p>By default, the buffer pool size is between 128 MB and 512 MB, depending on which configuration example you use. You can change it with the <code>--innodb-buffer-pool-size</code> command parameter in the <code>mariadb:</code> section of your <code>docker-compose.yml</code>. <code>M</code> stands for Megabyte, <code>G</code> for Gigabyte. Do not use spaces.</p> <p>If your server has plenty of physical memory, we recommend increasing the size to 1 or 2 GB:</p> <pre><code>services:\n  mariadb:\n    command: mysqld --innodb-buffer-pool-size=1G ...\n</code></pre> <p>As a rule of thumb, <code>Innodb_buffer_pool_pages_free</code> should never be less than 5% of the total pages. You can run the following SQL statement, for example using the <code>mariadb</code> command in a terminal, to display the number of free pages and other InnoDB-related status information:</p> <pre><code>SHOW GLOBAL STATUS LIKE 'Innodb_buffer%';\n</code></pre> <p>Advanced users may adjust additional parameters to further improve performance. Tools such as the mysqltuner.pl script can provide helpful recommendations for this.</p>  <p>Windows and macOS</p> <p>If you are using Docker Desktop on Windows or macOS, remember to increase the total memory available for Docker services. Otherwise, they may run out of resources and cannot benefit from a larger cache size. In case PhotoPrism and MariaDB are running in a virtual machine, its memory size should be increased as well. Restart for changes to take effect.</p>","title":"MariaDB"},{"location":"getting-started/troubleshooting/performance/#migration-from-sqlite","text":"<p>After migrating from SQLite, it is possible that columns do not have exactly the data type they should have or that indexes are missing. This can lead to poor performance. For example, MariaDB cannot process rows with <code>text</code> columns in memory and always uses temporary tables on disk if there are any.</p> <p>The instructions for these migrations were provided by a contributor and are not part of the original software distribution. As such, they have not been officially released, recommended, or extensively tested by us.</p> <p>If this is the case, please make sure that your migrated database schema matches that of a fresh, non-migrated installation . It may help to run the migrations manually in a terminal using the migrations subcommands. However, this does not guarantee that all issues such as missing indexes are resolved.</p> <p>View Database Schema \u203a</p>","title":"Migration from SQLite"},{"location":"getting-started/troubleshooting/performance/#windows","text":"<p>Solve Windows-Specific Issues \u203a</p>","title":"Windows"},{"location":"getting-started/troubleshooting/performance/#storage","text":"<p>Local Solid-State Drives (SSDs) are best for databases of any kind:</p> <ul> <li>database performance extremely benefits from high throughput which HDDs can't provide</li> <li>SSDs have more predictable performance and can handle more concurrent requests</li> <li>due to the HDD seek time, HDDs only support 5% of the reads per second of SSDs</li> <li>the cost savings from using slow hard disks are minimal</li> </ul> <p>Switching to SSDs makes a big difference, especially for write operations and when the read cache is not big enough or can't be used.</p>  <p>Never store database files on an unreliable device such as a USB flash drive, SD card, or shared network folder. These may also have unexpected file size limitations, which is especially problematic for databases that do not split data into smaller files.</p>","title":"Storage"},{"location":"getting-started/troubleshooting/performance/#memory","text":"<p>Indexing large photo and video collections benefits from plenty of memory for caching and processing large media files. Ideally, the amount of RAM should match the number of physical CPU cores. If not, reduce the number of workers  as explained below.</p> <p>Especially the conversion of RAW images and the transcoding of videos are very demanding. High-resolution panoramic images may require additional swap space and/or physical memory above the recommended minimum.</p>  <p>RAW image conversion and TensorFlow are disabled on systems with 1 GB or less memory. We take no responsibility for instability or performance problems if your device does not meet the requirements.</p>","title":"Memory"},{"location":"getting-started/troubleshooting/performance/#server-cpu","text":"<p>Last but not least, performance can be limited by your server CPU. If you've tried everything else, then only moving your instance to a more powerful device or cloud server may help.</p> <p>Be aware that most NAS devices are optimized for minimal power consumption and low production costs. Although their hardware gets faster with each generation, benchmarks show that even 8-year-old standard desktop CPUs like the Intel Core i3-4130 are often many times faster:</p> <p></p>","title":"Server CPU"},{"location":"getting-started/troubleshooting/performance/#legacy-hardware","text":"<p>It is a known issue that the user interface and backend operations, especially face recognition, can be slow or even crash on older hardware due to a lack of resources. Like most applications, PhotoPrism has certain requirements and our development process does not include testing on unsupported or unusual hardware.</p> <p>In many cases, performance can be improved through optimizations. Since these can prove to be very time-consuming and cost-intensive in practice, users and developers must decide on a case-by-case basis whether this provides sufficient benefit in relation to the costs or whether the use of more powerful hardware is faster and cheaper overall.</p> <p>We kindly ask you not to open a problem report on GitHub Issues for poor performance on older hardware until a full cause and feasibility analysis has been performed. GitHub Discussions or any of our other public forums and communities are great places to start a discussion.</p> <p>That being said, one of the advantages of open-source software is that users can submit pull requests with performance and other enhancements they would like to see implemented. This will result in a much faster solution than waiting for a core team member to remotely analyze your problem and then provide a fix.</p>","title":"Legacy Hardware"},{"location":"getting-started/troubleshooting/performance/#troubleshooting","text":"<p>If your server runs out of memory, the index is frequently locked, or other system resources are running low:</p> <ul> <li> Try reducing the number of workers by setting <code>PHOTOPRISM_WORKERS</code> to a reasonably small value in <code>docker-compose.yml</code>, depending on the CPU performance and number of cores</li> <li> Make sure your server has at least 4 GB of swap space so that indexing doesn't cause restarts when memory usage spikes; RAW image conversion and video transcoding are especially demanding </li> <li> If you are using SQLite, switch to MariaDB, which is better optimized for high concurrency</li> <li> As a last measure, you can disable the use of TensorFlow for image classification and facial recognition</li> </ul> <p>Other issues? Our troubleshooting checklists help you quickly diagnose and solve them.</p>  <p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>","title":"Troubleshooting"},{"location":"getting-started/troubleshooting/windows/","text":"","title":"Solving Windows-Specific Issues"},{"location":"getting-started/troubleshooting/windows/#ntfs-file-system","text":"<p>If you experience poor performance when indexing large libraries stored on NTFS:</p> <ul> <li> The I/O bandwidth used to update the Last Access Time can be a significant percentage of the total I/O bandwidth on NTFS volumes with a large number of files or folders (disable updates).1</li> <li> In folders with many files, file names may start to conflict after NTFS uses all of the 8.3 short file names that are similar to the long names. Repeated conflicts between new and existing short names cause NTFS to regenerate the short file name from 6 to 8 times (disable short file names and reduce the number of files per folder).2 3</li> <li> exFat can be faster than NTFS, especially on external SSD drives with a lot of small files.</li> <li> Windows 10 allows physical disks formatted with the Linux ext4 file system to be mounted directly in WSL 2, which may be an option for some use cases.4</li> </ul>  <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>    <ol> <li> <p>https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2003/cc781134(v=ws.10)?redirectedfrom=MSDN#last-access-time \u21a9</p> </li> <li> <p>https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2003/cc781134(v=ws.10)?redirectedfrom=MSDN#how-ntfs-generates-short-file-names \u21a9</p> </li> <li> <p>https://stackoverflow.com/a/9600126 \u21a9</p> </li> <li> <p>https://www.bleepingcomputer.com/news/microsoft/windows-10-now-lets-you-mount-linux-ext4-filesystems-in-wsl-2/ \u21a9</p> </li> </ol>","title":"NTFS File System"},{"location":"getting-started/vpn/tailscale/","text":"<p>Should you experience problems with Tailscale, we recommend that you ask the Tailscale community for advice, as we cannot provide support for third-party software and services.</p>  <ol> <li> <p>Open the Tailscale website and Select Use Tailscale button. </p> </li> <li> <p>Sign up with an email address or using any of your other accounts and install Tailscale on all the relevant devices. Detailed and clear instructions are available to guide your through the process depending on the operating system.</p> <p></p> <p>For example below the instruction for Linux and Android</p> <p></p> </li> <li> <p>When the devices have Tailscale installed (and logged in via the same account) they all appear in the overview as in the printscreen below.</p> <p></p> </li> <li> <p>Each device gets an IP address allocated (100.xxx.xxx.xxx), which can be used to reach them via the VPN network. This IP address with addition of the port number where Photoprism is run on can be used to reach Photoprism outside the home network. </p> </li> </ol> <p></p>  <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>","title":"Tailscale VPN"},{"location":"license/agpl/","text":"<p>Version 3, 19 November 2007</p> <p>Copyright \u00a9 2007 Free Software Foundation, Inc.</p> <p>Everyone is permitted to copy and distribute verbatim copies of this license document, but changing it is not allowed.</p>","title":"GNU Affero General Public License"},{"location":"license/agpl/#preamble","text":"<p>The GNU Affero General Public License is a free, copyleft license for software and other kinds of works, specifically designed to ensure cooperation with the community in the case of network server software.</p> <p>The licenses for most software and other practical works are designed to take away your freedom to share and change the works.  By contrast, our General Public Licenses are intended to guarantee your freedom to share and change all versions of a program--to make sure it remains free software for all its users.</p> <p>When we speak of free software, we are referring to freedom, not price.  Our General Public Licenses are designed to make sure that you have the freedom to distribute copies of free software (and charge for them if you wish), that you receive source code or can get it if you want it, that you can change the software or use pieces of it in new free programs, and that you know you can do these things.</p> <p>Developers that use our General Public Licenses protect your rights with two steps: (1) assert copyright on the software, and (2) offer you this License which gives you legal permission to copy, distribute and/or modify the software.</p> <p>A secondary benefit of defending all users' freedom is that improvements made in alternate versions of the program, if they receive widespread use, become available for other developers to incorporate.  Many developers of free software are heartened and encouraged by the resulting cooperation.  However, in the case of software used on network servers, this result may fail to come about. The GNU General Public License permits making a modified version and letting the public access it on a server without ever releasing its source code to the public.</p> <p>The GNU Affero General Public License is designed specifically to ensure that, in such cases, the modified source code becomes available to the community.  It requires the operator of a network server to provide the source code of the modified version running there to the users of that server.  Therefore, public use of a modified version, on a publicly accessible server, gives the public access to the source code of the modified version.</p> <p>An older license, called the Affero General Public License and published by Affero, was designed to accomplish similar goals.  This is a different license, not a version of the Affero GPL, but Affero has released a new version of the Affero GPL which permits relicensing under this license.</p> <p>The precise terms and conditions for copying, distribution and modification follow.</p>","title":"Preamble"},{"location":"license/agpl/#terms-and-conditions","text":"","title":"TERMS AND CONDITIONS"},{"location":"license/agpl/#0-definitions","text":"<p>\u201cThis License\u201d refers to version 3 of the GNU Affero General Public License.</p> <p>\u201cCopyright\u201d also means copyright-like laws that apply to other kinds of works, such as semiconductor masks.</p> <p>\u201cThe Program\u201d refers to any copyrightable work licensed under this License.  Each licensee is addressed as \u201cyou\u201d.  \u201cLicensees\u201d and \u201crecipients\u201d may be individuals or organizations.</p> <p>To \u201cmodify\u201d a work means to copy from or adapt all or part of the work in a fashion requiring copyright permission, other than the making of an exact copy.  The resulting work is called a \u201cmodified version\u201d of the earlier work or a work \u201cbased on\u201d the earlier work.</p> <p>A \u201ccovered work\u201d means either the unmodified Program or a work based on the Program.</p> <p>To \u201cpropagate\u201d a work means to do anything with it that, without permission, would make you directly or secondarily liable for infringement under applicable copyright law, except executing it on a computer or modifying a private copy.  Propagation includes copying, distribution (with or without modification), making available to the public, and in some countries other activities as well.</p> <p>To \u201cconvey\u201d a work means any kind of propagation that enables other parties to make or receive copies.  Mere interaction with a user through a computer network, with no transfer of a copy, is not conveying.</p> <p>An interactive user interface displays \u201cAppropriate Legal Notices\u201d to the extent that it includes a convenient and prominently visible feature that (1) displays an appropriate copyright notice, and (2) tells the user that there is no warranty for the work (except to the extent that warranties are provided), that licensees may convey the work under this License, and how to view a copy of this License.  If the interface presents a list of user commands or options, such as a menu, a prominent item in the list meets this criterion.</p>","title":"0. Definitions"},{"location":"license/agpl/#1-source-code","text":"<p>The \u201csource code\u201d for a work means the preferred form of the work for making modifications to it.  \u201cObject code\u201d means any non-source form of a work.</p> <p>A \u201cStandard Interface\u201d means an interface that either is an official standard defined by a recognized standards body, or, in the case of interfaces specified for a particular programming language, one that is widely used among developers working in that language.</p> <p>The \u201cSystem Libraries\u201d of an executable work include anything, other than the work as a whole, that (a) is included in the normal form of packaging a Major Component, but which is not part of that Major Component, and (b) serves only to enable use of the work with that Major Component, or to implement a Standard Interface for which an implementation is available to the public in source code form.  A \u201cMajor Component\u201d, in this context, means a major essential component (kernel, window system, and so on) of the specific operating system (if any) on which the executable work runs, or a compiler used to produce the work, or an object code interpreter used to run it.</p> <p>The \u201cCorresponding Source\u201d for a work in object code form means all the source code needed to generate, install, and (for an executable work) run the object code and to modify the work, including scripts to control those activities.  However, it does not include the work's System Libraries, or general-purpose tools or generally available free programs which are used unmodified in performing those activities but which are not part of the work.  For example, Corresponding Source includes interface definition files associated with source files for the work, and the source code for shared libraries and dynamically linked subprograms that the work is specifically designed to require, such as by intimate data communication or control flow between those subprograms and other parts of the work.</p> <p>The Corresponding Source need not include anything that users can regenerate automatically from other parts of the Corresponding Source.</p> <p>The Corresponding Source for a work in source code form is that same work.</p>","title":"1. Source Code"},{"location":"license/agpl/#2-basic-permissions","text":"<p>All rights granted under this License are granted for the term of copyright on the Program, and are irrevocable provided the stated conditions are met.  This License explicitly affirms your unlimited permission to run the unmodified Program.  The output from running a covered work is covered by this License only if the output, given its content, constitutes a covered work.  This License acknowledges your rights of fair use or other equivalent, as provided by copyright law.</p> <p>You may make, run and propagate covered works that you do not convey, without conditions so long as your license otherwise remains in force.  You may convey covered works to others for the sole purpose of having them make modifications exclusively for you, or provide you with facilities for running those works, provided that you comply with the terms of this License in conveying all material for which you do not control copyright.  Those thus making or running the covered works for you must do so exclusively on your behalf, under your direction and control, on terms that prohibit them from making any copies of your copyrighted material outside their relationship with you.</p> <p>Conveying under any other circumstances is permitted solely under the conditions stated below.  Sublicensing is not allowed; section 10 makes it unnecessary.</p>","title":"2. Basic Permissions"},{"location":"license/agpl/#3-protecting-users-legal-rights-from-anti-circumvention-law","text":"<p>No covered work shall be deemed part of an effective technological measure under any applicable law fulfilling obligations under article 11 of the WIPO copyright treaty adopted on 20 December 1996, or similar laws prohibiting or restricting circumvention of such measures.</p> <p>When you convey a covered work, you waive any legal power to forbid circumvention of technological measures to the extent such circumvention is effected by exercising rights under this License with respect to the covered work, and you disclaim any intention to limit operation or modification of the work as a means of enforcing, against the work's users, your or third parties' legal rights to forbid circumvention of technological measures.</p>","title":"3. Protecting Users' Legal Rights From Anti-Circumvention Law"},{"location":"license/agpl/#4-conveying-verbatim-copies","text":"<p>You may convey verbatim copies of the Program's source code as you receive it, in any medium, provided that you conspicuously and appropriately publish on each copy an appropriate copyright notice; keep intact all notices stating that this License and any non-permissive terms added in accord with section 7 apply to the code; keep intact all notices of the absence of any warranty; and give all recipients a copy of this License along with the Program.</p> <p>You may charge any price or no price for each copy that you convey, and you may offer support or warranty protection for a fee.</p>","title":"4. Conveying Verbatim Copies"},{"location":"license/agpl/#5-conveying-modified-source-versions","text":"<p>You may convey a work based on the Program, or the modifications to produce it from the Program, in the form of source code under the terms of section 4, provided that you also meet all of these conditions:</p> <ul> <li>a) The work must carry prominent notices stating that you modified it, and giving a relevant date.</li> <li>b) The work must carry prominent notices stating that it is released under this License and any conditions added under section 7. This requirement modifies the requirement in section 4 to \u201ckeep intact all notices\u201d.</li> <li>c) You must license the entire work, as a whole, under this License to anyone who comes into possession of a copy.  This License will therefore apply, along with any applicable section 7 additional terms, to the whole of the work, and all its parts, regardless of how they are packaged.  This License gives no permission to license the work in any other way, but it does not invalidate such permission if you have separately received it.</li> <li>d) If the work has interactive user interfaces, each must display Appropriate Legal Notices; however, if the Program has interactive interfaces that do not display Appropriate Legal Notices, your work need not make them do so.</li> </ul> <p>A compilation of a covered work with other separate and independent works, which are not by their nature extensions of the covered work, and which are not combined with it such as to form a larger program, in or on a volume of a storage or distribution medium, is called an \u201caggregate\u201d if the compilation and its resulting copyright are not used to limit the access or legal rights of the compilation's users beyond what the individual works permit.  Inclusion of a covered work in an aggregate does not cause this License to apply to the other parts of the aggregate.</p>","title":"5. Conveying Modified Source Versions"},{"location":"license/agpl/#6-conveying-non-source-forms","text":"<p>You may convey a covered work in object code form under the terms of sections 4 and 5, provided that you also convey the machine-readable Corresponding Source under the terms of this License, in one of these ways:</p> <ul> <li>a) Convey the object code in, or embodied in, a physical product (including a physical distribution medium), accompanied by the Corresponding Source fixed on a durable physical medium customarily used for software interchange.</li> <li>b) Convey the object code in, or embodied in, a physical product (including a physical distribution medium), accompanied by a written offer, valid for at least three years and valid for as long as you offer spare parts or customer support for that product model, to give anyone who possesses the object code either (1) a copy of the Corresponding Source for all the software in the product that is covered by this License, on a durable physical medium customarily used for software interchange, for a price no more than your reasonable cost of physically performing this conveying of source, or (2) access to copy the Corresponding Source from a network server at no charge.</li> <li>c) Convey individual copies of the object code with a copy of the written offer to provide the Corresponding Source.  This alternative is allowed only occasionally and noncommercially, and only if you received the object code with such an offer, in accord with subsection 6b.</li> <li>d) Convey the object code by offering access from a designated place (gratis or for a charge), and offer equivalent access to the Corresponding Source in the same way through the same place at no further charge.  You need not require recipients to copy the Corresponding Source along with the object code.  If the place to copy the object code is a network server, the Corresponding Source may be on a different server (operated by you or a third party) that supports equivalent copying facilities, provided you maintain clear directions next to the object code saying where to find the Corresponding Source.  Regardless of what server hosts the Corresponding Source, you remain obligated to ensure that it is available for as long as needed to satisfy these requirements.</li> <li>e) Convey the object code using peer-to-peer transmission, provided you inform other peers where the object code and Corresponding Source of the work are being offered to the general public at no charge under subsection 6d.</li> </ul> <p>A separable portion of the object code, whose source code is excluded from the Corresponding Source as a System Library, need not be included in conveying the object code work.</p> <p>A \u201cUser Product\u201d is either (1) a \u201cconsumer product\u201d, which means any tangible personal property which is normally used for personal, family, or household purposes, or (2) anything designed or sold for incorporation into a dwelling.  In determining whether a product is a consumer product, doubtful cases shall be resolved in favor of coverage.  For a particular product received by a particular user, \u201cnormally used\u201d refers to a typical or common use of that class of product, regardless of the status of the particular user or of the way in which the particular user actually uses, or expects or is expected to use, the product.  A product is a consumer product regardless of whether the product has substantial commercial, industrial or non-consumer uses, unless such uses represent the only significant mode of use of the product.</p> <p>\u201cInstallation Information\u201d for a User Product means any methods, procedures, authorization keys, or other information required to install and execute modified versions of a covered work in that User Product from a modified version of its Corresponding Source.  The information must suffice to ensure that the continued functioning of the modified object code is in no case prevented or interfered with solely because modification has been made.</p> <p>If you convey an object code work under this section in, or with, or specifically for use in, a User Product, and the conveying occurs as part of a transaction in which the right of possession and use of the User Product is transferred to the recipient in perpetuity or for a fixed term (regardless of how the transaction is characterized), the Corresponding Source conveyed under this section must be accompanied by the Installation Information.  But this requirement does not apply if neither you nor any third party retains the ability to install modified object code on the User Product (for example, the work has been installed in ROM).</p> <p>The requirement to provide Installation Information does not include a requirement to continue to provide support service, warranty, or updates for a work that has been modified or installed by the recipient, or for the User Product in which it has been modified or installed.  Access to a network may be denied when the modification itself materially and adversely affects the operation of the network or violates the rules and protocols for communication across the network.</p> <p>Corresponding Source conveyed, and Installation Information provided, in accord with this section must be in a format that is publicly documented (and with an implementation available to the public in source code form), and must require no special password or key for unpacking, reading or copying.</p>","title":"6. Conveying Non-Source Forms"},{"location":"license/agpl/#7-additional-terms","text":"<p>\u201cAdditional permissions\u201d are terms that supplement the terms of this License by making exceptions from one or more of its conditions. Additional permissions that are applicable to the entire Program shall be treated as though they were included in this License, to the extent that they are valid under applicable law.  If additional permissions apply only to part of the Program, that part may be used separately under those permissions, but the entire Program remains governed by this License without regard to the additional permissions.</p> <p>When you convey a copy of a covered work, you may at your option remove any additional permissions from that copy, or from any part of it.  (Additional permissions may be written to require their own removal in certain cases when you modify the work.)  You may place additional permissions on material, added by you to a covered work, for which you have or can give appropriate copyright permission.</p> <p>Notwithstanding any other provision of this License, for material you add to a covered work, you may (if authorized by the copyright holders of that material) supplement the terms of this License with terms:</p> <ul> <li>a) Disclaiming warranty or limiting liability differently from the terms of sections 15 and 16 of this License; or</li> <li>b) Requiring preservation of specified reasonable legal notices or author attributions in that material or in the Appropriate Legal Notices displayed by works containing it; or</li> <li>c) Prohibiting misrepresentation of the origin of that material, or requiring that modified versions of such material be marked in reasonable ways as different from the original version; or</li> <li>d) Limiting the use for publicity purposes of names of licensors or authors of the material; or</li> <li>e) Declining to grant rights under trademark law for use of some trade names, trademarks, or service marks; or</li> <li>f) Requiring indemnification of licensors and authors of that material by anyone who conveys the material (or modified versions of it) with contractual assumptions of liability to the recipient, for any liability that these contractual assumptions directly impose on those licensors and authors.</li> </ul> <p>All other non-permissive additional terms are considered \u201cfurther restrictions\u201d within the meaning of section 10.  If the Program as you received it, or any part of it, contains a notice stating that it is governed by this License along with a term that is a further restriction, you may remove that term.  If a license document contains a further restriction but permits relicensing or conveying under this License, you may add to a covered work material governed by the terms of that license document, provided that the further restriction does not survive such relicensing or conveying.</p> <p>If you add terms to a covered work in accord with this section, you must place, in the relevant source files, a statement of the additional terms that apply to those files, or a notice indicating where to find the applicable terms.</p> <p>Additional terms, permissive or non-permissive, may be stated in the form of a separately written license, or stated as exceptions; the above requirements apply either way.</p>","title":"7. Additional Terms"},{"location":"license/agpl/#8-termination","text":"<p>You may not propagate or modify a covered work except as expressly provided under this License.  Any attempt otherwise to propagate or modify it is void, and will automatically terminate your rights under this License (including any patent licenses granted under the third paragraph of section 11).</p> <p>However, if you cease all violation of this License, then your license from a particular copyright holder is reinstated (a) provisionally, unless and until the copyright holder explicitly and finally terminates your license, and (b) permanently, if the copyright holder fails to notify you of the violation by some reasonable means prior to 60 days after the cessation.</p> <p>Moreover, your license from a particular copyright holder is reinstated permanently if the copyright holder notifies you of the violation by some reasonable means, this is the first time you have received notice of violation of this License (for any work) from that copyright holder, and you cure the violation prior to 30 days after your receipt of the notice.</p> <p>Termination of your rights under this section does not terminate the licenses of parties who have received copies or rights from you under this License.  If your rights have been terminated and not permanently reinstated, you do not qualify to receive new licenses for the same material under section 10.</p>","title":"8. Termination"},{"location":"license/agpl/#9-acceptance-not-required-for-having-copies","text":"<p>You are not required to accept this License in order to receive or run a copy of the Program.  Ancillary propagation of a covered work occurring solely as a consequence of using peer-to-peer transmission to receive a copy likewise does not require acceptance.  However, nothing other than this License grants you permission to propagate or modify any covered work.  These actions infringe copyright if you do not accept this License.  Therefore, by modifying or propagating a covered work, you indicate your acceptance of this License to do so.</p>","title":"9. Acceptance Not Required for Having Copies"},{"location":"license/agpl/#10-automatic-licensing-of-downstream-recipients","text":"<p>Each time you convey a covered work, the recipient automatically receives a license from the original licensors, to run, modify and propagate that work, subject to this License.  You are not responsible for enforcing compliance by third parties with this License.</p> <p>An \u201centity transaction\u201d is a transaction transferring control of an organization, or substantially all assets of one, or subdividing an organization, or merging organizations.  If propagation of a covered work results from an entity transaction, each party to that transaction who receives a copy of the work also receives whatever licenses to the work the party's predecessor in interest had or could give under the previous paragraph, plus a right to possession of the Corresponding Source of the work from the predecessor in interest, if the predecessor has it or can get it with reasonable efforts.</p> <p>You may not impose any further restrictions on the exercise of the rights granted or affirmed under this License.  For example, you may not impose a license fee, royalty, or other charge for exercise of rights granted under this License, and you may not initiate litigation (including a cross-claim or counterclaim in a lawsuit) alleging that any patent claim is infringed by making, using, selling, offering for sale, or importing the Program or any portion of it.</p>","title":"10. Automatic Licensing of Downstream Recipients"},{"location":"license/agpl/#11-patents","text":"<p>A \u201ccontributor\u201d is a copyright holder who authorizes use under this License of the Program or a work on which the Program is based.  The work thus licensed is called the contributor's \u201ccontributor version\u201d.</p> <p>A contributor's \u201cessential patent claims\u201d are all patent claims owned or controlled by the contributor, whether already acquired or hereafter acquired, that would be infringed by some manner, permitted by this License, of making, using, or selling its contributor version, but do not include claims that would be infringed only as a consequence of further modification of the contributor version.  For purposes of this definition, \u201ccontrol\u201d includes the right to grant patent sublicenses in a manner consistent with the requirements of this License.</p> <p>Each contributor grants you a non-exclusive, worldwide, royalty-free patent license under the contributor's essential patent claims, to make, use, sell, offer for sale, import and otherwise run, modify and propagate the contents of its contributor version.</p> <p>In the following three paragraphs, a \u201cpatent license\u201d is any express agreement or commitment, however denominated, not to enforce a patent (such as an express permission to practice a patent or covenant not to sue for patent infringement).  To \u201cgrant\u201d such a patent license to a party means to make such an agreement or commitment not to enforce a patent against the party.</p> <p>If you convey a covered work, knowingly relying on a patent license, and the Corresponding Source of the work is not available for anyone to copy, free of charge and under the terms of this License, through a publicly available network server or other readily accessible means, then you must either (1) cause the Corresponding Source to be so available, or (2) arrange to deprive yourself of the benefit of the patent license for this particular work, or (3) arrange, in a manner consistent with the requirements of this License, to extend the patent license to downstream recipients.  \u201cKnowingly relying\u201d means you have actual knowledge that, but for the patent license, your conveying the covered work in a country, or your recipient's use of the covered work in a country, would infringe one or more identifiable patents in that country that you have reason to believe are valid.</p> <p>If, pursuant to or in connection with a single transaction or arrangement, you convey, or propagate by procuring conveyance of, a covered work, and grant a patent license to some of the parties receiving the covered work authorizing them to use, propagate, modify or convey a specific copy of the covered work, then the patent license you grant is automatically extended to all recipients of the covered work and works based on it.</p> <p>A patent license is \u201cdiscriminatory\u201d if it does not include within the scope of its coverage, prohibits the exercise of, or is conditioned on the non-exercise of one or more of the rights that are specifically granted under this License.  You may not convey a covered work if you are a party to an arrangement with a third party that is in the business of distributing software, under which you make payment to the third party based on the extent of your activity of conveying the work, and under which the third party grants, to any of the parties who would receive the covered work from you, a discriminatory patent license (a) in connection with copies of the covered work conveyed by you (or copies made from those copies), or (b) primarily for and in connection with specific products or compilations that contain the covered work, unless you entered into that arrangement, or that patent license was granted, prior to 28 March 2007.</p> <p>Nothing in this License shall be construed as excluding or limiting any implied license or other defenses to infringement that may otherwise be available to you under applicable patent law.</p>","title":"11. Patents"},{"location":"license/agpl/#12-no-surrender-of-others-freedom","text":"<p>If conditions are imposed on you (whether by court order, agreement or otherwise) that contradict the conditions of this License, they do not excuse you from the conditions of this License.  If you cannot convey a covered work so as to satisfy simultaneously your obligations under this License and any other pertinent obligations, then as a consequence you may not convey it at all.  For example, if you agree to terms that obligate you to collect a royalty for further conveying from those to whom you convey the Program, the only way you could satisfy both those terms and this License would be to refrain entirely from conveying the Program.</p>","title":"12. No Surrender of Others' Freedom"},{"location":"license/agpl/#13-remote-network-interaction-use-with-the-gnu-general-public-license","text":"<p>Notwithstanding any other provision of this License, if you modify the Program, your modified version must prominently offer all users interacting with it remotely through a computer network (if your version supports such interaction) an opportunity to receive the Corresponding Source of your version by providing access to the Corresponding Source from a network server at no charge, through some standard or customary means of facilitating copying of software.  This Corresponding Source shall include the Corresponding Source for any work covered by version 3 of the GNU General Public License that is incorporated pursuant to the following paragraph.</p> <p>Notwithstanding any other provision of this License, you have permission to link or combine any covered work with a work licensed under version 3 of the GNU General Public License into a single combined work, and to convey the resulting work.  The terms of this License will continue to apply to the part which is the covered work, but the work with which it is combined will remain governed by version 3 of the GNU General Public License.</p>","title":"13. Remote Network Interaction; Use with the GNU General Public License"},{"location":"license/agpl/#14-revised-versions-of-this-license","text":"<p>The Free Software Foundation may publish revised and/or new versions of the GNU Affero General Public License from time to time.  Such new versions will be similar in spirit to the present version, but may differ in detail to address new problems or concerns.</p> <p>Each version is given a distinguishing version number.  If the Program specifies that a certain numbered version of the GNU Affero General Public License \u201cor any later version\u201d applies to it, you have the option of following the terms and conditions either of that numbered version or of any later version published by the Free Software Foundation.  If the Program does not specify a version number of the GNU Affero General Public License, you may choose any version ever published by the Free Software Foundation.</p> <p>If the Program specifies that a proxy can decide which future versions of the GNU Affero General Public License can be used, that proxy's public statement of acceptance of a version permanently authorizes you to choose that version for the Program.</p> <p>Later license versions may give you additional or different permissions.  However, no additional obligations are imposed on any author or copyright holder as a result of your choosing to follow a later version.</p>","title":"14. Revised Versions of this License"},{"location":"license/agpl/#15-disclaimer-of-warranty","text":"<p>THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM \u201cAS IS\u201d WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.</p>","title":"15. Disclaimer of Warranty"},{"location":"license/agpl/#16-limitation-of-liability","text":"<p>IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.</p>","title":"16. Limitation of Liability"},{"location":"license/agpl/#17-interpretation-of-sections-15-and-16","text":"<p>If the disclaimer of warranty and limitation of liability provided above cannot be given local legal effect according to their terms, reviewing courts shall apply local law that most closely approximates an absolute waiver of all civil liability in connection with the Program, unless a warranty or assumption of liability accompanies a copy of the Program in return for a fee.</p>","title":"17. Interpretation of Sections 15 and 16"},{"location":"license/agpl/#additional-terms","text":"","title":"ADDITIONAL TERMS"},{"location":"license/agpl/#18-photoprism-trademark-and-brand-assets","text":"<p>(a) PhotoPrism\u2019s Brand Assets \u2014 including trademarks, logos, icons, fonts, corporate design, product and service names, and any other brand features and elements, whether registered or unregistered (\u201eBrand Assets\u201c) \u2014 are proprietary assets owned exclusively by PhotoPrism UG (\u201ePhotoPrism\u201c). We reserve the right to object to any use or misuse in any jurisdiction worldwide. Visit photoprism.app/trademark to learn more.</p> <p>(b) Contributors, licensees, business partners, and other third parties may never claim ownership of PhotoPrism's Brand Assets or brands confusingly similar to PhotoPrism's Brand Assets in any way, including, without limitation, as a trademark, service mark, company name or designation, domain name, social media profile/handle, or in any other manner.</p> <p>(c) You may not include the PhotoPrism trademark in the name of your app, product, or service, whether commercial or non-commercial in nature. This includes online services such as e-commerce, community, blog, information, advertising, and personal home pages, as well as apps, app stores, client apps, or third-party apps that interact with PhotoPrism.</p> <p>(d) In the event that any provision is found to be unenforceable by a court or other competent jurisdiction, the remaining portions hereof shall remain in full force and effect.</p> <p>END OF TERMS AND CONDITIONS</p>","title":"18. PhotoPrism\u00ae Trademark and Brand Assets"},{"location":"license/docs/","text":"","title":"PhotoPrism\u00ae Documentation License"},{"location":"license/docs/#creative-commons-attribution-noncommercial-sharealike-40-international-public-license","text":"<p>By exercising the Licensed Rights (defined below), You accept and agree to be bound by the terms and conditions of this Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International Public License (\"Public License\"). To the extent this Public License may be interpreted as a contract, You are granted the Licensed Rights in consideration of Your acceptance of these terms and conditions, and the Licensor grants You such rights in consideration of benefits the Licensor receives from making the Licensed Material available under these terms and conditions.</p>","title":"Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International Public License"},{"location":"license/docs/#section-1-definitions","text":"<p>a. Adapted Material means material subject to Copyright and Similar Rights that is derived from or based upon the Licensed Material and in which the Licensed Material is translated, altered, arranged, transformed, or otherwise modified in a manner requiring permission under the Copyright and Similar Rights held by the Licensor. For purposes of this Public License, where the Licensed Material is a musical work, performance, or sound recording, Adapted Material is always produced where the Licensed Material is synched in timed relation with a moving image.</p> <p>b. Adapter's License means the license You apply to Your Copyright and Similar Rights in Your contributions to Adapted Material in accordance with the terms and conditions of this Public License.</p> <p>c. BY-NC-SA Compatible License means a license listed at creativecommons.org/compatiblelicenses, approved by Creative Commons as essentially the equivalent of this Public License.</p> <p>d. Copyright and Similar Rights means copyright and/or similar rights closely related to copyright including, without limitation, performance, broadcast, sound recording, and Sui Generis Database Rights, without regard to how the rights are labeled or categorized. For purposes of this Public License, the rights specified in Section 2(b)(1)-(2) are not Copyright and Similar Rights.</p> <p>e. Effective Technological Measures means those measures that, in the absence of proper authority, may not be circumvented under laws fulfilling obligations under Article 11 of the WIPO Copyright Treaty adopted on December 20, 1996, and/or similar international agreements.</p> <p>f. Exceptions and Limitations means fair use, fair dealing, and/or any other exception or limitation to Copyright and Similar Rights that applies to Your use of the Licensed Material.</p> <p>g. License Elements means the license attributes listed in the name of a Creative Commons Public License. The License Elements of this Public License are Attribution, NonCommercial, and ShareAlike.</p> <p>h. Licensed Material means the artistic or literary work, database, or other material to which the Licensor applied this Public License.</p> <p>i. Licensed Rights means the rights granted to You subject to the terms and conditions of this Public License, which are limited to all Copyright and Similar Rights that apply to Your use of the Licensed Material and that the Licensor has authority to license.</p> <p>h. Licensor means the individual(s) or entity(ies) granting rights under this Public License.</p> <p>i. NonCommercial means not primarily intended for or directed towards commercial advantage or monetary compensation. For purposes of this Public License, the exchange of the Licensed Material for other material subject to Copyright and Similar Rights by digital file-sharing or similar means is NonCommercial provided there is no payment of monetary compensation in connection with the exchange.</p> <p>j. Share means to provide material to the public by any means or process that requires permission under the Licensed Rights, such as reproduction, public display, public performance, distribution, dissemination, communication, or importation, and to make material available to the public including in ways that members of the public may access the material from a place and at a time individually chosen by them.</p> <p>k. Sui Generis Database Rights means rights other than copyright resulting from Directive 96/9/EC of the European Parliament and of the Council of 11 March 1996 on the legal protection of databases, as amended and/or succeeded, as well as other essentially equivalent rights anywhere in the world.</p> <p>l. You means the individual or entity exercising the Licensed Rights under this Public License. Your has a corresponding meaning.</p>","title":"Section 1 \u2013 Definitions."},{"location":"license/docs/#section-2-scope","text":"<p>a. License grant.</p> <ol> <li>Subject to the terms and conditions of this Public License, the Licensor hereby grants You a worldwide, royalty-free, non-sublicensable, non-exclusive, irrevocable license to exercise the Licensed Rights in the Licensed Material to:</li> </ol> <p>A. reproduce and Share the Licensed Material, in whole or in part, for NonCommercial purposes only; and</p> <p>B. produce, reproduce, and Share Adapted Material for NonCommercial purposes only.</p> <ol> <li> <p>Exceptions and Limitations. For the avoidance of doubt, where Exceptions and Limitations apply to Your use, this Public License does not apply, and You do not need to comply with its terms and conditions.</p> </li> <li> <p>Term. The term of this Public License is specified in Section 6(a).</p> </li> <li> <p>Media and formats; technical modifications allowed. The Licensor authorizes You to exercise the Licensed Rights in all media and formats whether now known or hereafter created, and to make technical modifications necessary to do so. The Licensor waives and/or agrees not to assert any right or authority to forbid You from making technical modifications necessary to exercise the Licensed Rights, including technical modifications necessary to circumvent Effective Technological Measures. For purposes of this Public License, simply making modifications authorized by this Section 2(a)(4) never produces Adapted Material.</p> </li> <li> <p>Downstream recipients.</p> </li> </ol> <p>A. Offer from the Licensor \u2013 Licensed Material. Every recipient of the Licensed Material automatically receives an offer from the Licensor to exercise the Licensed Rights under the terms and conditions of this Public License.</p> <p>B. Additional offer from the Licensor \u2013 Adapted Material. Every recipient of Adapted Material from You automatically receives an offer from the Licensor to exercise the Licensed Rights in the Adapted Material under the conditions of the Adapter\u2019s License You apply.</p> <p>C. No downstream restrictions. You may not offer or impose any additional or different terms or conditions on, or apply any Effective Technological Measures to, the Licensed Material if doing so restricts exercise of the Licensed Rights by any recipient of the Licensed Material.</p> <ol> <li>No endorsement. Nothing in this Public License constitutes or may be construed as permission to assert or imply that You are, or that Your use of the Licensed Material is, connected with, or sponsored, endorsed, or granted official status by, the Licensor or others designated to receive attribution as provided in Section 3(a)(1)(A)(i).</li> </ol> <p>b. Other rights.</p> <ol> <li> <p>Moral rights, such as the right of integrity, are not licensed under this Public License, nor are publicity, privacy, and/or other similar personality rights; however, to the extent possible, the Licensor waives and/or agrees not to assert any such rights held by the Licensor to the limited extent necessary to allow You to exercise the Licensed Rights, but not otherwise.</p> </li> <li> <p>Patent and trademark rights are not licensed under this Public License.</p> </li> <li> <p>To the extent possible, the Licensor waives any right to collect royalties from You for the exercise of the Licensed Rights, whether directly or through a collecting society under any voluntary or waivable statutory or compulsory licensing scheme. In all other cases the Licensor expressly reserves any right to collect such royalties, including when the Licensed Material is used other than for NonCommercial purposes.</p> </li> </ol>","title":"Section 2 \u2013 Scope."},{"location":"license/docs/#section-3-license-conditions","text":"<p>Your exercise of the Licensed Rights is expressly made subject to the following conditions.</p> <p>a. Attribution.</p> <ol> <li>If You Share the Licensed Material (including in modified form), You must:</li> </ol> <p>A. retain the following if it is supplied by the Licensor with the Licensed Material:</p> <p>i. identification of the creator(s) of the Licensed Material and any others designated to receive attribution, in any reasonable manner requested by the Licensor (including by pseudonym if designated);</p> <p>ii. a copyright notice;</p> <p>iii. a notice that refers to this Public License;</p> <p>iv. a notice that refers to the disclaimer of warranties;</p> <p>v. a URI or hyperlink to the Licensed Material to the extent reasonably practicable;</p> <p>B. indicate if You modified the Licensed Material and retain an indication of any previous modifications; and</p> <p>C. indicate the Licensed Material is licensed under this Public License, and include the text of, or the URI or hyperlink to, this Public License.</p> <ol> <li> <p>You may satisfy the conditions in Section 3(a)(1) in any reasonable manner based on the medium, means, and context in which You Share the Licensed Material. For example, it may be reasonable to satisfy the conditions by providing a URI or hyperlink to a resource that includes the required information.</p> </li> <li> <p>If requested by the Licensor, You must remove any of the information required by Section 3(a)(1)(A) to the extent reasonably practicable.</p> </li> </ol> <p>b. ShareAlike.</p> <p>In addition to the conditions in Section 3(a), if You Share Adapted Material You produce, the following conditions also apply.</p> <ol> <li> <p>The Adapter\u2019s License You apply must be a Creative Commons license with the same License Elements, this version or later, or a BY-NC-SA Compatible License.</p> </li> <li> <p>You must include the text of, or the URI or hyperlink to, the Adapter's License You apply. You may satisfy this condition in any reasonable manner based on the medium, means, and context in which You Share Adapted Material.</p> </li> <li> <p>You may not offer or impose any additional or different terms or conditions on, or apply any Effective Technological Measures to, Adapted Material that restrict exercise of the rights granted under the Adapter's License You apply.</p> </li> </ol>","title":"Section 3 \u2013 License Conditions."},{"location":"license/docs/#section-4-sui-generis-database-rights","text":"<p>Where the Licensed Rights include Sui Generis Database Rights that apply to Your use of the Licensed Material:</p> <p>a. for the avoidance of doubt, Section 2(a)(1) grants You the right to extract, reuse, reproduce, and Share all or a substantial portion of the contents of the database for NonCommercial purposes only;</p> <p>b. if You include all or a substantial portion of the database contents in a database in which You have Sui Generis Database Rights, then the database in which You have Sui Generis Database Rights (but not its individual contents) is Adapted Material, including for purposes of Section 3(b); and</p> <p>c. You must comply with the conditions in Section 3(a) if You Share all or a substantial portion of the contents of the database.</p> <p>For the avoidance of doubt, this Section 4 supplements and does not replace Your obligations under this Public License where the Licensed Rights include other Copyright and Similar Rights.</p>","title":"Section 4 \u2013 Sui Generis Database Rights."},{"location":"license/docs/#section-5-disclaimer-of-warranties-and-limitation-of-liability","text":"<p>a. Unless otherwise separately undertaken by the Licensor, to the extent possible, the Licensor offers the Licensed Material as-is and as-available, and makes no representations or warranties of any kind concerning the Licensed Material, whether express, implied, statutory, or other. This includes, without limitation, warranties of title, merchantability, fitness for a particular purpose, non-infringement, absence of latent or other defects, accuracy, or the presence or absence of errors, whether or not known or discoverable. Where disclaimers of warranties are not allowed in full or in part, this disclaimer may not apply to You.</p> <p>b. To the extent possible, in no event will the Licensor be liable to You on any legal theory (including, without limitation, negligence) or otherwise for any direct, special, indirect, incidental, consequential, punitive, exemplary, or other losses, costs, expenses, or damages arising out of this Public License or use of the Licensed Material, even if the Licensor has been advised of the possibility of such losses, costs, expenses, or damages. Where a limitation of liability is not allowed in full or in part, this limitation may not apply to You.</p> <p>c. The disclaimer of warranties and limitation of liability provided above shall be interpreted in a manner that, to the extent possible, most closely approximates an absolute disclaimer and waiver of all liability.</p>","title":"Section 5 \u2013 Disclaimer of Warranties and Limitation of Liability."},{"location":"license/docs/#section-6-term-and-termination","text":"<p>a. This Public License applies for the term of the Copyright and Similar Rights licensed here. However, if You fail to comply with this Public License, then Your rights under this Public License terminate automatically.</p> <p>b. Where Your right to use the Licensed Material has terminated under Section 6(a), it reinstates:</p> <ol> <li> <p>automatically as of the date the violation is cured, provided it is cured within 30 days of Your discovery of the violation; or</p> </li> <li> <p>automatically as of the date the violation is cured, provided it is cured within 30 days of Your discovery of the violation; or</p> </li> </ol> <p>For the avoidance of doubt, this Section 6(b) does not affect any right the Licensor may have to seek remedies for Your violations of this Public License.</p> <p>c. For the avoidance of doubt, the Licensor may also offer the Licensed Material under separate terms or conditions or stop distributing the Licensed Material at any time; however, doing so will not terminate this Public License.</p> <p>d. Sections 1, 5, 6, 7, and 8 survive termination of this Public License.</p>","title":"Section 6 \u2013 Term and Termination."},{"location":"license/docs/#section-7-other-terms-and-conditions","text":"<p>a. The Licensor shall not be bound by any additional or different terms or conditions communicated by You unless expressly agreed.</p> <p>b. Any arrangements, understandings, or agreements regarding the Licensed Material not stated herein are separate from and independent of the terms and conditions of this Public License.</p>","title":"Section 7 \u2013 Other Terms and Conditions."},{"location":"license/docs/#section-8-interpretation","text":"<p>a. For the avoidance of doubt, this Public License does not, and shall not be interpreted to, reduce, limit, restrict, or impose conditions on any use of the Licensed Material that could lawfully be made without permission under this Public License.</p> <p>b. To the extent possible, if any provision of this Public License is deemed unenforceable, it shall be automatically reformed to the minimum extent necessary to make it enforceable. If the provision cannot be reformed, it shall be severed from this Public License without affecting the enforceability of the remaining terms and conditions.</p> <p>c. No term or condition of this Public License will be waived and no failure to comply consented to unless expressly agreed to by the Licensor.</p> <p>d. Nothing in this Public License constitutes or may be interpreted as a limitation upon, or waiver of, any privileges and immunities that apply to the Licensor or You, including from the legal processes of any jurisdiction or authority.</p>","title":"Section 8 \u2013 Interpretation."},{"location":"user-guide/","text":"<p>Step-by-step installation instructions for our self-hosted community edition can be found in Getting Started. All you need is a Web browser and  Docker to run the server. It is available for Mac, Linux, and Windows. PhotoPrism also runs on PikaPods, DigitalOcean, Raspberry Pi, FreeBSD, and many NAS devices.</p> <p></p> <p>Once the initial setup is complete, our First Steps \ud83d\udc63 tutorial guides you through the user interface and settings to ensure your library is indexed according to your individual preferences.</p>","title":"User Guide"},{"location":"user-guide/#getting-support","text":"<p>If you need help installing our software at home, you can join us on Reddit, ask in our Community Chat, or post your question in GitHub Discussions. Common problems can be quickly diagnosed and solved using the Troubleshooting Checklists in Getting Started.</p> <p>We'll do our best to answer all your questions. In return, we ask you to back us on Patreon or GitHub Sponsors. Think of \"free software\" as in \"free speech,\" not as in \"free beer\". Thank you!</p> <p>In exchange for their continued support, sponsors are also welcome to request direct technical support via email. Please bear with us if we are unable to get back to you immediately due to the high volume of emails and contact requests we receive.</p>  <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app. Contact us or a community member if you need help, it could be a local configuration problem, or a misunderstanding in how the software works.</p>","title":"Getting Support"},{"location":"user-guide/faq/","text":"","title":"Frequently Asked Questions"},{"location":"user-guide/faq/#general","text":"When exactly will new features be released? <p>Our Project Roadmap shows what tasks are in progress and what features will be implemented next. You may give ideas you like a thumbs-up, so we know what's most popular.</p> <p>Be aware that we have a zero-bug policy and do our best to help users when they need support or have other questions. This comes at a price though, as we can't give exact release dates for new features. Our team receives many more requests than can be implemented, so we want to emphasize that we are in no way obligated to implement the features, enhancements, or other changes you request. We do, however, appreciate your feedback and carefully consider all requests.</p> <p>Since sustained funding is key to quickly releasing new features, we encourage all users to support our mission by signing up as a sponsor or purchasing a commercial license.</p>   Does your software depend on any external services? <p>As explained in detail in our Privacy Policy, reverse geocoding and interactive world maps depend on retrieving the necessary information from us and MapTiler AG, headquartered in Switzerland. Both services are provided with a very high level of privacy and confidentiality. Please make sure that you allow requests to these API endpoints if you have a firewall installed, and verify that your Internet connection is working.</p> <p>Your use of these services is fully covered by us at the moment. Depending on your usage, this can save you thousands of dollars every month. Other providers typically charge usage-based fees and may also not allow you to cache the data they provide, compromising your privacy with unnecessary requests.</p> <p>Should you still wish to operate one or both of these services on your own premises, we can set up such a fully autonomous solution for you, provided you are prepared to cover the initial setup costs as well as ongoing maintenance fees for content licenses and updates.</p> <p>View Privacy Policy \u203a View Compliance FAQ \u203a</p>   Are the keys for using interactive world maps provided free of charge? <p>The API keys required to use the maps are unfortunately not free for us due to the number of users we have. Those costs are one of the reasons why we encourage all users to support our mission by signing up as a sponsor or purchasing a commercial license.</p> <p>While we could register several \"non-commercial test accounts\" instead, we don't think that would be fair and Maptiler might then stop offering them to those in need.</p> <p>Compare Personal Editions \u203a</p>   What are the advantages of purchasing a commercial license? <p>A key difference between the public license and a commercial license agreement is that you get access to additional support and configuration options, as well as the right to customize functionality to your needs without having to publicly disclose your changes. Our Compliance FAQ gives answers to the most frequently asked questions about product compliance and scalability.</p> <p>Compare Team Editions \u203a</p>   Shouldn't free software be free of costs? <p>Think of \u201cfree software\u201d as in \u201cfree speech,\u201d not as in \u201cfree beer.\u201d The Free Software Foundation sometimes calls it \u201clibre software,\u201d borrowing the French or Spanish word for \u201cfree\u201d as in freedom, to show they do not mean the software is gratis.</p>   Why can't I just purchase and download a single version? <p>Unlike traditional offline apps such as Microsoft Office or single-player games, software exposed to the Internet must be updated regularly to stay secure and compatible with the latest standards.</p> <p>It's essential to keep your operating system, Web browsers, and all other software up to date. Don't push your luck.  Historically, even large tech companies have not supported their old products for an extended period of time, with only a few exceptions. Windows XP, for example, sold 400 million copies, which is why Micorosoft was able to offer updates for such a long time.</p>   Will the self-hosted version continue to be supported? <p>Absolutely! We are on a mission to protect your freedom and privacy. Self-hosting is the easiest way to stay in control and protect your privacy. It also provides the best experience for advanced users who often rely on a local toolchain to select, edit, and publish their pictures.</p> <p>At the same time, we know there's a huge demand and many practical uses for a cloud-hosted app that is easy to set up. We like to give our users the choice and therefore offer a fully managed service as a deployment option. Selected hosting partners ensure that your privacy is protected as much as technically possible, even in the cloud.</p>","title":"General"},{"location":"user-guide/faq/#user-interface","text":"Can I select multiple photos at once? <p>Yes, you can select multiple photos at once </p>   Can I use trees for organizing my pictures and albums? <p>Except in Library &gt; Originals and for object classification in Labels, PhotoPrism does not support hierarchically organized content for a number of reasons:</p> <p>First, there are many tools (including Windows Explorer and Mac OS Finder) that already browse folders in such a way.</p> <p>A common UX challenge is dealing with namespaces. For example, the album \"Berlin\" may exist 5 times in different parts of a tree. To avoid ambiguities, simple input fields need to be replaced with a tree browser that shows the complete context. This is especially difficult on mobile screens.</p> <p>Personal albums can typically be browsed by time, with optional filters for more specific results. This is different in Enterprise asset management, where trees are required to manage responsibilities &amp; permissions. We might do a special release for professional users later.</p> <p>While you have complete freedom with organizing your original files and folders, we don't think trees should be an integral part of our user interface. Most users won't be able to sort their memories in a strictly hierarchical way and prefer to explore them in multiple dimensions instead.</p>   What's the difference between keywords and labels? <p>Keywords contain a list of search terms extracted from metadata, file names, and other sources like geodata. Pictures with matching keywords automatically show up in related Labels.</p> <p>Although related, keywords and labels serve different purposes:</p> <ul> <li> <p>Labels may have parent categories and are primarily used for classification, like \"animal\", \"cat\", or \"boat\". Duplicates and ambiguities should be avoided.</p> </li> <li> <p>Keywords are primarily used for searching. They may include similar terms and translations, like \"kitten\", \"kitty\", and \"cat\".</p> </li> </ul>   Can I use the web interface to permanently delete files? <p>Yes, you can permanently delete files.</p>","title":"User Interface"},{"location":"user-guide/faq/#search","text":"Why can't I play live photos or find stacks when I search for specific images? <p>Our search API and user interface perform a file search. This is intentional since \"stacks\" can contain files of different types and properties, such as color.</p> <p>For example, there may be color and monochrome versions. Now, when you search for them or sort them by color, the user interface must display individual files. Otherwise, the results showing a color image/video when you filter by monochrome would make no sense.</p> <p>Likewise, if you search for <code>filename.mp4.*</code>, you will find only JPEGs without video, because the video file extension is <code>.mp4</code> without an extra dot at the end.</p> <p>We recommend using the <code>path:</code> and/or <code>name:</code> filters with wildcards if searching for individual files limits the search results too much. Most users will want to find all related files so that they can be displayed together, e.g. as live photos consisting of a video and an image.</p> <p>You can combine these filters with other filters such as <code>live</code> to ensure that the results include only pictures with a specific media type. Alternatively, you can use the <code>filename:</code> filter with a more permissive wildcard that excludes the file extension.</p>","title":"Search"},{"location":"user-guide/faq/#library-counts-files","text":"What media file types are supported? <p>PhotoPrism supports indexing, viewing, and converting most popular image, video and RAW formats, including JPEG, PNG, GIF, BMP, HEIF, HEIC, MP4, MOV, WebP, and WebM.  TIFF is partially supported without extensions like GeoTIFF.</p> <p>The internally used image format is JPEG. When indexing, a JPEG sidecar file can be created automatically for videos and images in other formats. It is needed for thumbnail generation, image classification, and face detection. JPEG XL support is planned as soon as it is generally available and enough compatible tools exist.</p> <p>If installed, converting RAW files is possible with the following converters (our Docker image includes both):</p> <ul> <li>Darktable (supported cameras)</li> <li>RawTherapee (supported cameras)</li> </ul> <p>On a Mac, RAW files can also be converted with Sips (supported cameras). Our goal is to provide top-notch support for all RAW formats, regardless of camera make and model. Please let us know about any issues with a particular camera or file format.</p> <p>For maximum browser compatibility, video codecs and containers supported by FFmpeg can be transcoded to MPEG-4 AVC on demand, just as still images can be extracted for thumbnail creation.</p> <p>Make sure you have JSON sidecar files enabled if you have videos, live photos, and/or animated GIFs so that video-specific metadata such as codec, frames, and duration can be extracted, indexed, and searched.</p> <p>For a complete list of file formats and extensions, see our downloadable Feature Overview.</p>   What metadata sidecar file types are supported? <p>Currently, three types of file formats are supported:</p>","title":"Library, Counts &amp; Files"},{"location":"user-guide/faq/#json","text":"<p>If not disabled via <code>PHOTOPRISM_DISABLE_EXIFTOOL</code> or <code>--disable-exiftool</code>, Exiftool is used to automatically create a JSON sidecar for each media file. In this way, embedded XMP and video metadata can also be indexed. Native metadata extraction is limited to common Exif headers. Note that this causes small amount of overhead when indexing for the first time.</p> <p>JSON files can also be useful for debugging, as they contain the full metadata and can be processed with common development tools and text editors.</p> <p>Metadata JSON files exported from Google Photos can be read as well. Support for more schemas may be added over time.</p>","title":"JSON"},{"location":"user-guide/faq/#yaml","text":"<p>Unless disabled via <code>PHOTOPRISM_DISABLE_BACKUPS</code> or <code>--disable-backups</code>, PhotoPrism automatically creates/updates human-friendly YAML sidecar files during indexing and after manual editing of fields such as title, date, or location. They serve as a backup in case the database (index) is lost, or when folders are synchronized with a remote instance.</p> <p>Like JSON, YAML files can be opened with common development tools and text editors. However, changes are not synchronized with the original index, as this could overwrite existing data.</p>","title":"YAML"},{"location":"user-guide/faq/#xmp","text":"<p>XMP (Extensible Metadata Platform) is an XML-based metadata container format developed by Adobe. It provides many more fields (as part of embedded models like Dublin Core) than Exif. This also makes it difficult - if not impossible - to provide full support. Reading title, copyright, artist, and description from XMP sidecar files is implemented as a proof-of-concept, contributions are welcome. Indexing of embedded XMP is only possible via Exiftool, see above.</p>   Are JPEGs updated when RAW or XMP files change? <p>JPEGs are currently not regenerated when related RAW or XMP files change. RAW files are digital negatives by design. PhotoPrism therefore assumes that their image information is immutable.</p> <p>XMP files can affect the appearance, but most of the metadata they contain, such as title and description, does not. Creating JPEGs from RAW files is a time-consuming task, and in most cases would cause a huge, unjustified amount of overhead. In addition, the rendering information in XMP files is not well standardized. For example, changes you make in Photoshop may not be compatible with Darktable.</p> <p>We recommend manually updating existing JPEG sidecar files as needed or creating additional JPEGs, so you can choose between different versions. New files and other metadata changes are detected and reflected in the index as usual when your library is scanned.</p>   Some files seem hidden, where are they? <p>If the quality filter is enabled, you might find them in Photos &gt; Review. Otherwise, their format may not be supported, they may be corrupted, or they may be stacked with other files if their name, exact date &amp; location, or unique image ID indicate they belong to the same photo. You may then unstack them if this happened by mistake e.g. because of bad metadata.</p>   For what reasons can files be stacked? <ol> <li>Files sharing exactly the same file and folder name will always be stacked, for example <code>/2018/IMG_1234.jpg</code> and <code>/2018/IMG_1234.avi</code></li> <li>Files with related, sequential names like <code>/2018/IMG_1234 (2).jpg</code> and <code>/2018/IMG_1234 (3).jpg</code> may be stacked as well (optional)</li> <li>Pictures were taken at the same GPS position and second (optional)</li> <li>Image metadata contains the same Unique Image ID or XMP Instance ID (optional)</li> </ol> <p>You can change the behaviour for 2 - 4 in Settings.</p>   I already indexed some files. Why are Folders, Calendar and Moments still empty? <p>Folders, Calendar and Moments are populated at the end of the indexing process.</p>   Why does the count in Search not match the count of files in Originals? <p>Library &gt; Originals shows actual files, whereas Search counts unique photos and videos.</p> <p>Photos and videos may have more than one file, for example:</p> <ul> <li>A raw file + related jpg file + related xmp file = 3 files, 1 photo</li> <li>A mp4 file + related jpg file = 2 files, 1 video</li> </ul> <p>It is also possible that multiple .jpg files are stacked because they are related to each other.</p>","title":"XMP"},{"location":"user-guide/faq/#metadata","text":"Why do some of my photos without geolocation information show a random location? <p>PhotoPrism estimates the location of photos without geolocation from photos that have been taken on the same day. You can disable estimations in Settings.</p>   Why do some pictures have an odd date like 01/01/1980? <p>This may happen in case there was an issue with your camera's settings when the photo was taken. While the date can easily be changed in the edit dialog, this only updates the index without modifying your originals.</p> <p>To fix the date directly in your image or video files, please use other applications like Photoshop, or Exiftool, and re-index your library.</p>","title":"Metadata"},{"location":"user-guide/faq/#thumbnails","text":"Isn't it insecure that thumbnail image URLs work even if you are not logged in? <p>Like most commercial image hosting services, we've chosen to use a cookie-free thumbnail API to minimize request latency and avoid unnecessary network traffic. If you were to copy private session cookies and use them in a different browser window, you would have a similar problem, except that they also work for other API endpoints, not just a single image.</p> <p>Even if URLs were to become invalid every minute: Digital copies are as good as originals. Once shared and downloaded, such images should be considered \"leaked\" because they are cached and can be re-shared by the recipient at any time, with no sure way to get all copies back. Any form of protection we could provide would essentially be \"snake oil\", could be circumvented, and would have a negative impact on the user experience, such as disabling the browser cache or context menu.</p> <p>For the highest level of protection, it is recommended to shield your private server from the public Internet. Always use HTTPS, a VPN and/or ideally TLS client certificates and make sure that only people you trust have access to your instance.</p> <p>Visit docs.photoprism.app/developer-guide/media/thumbnails/ to learn more.</p>","title":"Thumbnails"},{"location":"user-guide/faq/#webdav","text":"Why do I get an error when trying to add a remote server for syncing? <p>When adding a new remote server, PhotoPrism tests a number of common endpoints. Only when that fails, you'll see an error. There may be different reasons for this:</p> <ul> <li>you are using HTTPS with an invalid certificate (not signed, outdated, domain doesn't match,...)</li> <li>your server has permission issues, or an otherwise bad configuration. For example, Nextcloud blocks requests if the host doesn't match <code>trusted_domains</code> in its <code>config.php</code></li> <li>the IP is not reachable from your PhotoPrism instance due to network settings, or a firewall</li> <li>the internal hostname can not be resolved to an IP address</li> <li>it's the wrong host or port</li> <li>username or password are wrong</li> </ul> <p>Curl is an excellent tool for testing HTTP connections if you don't mind using a terminal:</p> <pre><code>curl -X PROPFIND -H \"Depth: 1\" -u user:pass https://example.org/webdav/\n</code></pre> <p>To avoid overlooking issues, it's best to run it from the same Docker container, virtual machine, or server environment where PhotoPrism is installed.</p>   My file sync app fails with \"unable to parse TLS packet headers\" when trying to connect via WebDAV? <p>Because of security considerations, some backup tools and file sync apps like FolderSync removed support for non-SSL HTTP communication.</p> <p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted  by anyone, including your provider, hackers, and governments. Backup tools and file sync apps may refuse to  connect as well.</p>","title":"WebDAV"},{"location":"user-guide/first-steps/","text":"<p>Once the initial setup is complete, there are only two more steps before you can start browsing your pictures:</p> <ol> <li>Configure your library and advanced settings according to your individual preferences.</li> <li>Choose whether you want to index your originals directly, leaving all file and folder names unchanged, or use the optional import feature, which automatically removes duplicates, gives files a unique name, and sorts them by year and month.</li> </ol> <p>If you want to use folders that already exist on your computer, make sure you configured them as originals respectively import folders during setup.</p> <p>To add new pictures, you can either copy them to the originals or import folder, for example using WebDAV, or upload them using a browser, which will automatically import them once uploaded.</p> <p>Then start indexing or importing, depending on which strategy you have chosen.</p>  <p>Ensure there is enough disk space available for creating thumbnails and verify filesystem permissions before starting to index: Files in the originals folder must be readable, while the storage folder including all subdirectories must be readable and writeable.</p>","title":"First Steps \ud83d\udc63"},{"location":"user-guide/first-steps/#while-indexing-is-in-progress","text":"<p>Your photos and videos will successively become visible in search results and other parts of the user interface. Open the Logs tab in Library to watch the indexer working. The counts in the navigation are constantly updated, so you can follow the progress.</p> <p>In case some of your pictures are still missing after indexing has been completed, they might be in Review due to low quality or incomplete metadata. You can turn this and other features off in Settings, depending on your specific use case.</p> <p>Of course, you can continue using your favorite tools for processing RAW files, editing metadata, or importing new shots. Go to Library and click Start to update the index after files have been changed, added, or removed. This can also be automated using CLI commands and a scheduler.</p>  <p>While indexing, JPEG sidecar files may be created for originals in other formats such as RAW and HEIF. This is required for image classification, facial recognition, and for displaying them in a Web browser. Sidecar and thumbnail files will be added to the storage folder, so that your originals folder won't be modified.</p>","title":"While indexing is in progress..."},{"location":"user-guide/first-steps/#setting-up-your-devices","text":"<p>Finally, once indexing is complete and you're happy with the results, you can configure automatic syncing from your phone and install the Progressive Web App (PWA) on your desktop and mobile home screens as needed.</p>","title":"Setting up Your Devices"},{"location":"user-guide/navigate/","text":"<p>The user interface for browsing and searching your pictures is based on the following components. Screenshots in this documentation generally show pages in a medium-resolution desktop browser. All pages are fully responsive, so they may look different on mobile devices.</p> <p></p> <p></p>","title":"Navigating the User Interface"},{"location":"user-guide/navigate/#1-main-navigation","text":"<p>Located on the left, minimized on mobile devices. Click on the links to switch between different pages like Photos, Albums, Places, or Settings.</p>","title":"1. Main Navigation"},{"location":"user-guide/navigate/#2-toolbar","text":"<p>Located on the top. Find photos or videos by entering search terms like <code>cats</code> and filters like <code>label:cat</code>. A list with possible search filters can be found here.</p>","title":"2. Toolbar"},{"location":"user-guide/navigate/#3-reload-button","text":"<p> reloads search results without reloading the full page.</p>","title":"3. Reload Button"},{"location":"user-guide/navigate/#4-view-button","text":"<p>Click to switch to a different search result view (cards: , mosaic: , or list: ).</p>","title":"4. View Button"},{"location":"user-guide/navigate/#5-upload-button","text":"<p> opens the upload dialog. Available on most pages, unless read-only mode is enabled or upload is disabled in Settings.</p>","title":"5. Upload Button"},{"location":"user-guide/navigate/#6-expanded-toolbar","text":"<p>The expanded toolbar contains additional options and search filters for country, year, month, camera, color, and category.</p>","title":"6. Expanded Toolbar"},{"location":"user-guide/navigate/#7-context-menu","text":"<p>When photos or videos are selected, the context menu appears in the lower right corner.  The number displayed is the count of currently selected items. It also contains the following buttons:</p> <ul> <li> Archive photos</li> <li> Add photos to album</li> <li> Download photos</li> <li> Mark photos as private</li> <li> Open edit dialog</li> <li> Share photos</li> </ul> <p>To unselect all items, click the cross at the top:</p> <p></p>","title":"7. Context Menu"},{"location":"user-guide/navigate/#selection-mode-and-multi-select","text":"","title":"Selection Mode and Multi-Select"},{"location":"user-guide/navigate/#desktop","text":"<p>Select the first photo by clicking  in the lower right corner.</p> <p>PhotoPrism is now in selection mode.</p> <ul> <li>To select more single images, click anywhere on the photo</li> <li>To select multiple photos at once, press shift+click. All photos between the last selected photo and the photo you shift+click will be selected.</li> </ul>","title":"Desktop"},{"location":"user-guide/navigate/#mobile","text":"<p>Select the first photo with a long click.</p> <p>PhotoPrism is now in selection mode.</p> <ul> <li>To select additional single images use a normal click</li> <li>To select multiple photos at once, do a long click. All photos between the last selected photo and the photo you long-click will be selected.</li> </ul>","title":"Mobile"},{"location":"user-guide/pwa/","text":"<p>At the moment, PhotoPrism doesn't have a native mobile app that can be installed through an official app store. However, our Progressive Web App (PWA) offers an almost native app-like experience.  You can conveniently install it on the home screen of all major operating systems and mobile devices.</p>","title":"Mobile App (PWA)"},{"location":"user-guide/pwa/#install-pwa","text":"iOS / SafariAndroid / Firefox / Chrome   <ol> <li>Open PhotoPrism on your device's browser (on iOS, use Safari)</li> <li> <p>Click </p> <p></p> </li> <li> <p>Click Add to Home Screen</p> <p></p> </li> <li> <p>Choose a name and click Add</p> <p></p> </li> </ol>   <ol> <li>Open PhotoPrism on your device's browser</li> <li> <p>Click </p> <p> </p> </li> <li> <p>Click Add to Home screen</p> <p></p> </li> <li> <p>Choose a name and click Add</p> <p></p> </li> </ol>    <p>The PWA is now installed on the home screen of your device and can be launched from there.</p> <p></p>","title":"Install PWA"},{"location":"user-guide/advanced/backups/","text":"<p>Learn how to create a full PhotoPrism backup:</p> <p>\u21aa Creating Backups</p>","title":"Creating Backups"},{"location":"user-guide/advanced/export/","text":"<p>Control of your data does not only refer to being able to restore a backup in PhotoPrism. It also refers to providing users with multiple ways of accessing the metadata they've added to their libraries independent from the software itself. People that don't know what to do with a database will probably not feel in control when they only get a sql file that a regular backup provides.</p> <p>Because of this, PhotoPrism has handy features for exporting your metadata in a human-readable format as well as a regular database-backup.</p> <p>In case you have backups enabled in your Settings, PhotoPrism automatically creates YAML backup files for albums and photos.</p> <p>Keep in mind that the data still resides in your database, and any changes made to the files will not be reflected in PhotoPrism. This is comparable to doing a backup, but to a human readable format.</p>","title":"Exporting Your Data"},{"location":"user-guide/advanced/export/#album-backups","text":"<p>Album backups are created for the following album types: album, folder, state, moment and month. You find those backups inside your <code>storage path</code> in <code>/albums</code>.</p>","title":"Album Backups"},{"location":"user-guide/advanced/export/#album-backups_1","text":"<p>For each album the following metadata is stored in the YAML file:</p> <ul> <li>UID, Slug, Type, Title, Location, Category, Description, Sort Order, Country, CreatedAt, UpdatedAt, Photos (UID + date the photo was added to the album)</li> </ul>","title":"Album Backups"},{"location":"user-guide/advanced/export/#folder-backups","text":"<p>For each folder the following metadata is stored in the YAML file:</p> <ul> <li>UID, Slug, Type, Title, Location, Category, Description, Filter, Sort order, Country, Year, Month, Day, CreatedAt, UpdatedAt</li> </ul>","title":"Folder Backups"},{"location":"user-guide/advanced/export/#month-backups","text":"<p>For each month the following metadata is stored in the YAML file:</p> <ul> <li>UID, Slug, Type, Title, Location, Category, Description, Filter, Sort Order, Country, Year, Month, CreatedAt, UpdatedAt</li> </ul>","title":"Month Backups"},{"location":"user-guide/advanced/export/#state-backups","text":"<p>For each state the following metadata is stored in the YAML file:</p> <ul> <li>UID, Slug, Type, Title, Location, Category, Description, Filter, Sort Order, Country, CreatedAt, UpdatedAt</li> </ul>","title":"State Backups"},{"location":"user-guide/advanced/export/#moment-backups","text":"<p>For each moment the following metadata is stored in the YAML file:</p> <ul> <li>UID, Slug, Type, Title, Location, Category, Description, Filter, Sort Order, Country, Year, CreatedAt, UpdatedAt</li> </ul>","title":"Moment Backups"},{"location":"user-guide/advanced/export/#photo-backups","text":"<p>PhotoPrism creates YAML backup files for each photo in your <code>sidecar path</code>.</p> <p>The following metadata is stored:</p> <ul> <li>TakenAt + Source, UID, Type, Title + Source, Description + Source, OriginalName, TimeZone, PlaceSrc, Altitude,    Lat, Lng, Year, Month, Day, Iso, Exposure, FNumber, FocalLength, Quality, Favorite, Private, Keywords + Source,    Notes + Source, Subject + Source, Artist + Source, Copyright + Source, License + Source, CreatedAt, UpdatedAt, EditedAt, DeletedAt (Archived)</li> </ul> <p>Helpful information can be found on GitHub as well.</p>","title":"Photo Backups"},{"location":"user-guide/advanced/folders/","text":"<p>This page gives you an overview about the directories used by PhotoPrism.</p>","title":"Folder Overview"},{"location":"user-guide/advanced/folders/#originals","text":"<p>This path can be configured by <code>PHOTOPRISM_ORIGINALS_PATH</code>. The <code>originals</code> directory contains your photo library. PhotoPrism will never move or rename files in this folder. It may add files from uploads or imports, unless read-only mode is enabled.</p>","title":"Originals"},{"location":"user-guide/advanced/folders/#import","text":"<p>This path can be configured by <code>PHOTOPRISM_IMPORT_PATH</code>. If you decide to use our import functionality, you add your photos to the <code>import</code> directory, so that they can be imported into <code>originals</code>.</p>","title":"Import"},{"location":"user-guide/advanced/folders/#storage","text":"<p>The storage path can be configured using <code>PHOTOPRISM_STORAGE_PATH</code>.</p> <p>In case cache, sidecar and config path are not defined separately, those are located in the storage directory. In addition the storage directory contains album backups in <code>/albums</code> as well as database files.</p>  <p>You storage path must NOT be located in your originals path. Otherwise your thumbnails will be indexed as well!</p>","title":"Storage"},{"location":"user-guide/advanced/folders/#cache","text":"<p>The <code>cache</code> directory contains <code>json</code> and <code>thumbnails</code> directories.  The path can be set using <code>PHOTOPRISM_CACHE_PATH</code>.</p>","title":"Cache"},{"location":"user-guide/advanced/folders/#json","text":"<p>PhotoPrism creates JSON files containing a file's metadata, read by exiftool, in this directory. You can prevent PhotoPrism from creating those JSON files by disabling exiftool in Settings.</p>","title":"JSON"},{"location":"user-guide/advanced/folders/#thumbnails","text":"<p>PhotoPrism creates thumbnails in different sizes for each photo. Those are stored in the <code>thumbnails</code> directory. More information on thumbnails can be found here.</p>","title":"Thumbnails"},{"location":"user-guide/advanced/folders/#sidecar","text":"<p>In the <code>sidecar</code> directory PhotoPrism stores YAML backup files for each photo as well as JPEG's it converted e.g. from RAWs. Both backup and converting functionalities can be disabled in Settings. The sidecar path can be configured using <code>PHOTOPRISM_SIDECAR_PATH</code>.</p>","title":"Sidecar"},{"location":"user-guide/advanced/folders/#config","text":"<p>In the config path, setting files might be stored. It can be set with <code>PHOTOPRISM_CONFIG_PATH</code>.</p>","title":"Config"},{"location":"user-guide/advanced/folders/#backup","text":"<p>Database backup files are stored in the backup directory. It can be configured using <code>PHOTOPRISM_BACKUP_PATH</code>.</p>","title":"Backup"},{"location":"user-guide/advanced/folders/#temp","text":"<p>In the <code>temp</code> directory, uploads and downloads are temporarily stored. You can configure the path using <code>PHOTOPRISM_TEMP_PATH</code>.</p>","title":"Temp"},{"location":"user-guide/advanced/folders/#asset","text":"<p>The asset path is used to store static resources like models and templates. It can be set using <code>PHOTOPRISM_ASSETS_PATH</code>.</p>","title":"Asset"},{"location":"user-guide/advanced/restore/","text":"<p>In order to fully restore your PhotoPrism instance you need the following:</p> <ul> <li>All content from your <code>originals</code> folder</li> <li>An index database SQL dump</li> </ul> <p>(A backup based on our documentation will be enough)</p> <p>After verifying that you have all you need, continue with the following restore-procedure:</p> <ol> <li>Restore the contents in your <code>originals</code> folder</li> <li><code>photoprism restore -i [filename-to-your-sql-dump]</code></li> <li>Re-index (Complete rescan) your library, in order to re-generate thumbnails.</li> </ol> <p>Important: When restoring the database, the login credentials will also be restored.</p> <p>Helpful information can be found on GitHub as well.</p>","title":"Restoring Backups"},{"location":"user-guide/library/","text":"<p>Most users with an existing library will want to index their originals directly without using the optional import feature, leaving the file and folder names unchanged.</p> <p>When importing, files are first transferred from a temporary folder to the originals folder. In the process, duplicates are automatically skipped, and the imported files are given a unique file name and are sorted by year and month.</p> <p>Importing is also an efficient way to add files, since PhotoPrism does not need to search your originals folder to find new files.</p>  <p>Hidden files and folders that start with a <code>.</code>, <code>@</code>, or <code>_</code> like <code>__MACOSX</code> are automatically ignored. Other names to be ignored can be added to a <code>.ppignore</code> file in the originals or import folder it should affect. You can put it either in the main folder or in a subfolder to limit the scope.</p>","title":"Indexing Your Library"},{"location":"user-guide/library/#indexing-originals","text":"<p>Use index if you want to index your photos and videos directly in the originals folder, leaving the file and folder names unchanged.</p> <p>Your folder structure in originals might look like this:</p> <p></p> <p>During indexing:</p> <ul> <li>files will not be renamed or moved</li> <li>your existing folder structure is preserved, so you can later choose to have your folders appear as albums</li> <li>metadata from your files is read to create captions, titles, and locations for your photos</li> <li>thumbnails and optionally JSON and/or YAML files containing metadata are created</li> </ul> <p>After indexing, the originals folder has not been changed in any way:</p> <p></p>","title":"Indexing Originals"},{"location":"user-guide/library/#advantages","text":"<ul> <li>existing file and folder names remain unchanged.</li> <li>you can search your images by their current name and location</li> <li>indexing is usually faster because no files have to be copied or moved</li> </ul>  <p>You can move media files between the different directories within your originals folder. The indexer detects this and updates the path automatically when running the next time.</p>","title":"Advantages"},{"location":"user-guide/library/#importing-files","text":"<p>Importing is more efficient when adding files as you don't need to re-index all originals to find new photos and videos. Uploads will also be treated as import, you can't directly upload to originals (yet).</p> <p>Your initial folder structure in import might look like this:</p> <p></p> <p>During import:</p> <ul> <li>files are copied or moved from their source directory to the originals folder</li> <li>duplicates are automatically skipped, \"Move\" also deletes them in the source directory as if they were successfully moved</li> <li>imported files are given a unique file name and are sorted by year and month</li> <li>the original file name is indexed as a file property</li> <li>all imported files are indexed, the rest remains in the import folder</li> </ul> <p>After importing with \"Copy\" (default setting), your folders might look like this::</p> <p></p> <p>After importing with \"Move\" your folders might look like this:</p> <p></p>","title":"Importing Files"},{"location":"user-guide/library/#advantages_1","text":"<ul> <li>unsupported files stay untouched in the import directory</li> <li>no duplicates in your originals directory</li> </ul>  <p>The original file and folder names are used to extract keywords. For example, when you index a folder with the path \"Vacation/Africa\", all files from this folder will get the keywords \"vacation\" and \"africa\".</p>","title":"Advantages"},{"location":"user-guide/library/#conclusion","text":"<p>In case your picture library is not well organized and/or you have many duplicates, you may consider importing your files as this will remove duplicates. Be aware that imported files are given a unique file name and are sorted by year and month.</p> <p>Provided you have a well-organized library with meaningful file and folder names, it is best to index your originals directly and leave the file and folder names unchanged.</p>","title":"Conclusion"},{"location":"user-guide/library/duplicates/","text":"<p>Duplicate files are detected and automatically skipped when indexing, so they appear only once in search results and albums. Their SHA1 checksums and sizes are used for comparison.</p>  <p>Browsing, analyzing and deleting duplicates via Web UI is planned for a future release.</p>","title":"Duplicate Detection"},{"location":"user-guide/library/duplicates/#file-import","text":"<p>When importing, files are first copied or moved from a temporary folder to the originals folder. In the process, duplicates are automatically skipped. \"Move\" also deletes them in the source directory as if they were successfully moved.</p>","title":"File Import"},{"location":"user-guide/library/duplicates/#related-files","text":"<p>In addition to exact duplicates, there may be similar pictures and related sidecar files (with the same filename) in your library, for example:</p> <ul> <li>raw + jpg + xmp</li> <li>jpg + json</li> <li>original + edited version</li> <li>original + compressed version</li> <li>live and timelapse photos</li> </ul> <p>Depending on your library settings, such files may be automatically grouped into stacks:</p> <p>Learn more \u203a Library Settings \u203a</p>","title":"Related Files"},{"location":"user-guide/library/files/","text":"<p>The Originals section displays all files of your originals directory.</p> <p>Clicking on a file opens its edit dialog. </p> <p></p> <p>The context menu allows you to perform the following actions:</p>","title":"Browsing Files and Folders"},{"location":"user-guide/library/files/#download-files","text":"<ol> <li>Select files</li> <li>Open context menu</li> <li>Click </li> </ol>","title":"Download Files"},{"location":"user-guide/library/files/#create-an-album-from-files","text":"<ol> <li>Select files</li> <li>Open context menu</li> <li>Click </li> <li>Select existing album or enter new album name</li> <li>Click add to album</li> </ol>","title":"Create an Album from Files"},{"location":"user-guide/library/import/","text":"<p>Most users with an existing library will want to index their originals directly without using the optional import feature, leaving the file and folder names unchanged. Importing first copies or moves from their source directory to the originals folder, which is optional.</p>  <ol> <li> <p>Add files to the import folder if not done already</p> </li> <li> <p>Go to Library using the main navigation, and open the Import tab</p> </li> <li> <p>Select a sub-folder or keep the default to import all files</p> </li> <li> <p>Select Move Files if you want imported files to be removed from the import folder</p> </li> <li> <p>Click on Import</p> </li> </ol> <p></p>  <p>You may use WebDAV for adding files to the import folder. This is especially helpful if PhotoPrism is running on a remote server.</p>   <p>Importing is not possible in read-only mode as it requires write permissions for the originals folder.</p>","title":"Importing Files to Originals"},{"location":"user-guide/library/import/#when-should-move-files-be-selected","text":"<p>If selected, files that have been moved to the originals folder, or that already exist, will automatically be deleted from the import folder. This will save storage if you don't want to keep them as backup, or for any other reason.</p>","title":"When should \"Move Files\" be selected?"},{"location":"user-guide/library/import/#automatic-import","text":"<p>The Importer is triggered automatically 15 Minutes after the import folder has been edited via WebDAV. 15 Minutes is the default value, it can be changed using the respective config option.</p>  <p>Can I use PhotoPrism to sort files into a configurable folder structure?</p> <p>You have complete freedom in how you organize your originals. If you don't like the unique names and folders used by the import function, you can resort to external batch renaming tools, for example:</p> <ul> <li>ExifTool</li> <li>PhockUp</li> <li>Photo Organizer</li> </ul> <p>Configurable import folders may be available in a later version. This is because - depending on the specific  pattern - appropriate conflict resolution is required and the patterns must be well understood and validated to avoid typos or other misconfigurations that lead to undesired results for which we do not want to be responsible.</p>","title":"Automatic Import"},{"location":"user-guide/library/metadata/","text":"<p>Original media and sidecar files are scanned for Exif and XMP data, as well as proprietary metadata, including Google Photos JSON. For this, PhotoPrism has a built-in Exif parser, a simple XMP reader and can also use Exiftool to extract metadata in various formats such as Exif, XMP and IPTC:</p> <p>View Supported Tags \u203a</p> <p>The combined information is then normalized, merged, and enriched with additional information.</p>  <p>Feel free to submit a feature or pull request for Exif or XMP metadata that is not  supported yet.</p>","title":"Metadata Support"},{"location":"user-guide/library/metadata/#external-changes","text":"<p>If you update one of these tags with external tools such as Exiftool or Digikam, PhotoPrism reads the changes the next time it indexes the file, provided the file's modification date has been updated.</p>","title":"External Changes"},{"location":"user-guide/library/metadata/#xmp-sidecar-files","text":"<p>When a field is populated with data from an XMP sidecar file, that data is the only source for the field. This means that keywords from XMP override other keywords from PhotoPrism, such as those derived from colors or folder names.</p>","title":"XMP Sidecar Files"},{"location":"user-guide/library/metadata/#cloud-migration","text":"<p>PhotoPrism also reads metadata from Google Photos JSON and Apple XMP files:</p> <p>Migrate from Google Photos \u203a</p> <p>Migrate from Apple Photos \u203a</p>","title":"Cloud Migration"},{"location":"user-guide/library/metadata/#enrichment","text":"<p>In addition to reading metadata from your original and sidecar files, PhotoPrism enriches the metadata of your photos with additional information:</p> <ul> <li>dates or keywords from folder or filenames</li> <li>keywords derived from image classification, color detection and facial recognition</li> <li>GPS information from location estimates </li> <li>keywords derived from location details</li> </ul>","title":"Enrichment"},{"location":"user-guide/library/metadata/#export","text":"<p>We want you to be able to access your metadata independently of PhotoPrism and its database. That's why the indexer additionally creates human-readable YAML sidecar files that you can open with a text editor or other tools if needed.</p>  <p>PhotoPrism does not yet offer the ability to write changed metadata back to the original files to avoid eventual data loss and conflicts with third-party apps. See GitHub Discussions.</p>","title":"Export"},{"location":"user-guide/library/originals/","text":"<p>If you're using PhotoPrism for the first time, make sure your photo and video  collection is properly configured as originals folder. See installation instructions in Getting Started for details. When starting with an empty folder, you need to add or upload files first.</p>  <ol> <li> <p>Go to Library using the main navigation</p> </li> <li> <p>Select a sub-folder or keep the default to index all files</p> </li> <li> <p>Select Complete Rescan to re-index all originals, including already indexed and unchanged files</p> </li> <li> <p>Press Start to start indexing</p> </li> </ol> <p></p>  <p>You can use WebDAV-compatible apps, including Microsoft's Windows Explorer and Apple's Finder,  to add files to your originals folders from a remote computer or mobile device.</p>   <p>NSFW</p> <p>An NSFW detector can be enabled to automatically mark images with potentially objectionable content as  private. Note that this feature is only partially reliable.</p>","title":"Indexing Your Originals"},{"location":"user-guide/library/originals/#ignoring-files-and-folders","text":"<p>Hidden files and folders that start with a <code>.</code>, <code>@</code>, or <code>_</code> like <code>__MACOSX</code> are automatically ignored. Other names to be  ignored can be added to a <code>.ppignore</code> file in the originals or import folder it should affect. You can put it either in the main folder or in a subfolder to limit the scope.</p> <p>Example:</p> <pre><code># ignore a directory by its name\nfoo\n# ignore all files\n*.*\n# ignore all files with gif extension\n*.gif\n# ignore videos which name start with MVI\nMVI_*.MOV\n# or\nMVI_*.*\n</code></pre> <p>Names in the same directory and in all subdirectories are ignored. You can use <code>*</code> as a wildcard.</p> <p>Files and folders that have already been indexed cannot be retroactively removed from the index using a <code>.ppignore</code> file. Adding their name won't remove them from PhotoPrism.</p>  <p>If you are a new user and files or folders have already been indexed, it is generally easiest to reset the database and start with a new index by running <code>photoprism reset</code> in a terminal.</p>","title":"Ignoring Files and Folders"},{"location":"user-guide/library/originals/#when-should-complete-rescan-be-selected","text":"<p>If selected, all files in the originals folder will be re-indexed, including already indexed and unchanged files.  This may be necessary after upgrading, especially to new major versions.</p>","title":"When should \"Complete Rescan\" be selected?"},{"location":"user-guide/library/originals/#automatic-indexing","text":"<p>The Indexer is triggered automatically 15 Minutes after the originals folder has been edited via WebDAV. 15 Minutes is the default value, it can be changed using the respective config option.</p>","title":"Automatic Indexing"},{"location":"user-guide/library/upload/","text":"From ToolbarFrom Library   <ol> <li> <p>Click  in the upper right corner</p> <p></p> </li> <li> <p>In case you want to upload the files directly to an album select one</p> </li> <li> <p>Click Upload</p> <p></p> </li> <li> <p>Select files</p> </li> <li> <p>Click Upload to start uploading and importing the selected files</p> </li> </ol>   <ol> <li> <p>Go to Library using the main navigation, and open the Import tab</p> </li> <li> <p>Click Upload</p> <p></p> </li> <li> <p>In case you want to upload the files directly to an album select one</p> </li> <li> <p>Click Upload</p> <p></p> </li> <li> <p>Select files</p> </li> <li> <p>Click Upload to start uploading and importing the selected files</p> </li> </ol>","title":"File Upload Using the Web UI"},{"location":"user-guide/library/webdav/","text":"<p>WebDAV-compatible apps and clients such as PhotoSync, Microsoft's Windows Explorer, and Apple's Finder can connect directly to PhotoPrism:</p> <p>Connect via WebDAV \u203a</p> <p>After files have been transferred, you can index or import them as usual. By default, indexing and importing start automatically after a safety delay when files have been uploaded using WebDAV.</p>  <p>You can disable WebDAV in the advanced settings. Since it requires write permissions and authentication, the built-in WebDAV server is automatically disabled when running in read-only or public mode.</p>   <p>You can also use WebDAV to download files from your library: Simply connect to  <code>http://server-ip:2342/originals/</code> (local server without HTTPS) or  <code>https://yourdomain/originals/</code> (public server with HTTPS enabled), and then copy the files to  a folder on your local device.</p>","title":"WebDAV File Upload"},{"location":"user-guide/organize/albums/","text":"","title":"Albums"},{"location":"user-guide/organize/albums/#create-new-album","text":"<ol> <li>Go to Albums</li> <li> <p>In the upper right corner click </p> <p></p> </li> <li> <p>A new album with name \"Month Year\" is created</p> <p></p> </li> </ol>","title":"Create New Album"},{"location":"user-guide/organize/albums/#edit-album-details","text":"<p>Go to Albums and open the album edit dialog</p> From TitleContext MenuAlbum Toolbar   <p>Click on the album title </p>   <p>Select album, open context menu and click </p> <p></p>   <p>Open album and click  in the upper right corner</p> <p></p>    <p>Edit album details and click save</p> <p></p>","title":"Edit Album Details"},{"location":"user-guide/organize/albums/#add-photos-to-album","text":"<ol> <li>Select photos and videos</li> <li>Click context menu</li> <li> <p>Click </p> <p></p> </li> <li> <p>Select album</p> <p></p> </li> <li> <p>Click add to album</p> <p></p> </li> </ol>  <p>You can select many photos at once using shift.</p>","title":"Add Photos to Album"},{"location":"user-guide/organize/albums/#remove-photos-from-album","text":"<ol> <li>Go to your album</li> <li>Select photos/videos you want to remove</li> <li>Click context menu</li> <li> <p>Click </p> <p></p> </li> </ol>","title":"Remove Photos from Album"},{"location":"user-guide/organize/archive/","text":"<p>You can move photos and videos you do not want to keep in your collection to Archive. Content that is archived is not deleted but it will not appear in any section apart from Archive.</p>","title":"Archive"},{"location":"user-guide/organize/archive/#archive-photos","text":"<ol> <li>Select photos/videos</li> <li>Click context menu</li> <li> <p>Click </p> <p></p>  </li> </ol>","title":"Archive Photos"},{"location":"user-guide/organize/archive/#restore-photos-from-archive","text":"<ol> <li>Go to Archive</li> <li>Select photos/videos</li> <li>Click context menu</li> <li> <p>Click </p> <p></p> </li> </ol>","title":"Restore Photos from Archive"},{"location":"user-guide/organize/calendar/","text":"<p>Our Calendar enables you to browse through your photos by year and month.</p> <p></p> <p>The context menu allows you to perform the following actions:</p>","title":"Calendar"},{"location":"user-guide/organize/calendar/#download-months","text":"<ol> <li>Select month</li> <li>Open context menu</li> <li>Click </li> </ol>","title":"Download Months"},{"location":"user-guide/organize/calendar/#create-albums-from-months","text":"<ol> <li>Select month</li> <li>Open context menu</li> <li>Click </li> <li>Select existing album or enter new album name</li> <li>Click add to album</li> </ol>","title":"Create Albums from Months"},{"location":"user-guide/organize/delete/","text":"<p>You can permanently delete photo and video files you do not want to keep from your filesystem. Photos and videos must be archived before they can be deleted permanently.</p> <p>Before you start, make sure the Delete feature is enabled in Settings.</p>","title":"Removing Files Permanently"},{"location":"user-guide/organize/delete/#delete-files","text":"<ol> <li>Go to Archive</li> <li>Select the photos and videos your want to delete</li> <li>Click context menu</li> <li>Click </li> <li>Confirm</li> </ol>","title":"Delete Files"},{"location":"user-guide/organize/download/","text":"Using Context MenuFrom Fullscreen ModeFrom Edit Dialog   <ol> <li>Select photos</li> <li>Click on the context menu</li> <li> <p>Click . Photos will be downloaded in original size</p> <p></p> </li> </ol>  <p>You can select many photos at once using shift.</p>    <ol> <li> <p>Click on the photo</p> <p></p> </li> <li> <p>In fullscreen mode click </p> <p></p> </li> </ol>   <ol> <li>Open the photo's  edit dialog</li> <li>Open the Files Tab</li> <li>Click Download</li> </ol>","title":"Downloading Files"},{"location":"user-guide/organize/edit/","text":"<p>PhotoPrisms edit dialog enables you to add/edit various types of metadata related to your photos/videos.</p> <p>During indexing PhotoPrism collects as much data as possible from sidecar files and the photo itself.</p>","title":"Editing Picture Details"},{"location":"user-guide/organize/edit/#open-edit-dialog","text":"From Card ViewFrom Full Screen ModeUsing Context Menu   <ol> <li>Click on the photos title, time or camera information</li> </ol> <p></p>   <ol> <li>In the upper right corner click </li> </ol> <p></p>   <ol> <li>Select one or multiple photos</li> <li>Click on context menu</li> <li>Click </li> </ol> <p></p>","title":"Open Edit dialog"},{"location":"user-guide/organize/edit/#edit-details","text":"<p>In the edit dialog's Detail tab you can view and edit the following data:</p> <ul> <li>Title, Day, Month, Year, UTC time, UTC date, Time zone, Latitude, Longitude, Altitude, Country, Camera, ISO, Exposure, Lens, F Number, Focal Length, Subject, Artist, Copyright, License, Description, Keywords, Notes</li> </ul> <p></p> <p>Apply saves changes. Ok saves changes and closes edit dialog.</p>  <p>Lots of metadata like labels, keywords, title, location, camera details are generated by PhotoPrism  itself during indexing. Once you change data manually PhotoPrism always keeps your data even if you index again.</p>   <p>Every keyword can be used in PhotoPrisms search to find photos or videos.</p>","title":"Edit Details"},{"location":"user-guide/organize/edit/#geolocation-plugin","text":"<p>Geolocation Plugin is an open source extension that makes it easy to change latitude and longitude of a photo by selecting places on a graphical map. It can be installed through the Chrome web store.</p> <p></p>","title":"Geolocation Plugin"},{"location":"user-guide/organize/edit/#edit-labels","text":"<p>In the edit dialog's Labels tab you can view and edit labels.</p>","title":"Edit Labels"},{"location":"user-guide/organize/edit/#edit-people","text":"<p>In the edit dialog's People tab you can view and edit people.</p>","title":"Edit People"},{"location":"user-guide/organize/edit/#edit-files","text":"<p>In the edit dialog's Files tab you see all files that belong to a photo.</p> <p>In PhotoPrism a photo can consist of multiple files like a raw file + a jpeg version of this raw file + a related xmp or json file.</p> <p></p> <p>To open file details click .</p> <p></p> <p>In case you have stacked files you can change the primary file, delete not primary files, or unstack files using the action buttons.</p>","title":"Edit Files"},{"location":"user-guide/organize/folders/","text":"<p>We automatically display all folders of your originals directory in the Folders section. In case you add new files to your originals directory your folders will be updated.</p> <p></p> <p>The context menu allows you to perform the following actions:</p>","title":"Folders"},{"location":"user-guide/organize/folders/#remove-folders","text":"<ol> <li>Select folder</li> <li>Open context menu</li> <li>Click </li> <li>Confirm</li> </ol>  <p>Only the representation of the folder will be deleted. Your files stay untouched.</p>","title":"Remove Folders"},{"location":"user-guide/organize/folders/#download-folders","text":"<ol> <li>Select folder</li> <li>Open context menu</li> <li>Click </li> </ol>","title":"Download Folders"},{"location":"user-guide/organize/folders/#create-albums-from-folders","text":"<ol> <li>Select folder</li> <li>Open context menu</li> <li>Click </li> <li>Select existing album or enter new album name</li> <li>Click add to album</li> </ol>","title":"Create Albums from Folders"},{"location":"user-guide/organize/labels/","text":"<p>PhotoPrism uses labels to classify images. Other tools use the term tags instead of labels. Labels are set automatically when adding new photos.  You can manually add new labels or edit/remove the ones that have been created by us.</p> <p>In Labels you find all labels of your photos and videos.  You can star labels by clicking . Starred labels will be listed first.</p> <p>PhotoPrism also attaches each generated label to a broader group (or category) of labels. For example, there is a general category 'vehicle' which will include labels such as 'cab', 'catamaran', 'lifeboat' and 'bullet train'. These broad label categories cannot be edited, but can be used in a search, in an identical way to all other labels.</p> <p>You may wish to see these broad label categories in addition to the usual labels in the Labels pages. Clicking the icon in the upper right-hand corner  will switch between turning them on ('Show More') and off ('Show Less'). You can also include these label categories as part of a more complex search filter - the label categories from your photos will appear in the search filter bar as a drop-down selection under the option 'All Categories'.</p> <p></p>","title":"Labels"},{"location":"user-guide/organize/labels/#view-all-photos-with-a-label","text":"<ol> <li>Go to Labels</li> <li> <p>Click on the label you are interested in</p> <p> </p> </li> </ol>  <p>Alternatively you can use the search field in Photos/Videos. You search for photos with a special label like this: <code>label:dog</code>.</p>","title":"View all Photos with a Label"},{"location":"user-guide/organize/labels/#add-labels-to-photos","text":"<ol> <li>Go to the photo edit dialog</li> <li>Go to Labels tab</li> <li>Click on the label field in the last row of the label table</li> <li>Enter a label name</li> <li> <p>Click  on the right side of this row</p> <p></p> </li> </ol>","title":"Add Labels to Photos"},{"location":"user-guide/organize/labels/#removedelete-labels-from-photos","text":"<p>Labels that have been set automatically can be removed. Manually added labels can be deleted.</p> <ol> <li>Go to the photo edit dialog</li> <li>Go to Labels tab</li> <li> <p>Click the / button of the label you want to remove/delete</p> <p></p> </li> </ol>  <p>Removed labels have a confidence of 0% and can be activated again at any time by clicking add.</p>  <p></p>  <p>You can hide Labels in Settings</p>","title":"Remove/Delete Labels from Photos"},{"location":"user-guide/organize/labels/#rename-labels","text":"<ol> <li> <p>Go to the photo edit dialog of any photo that has the label you want to rename</p> <p></p> </li> <li> <p>Go to Labels tab</p> </li> <li>Click on the label name you want to change</li> <li> <p>Change the name and click enter</p> <p></p> <p></p> </li> <li> <p>The changes will be applied to all photos with this label after the next  indexing</p> <p></p> </li> </ol>  <p>Be aware this change applies to all photos that have this label.</p>","title":"Rename Labels"},{"location":"user-guide/organize/labels/#delete-labels","text":"<p>You can permanently delete a label. No file will get a deleted label set during indexing.</p> <ol> <li>Go to Labels</li> <li>Select the label you want to delete</li> <li>Open the context menu</li> <li>Click </li> <li>Confirm</li> </ol>  <p>In case you want a deleted label to appear again, you need to add it to one photo and then index all files again.</p>","title":"Delete Labels"},{"location":"user-guide/organize/moments/","text":"<p>PhotoPrism creates moments out of your memories.  Moments get constantly updated in case you add new photos.</p>  <p>Moments can be based on location and time e.g. Germany 2020 or on labels like Nature &amp; Landscape or Pets.</p>  <p></p> <p>The context menu allows you to perform the following actions:</p>","title":"Moments"},{"location":"user-guide/organize/moments/#remove-moments","text":"<ol> <li>Select moment</li> <li>Open context menu</li> <li>Click </li> <li>Confirm</li> </ol>  <p>Only the moment will be deleted. Your files stay untouched.</p>","title":"Remove Moments"},{"location":"user-guide/organize/moments/#download-moments","text":"<ol> <li>Select moment</li> <li>Open context menu</li> <li>Click </li> </ol>","title":"Download Moments"},{"location":"user-guide/organize/moments/#create-albums-from-moments","text":"<ol> <li>Select moment</li> <li>Open context menu</li> <li>Click </li> <li>Select existing album or enter new album name</li> <li>Click add to album</li> </ol>","title":"Create Albums from Moments"},{"location":"user-guide/organize/panoramas/","text":"<p>PhotoPrism automatically marks photos with an aspect ratio of 2/1 or higher as panorama. You can view all your panorama images in the Panorama section.</p> <p></p>","title":"Panoramas"},{"location":"user-guide/organize/panoramas/#edit-panorama-flags","text":"<ol> <li>Open the photo edit dialog</li> <li>Click </li> <li>Set or unset the panorama flag</li> </ol> <p></p>","title":"Edit Panorama Flags"},{"location":"user-guide/organize/people/","text":"<p>Our latest version includes facial recognition that lets you find pictures of your family and friends. Be ready to discover long forgotten shots! New faces are detected as you scan your library. They are then grouped by similarity, so you can quickly match them to people.</p>  <p>Recognition does not start until your library has been fully scanned. Searching and updating faces temporarily causes a high CPU load and may take a while, depending on your hardware and the number of images you have.</p>   <p>Existing clusters are automatically optimized in the background, for example, when new faces are detected, you have reported a bad match, or new files are added to your library.</p>","title":"Face Recognition"},{"location":"user-guide/organize/people/#recognized-new-people","text":"<p>The people section shows you recognized people as well as new face clusters.</p> <p>To star a person click . Stared persons appear first.</p> <p> </p>","title":"Recognized &amp; New People"},{"location":"user-guide/organize/people/#why-doesnt-the-new-faces-page-show-all-faces","text":"<p>The 'New Faces' page only shows automatically recognized face clusters, as there may be thousands of unknown faces in your library, including random movie actors or faces on shampoo bottles.</p> <p>You can use the <code>face:new</code> search filter to find images with unknown people. We recommend combining this filter with other filters like year or location when searching for specific people. The People tab in the photo edit dialog shows all faces, so you can name them or report a bad match by pressing the  button.</p>","title":"Why doesn't the New Faces page show all faces?"},{"location":"user-guide/organize/people/#when-a-face-was-not-detected","text":"<p>There can be several reasons why a face was not detected:</p> <ul> <li>You may need to wait until indexing is complete, as face recognition will not begin until your library has been scanned</li> <li>Only the primary file in stacks will be searched for faces</li> <li>Faces can be smaller than the minimum size configured</li> <li>Our face detection did not scan the image thoroughly enough</li> <li>Reducing the resolution or quality of generated thumbnails negatively impacts face detection and recognition results, just like when you cannot see properly</li> <li>Contrast plays a major role, so a bright face with gray hair on a gray background may be less obvious to our face detection than it is to you</li> <li>In very rare cases an actual face may match a blacklist of false positives, like background noise and food that looks like a face</li> </ul>  <p>Recognition compares the similarity of faces. The similarity threshold for a face is reduced when  you report a bad match.</p>","title":"When a face was not detected..."},{"location":"user-guide/organize/people/#assign-names-to-faces","text":"From PeopleFrom Photo Edit dialog   <ol> <li>Go to People</li> <li>Go to New</li> <li>Click on the input field</li> <li>Start typing a name</li> <li> <p>Press enter</p> <p></p> </li> </ol>   <ol> <li>Open the photo edit dialog</li> <li>Go to the People tab</li> <li>Click on the input field</li> <li>Start typing a name</li> <li> <p>Press enter</p> <p></p> </li> </ol>    <p>The person you just added will appear under Recognized</p>","title":"Assign Names to Faces"},{"location":"user-guide/organize/people/#hiding-people","text":"<p>You can hide a person in the Recognized section by clicking  in the upper right corner. Pictures of this person continue to be visible in search results and albums.</p>  <p>This currently is a sponsor feature to thank everyone who supports the development of this application. We'll let you know how to enable it when you sign up on Patreon or GitHub Sponsors. Your continued support helps us provide regular updates and services like world maps. Thank you! </p>  <p></p> <p>To see all people including hidden ones click .</p> <p></p> <p>Hidden people can be recovered by clicking </p> <p></p>","title":"Hiding People"},{"location":"user-guide/organize/people/#hiding-faces","text":"<p>You can hide face clusters from the New section, in the same way you hide people from the Recognized section.</p>","title":"Hiding Faces"},{"location":"user-guide/organize/people/#view-all-photos-of-a-person","text":"From PeopleFrom Search   <ol> <li>Go to People</li> <li>Go to Recognized</li> <li> <p>Click on the person you want to view</p> <p></p> </li> </ol>   <ol> <li>Go to Search</li> <li> <p>Search for person:\"jane-doe\"</p> <p></p> </li> </ol>","title":"View all Photos of a Person"},{"location":"user-guide/organize/people/#rename-people","text":"<p>To rename all photos of a person:</p> <ol> <li>Go to People</li> <li>Go to Recognized</li> <li>Click on the persons name</li> <li>Type in a new name</li> <li>Press enter</li> </ol> <p></p> <p></p>","title":"Rename People"},{"location":"user-guide/organize/people/#change-people-assignments","text":"<p>You may report bad matches by pressing the  button underneath a face in the People tab. This will remove the name. You can either leave it blank or enter the name of a different person.</p>  <p>When you reject a match, the corresponding face cluster will be updated in the background so that similar  issues can be resolved automatically.</p>  <ol> <li>Open the photo edit dialog</li> <li>Go to the People tab</li> <li>Click </li> <li>Then enter a new name or leave it empty</li> </ol> <p></p>","title":"Change People Assignments"},{"location":"user-guide/organize/people/#remove-faces","text":"<p>In case PhotoPrism detected something wrong as face (false positives), or in case you just don't want to keep a face on the people tab you're not interested in, you can remove it.</p> <ol> <li>Open the photo edit dialogue</li> <li>Go to the People tab</li> <li>Click </li> </ol> <p></p> <p>You might undo this action before a reload.</p> <p></p>","title":"Remove Faces"},{"location":"user-guide/organize/people/#download-all-photos-of-a-person","text":"<ol> <li>Go to People</li> <li>Select a person</li> <li>Open context menu</li> <li>Click </li> </ol>","title":"Download all Photos of a Person"},{"location":"user-guide/organize/people/#create-albums-from-people","text":"<ol> <li>Go to People</li> <li>Select a person</li> <li>Open context menu</li> <li>Click </li> <li>Select existing album or enter new album name</li> <li>Click add to album</li> </ol> <p></p>","title":"Create Albums from People"},{"location":"user-guide/organize/people/#search","text":"<p>You can find photos with people on it using the following queries:</p> <ul> <li><code>people</code>, <code>faces</code> or <code>faces:true</code> will result in all photos with people </li> <li><code>faces:false</code> will show all photos without people</li> <li><code>faces:3</code> will show all photos with at least 3 people on it</li> <li><code>person:\"John Doe\"</code> or <code>subject:\"John Doe\"</code> will show all photos of the person with the exact name John Doe</li> <li><code>people:\"John\"</code> or <code>subjects:\"John\"</code> will show all photos of people with a name like John e.g. John Doe and John Smith</li> </ul> <p>The person/subject and people/subjects filters can be used with &amp; and | (see search for more details). Filters may be combined.</p> <p><code>person:\"John Doe&amp;Jane Doe\" faces:3</code> will show all photos with John and Jane Doe and one other person.</p> <p></p>","title":"Search"},{"location":"user-guide/organize/people/#performance-tips","text":"","title":"Performance Tips"},{"location":"user-guide/organize/people/#background-worker","text":"<p>Face recognition was developed and tested under the assumption that the background worker runs every 15 minutes, unless the backend is busy with other tasks such as indexing. It has not been tested with much longer intervals and is not designed for that.</p> <p>The background worker groups new faces by similarity, compares faces with clusters, and optimizes existing clusters as needed. Without these routine tasks, the number of faces to be processed becomes too large. The first and next time the worker runs, it can then cause a heavy server load until all the faces, face clusters, and related pictures have been updated. The longer you wait, the more CPU is required and the longer it takes.</p>","title":"Background Worker"},{"location":"user-guide/organize/people/#legacy-hardware","text":"<p>It is a known issue that the user interface and backend operations, especially face recognition, can be slow or even crash on older hardware due to a lack of resources. Like most applications, PhotoPrism has certain requirements and our development process does not include testing on unsupported or unusual hardware.</p>  <p>Coming Soon</p> <ul> <li>Manual tagging of faces</li> <li>Importing of XMP face tags</li> <li>Excluding people when browsing your pictures</li> <li>Automatic backup of tagged people in YAML files</li> </ul>","title":"Legacy Hardware"},{"location":"user-guide/organize/places/","text":"<p>Places displays all photos with GPS information on a world map.</p> <p>You can zoom either by using  or  or by clicking on a photo or photo collector (the blue circles with a photo count inside).</p> <p> </p> <p>When using the search only photos matching the search term are shown on the map.</p> <p></p> <p>You can choose between different map styles like streets or topographic in the settings.</p>  <p>To switch from a photos card view directly to the location of a photo on the world map click on the location.</p>  <p> </p>","title":"Places"},{"location":"user-guide/organize/private/","text":"","title":"Hiding Private Photos"},{"location":"user-guide/organize/private/#what-does-private-mean","text":"<p>Some of your photos might be private for personal reasons.  Our private functionality provides you with a solution to hide private photos or videos from some sections. This way you can let family and friends browse through your photos without risking that they see photos you do not want them to see.</p> <p>By default, photos marked as private will not appear in the following sections:</p> <ul> <li>Search</li> <li>Videos</li> <li>People</li> <li>Favorites</li> <li>Places</li> <li>Labels</li> <li>Autogenerated Albums (Moments, Calendar, States, Folders)</li> <li>Shared Albums</li> </ul> <p>Private photos will be displayed in user generated albums and within the file browser.</p>  <p>In case you want private content to appear everywhere you can configure that in Settings.</p>","title":"What does private mean?"},{"location":"user-guide/organize/private/#toggle-private-flag","text":"Using Context MenuFrom List View   <ol> <li>Go to Search</li> <li>Select photos/videos</li> <li>Click context menu</li> <li> <p>Click </p> <p></p> </li> </ol>   <ol> <li>Go to Search</li> <li>Make sure you are in list view</li> <li> <p>Click  or  on the right</p> <p></p> </li> </ol>","title":"Toggle Private Flag"},{"location":"user-guide/organize/review/","text":"<p>When adding new photos a quality score from 1 to 5 is created automatically. Photos with a quality score lower than 3 do not appear in Photos until you approve them (unless the quality filter was disabled in Settings)</p> <p>The quality score depends on the following:</p> <ul> <li>Known date and/or GPS coordinates</li> <li>At least 2 MP resolution if taken after 2012</li> <li>Photo not classified as info or screenshot</li> <li>Photo is favorite, was edited or approved</li> </ul>  <p>In case you do not need the review mechanism you can turn it off in Settings</p>","title":"Reviewing Non-Photographic and Low-Quality Images"},{"location":"user-guide/organize/review/#approve-photos","text":"Edit DialogCard ViewContext Menu   <ol> <li>Open the photo's  edit dialog</li> <li> <p>Click approve</p> <p></p> </li> </ol>   <ol> <li>Go to Review and make sure you are in card view</li> <li> <p>Click approve</p> <p></p> </li> </ol>   <ol> <li>Go to Review </li> <li>Select photos and open the context menu</li> <li>Click </li> </ol>     <p>The quality score is constantly updated.  If you add date or location information to a photo or like it, the quality score increases automatically.  In case the new score is equal or greater than 3 the photo is approved automatically.</p>","title":"Approve Photos"},{"location":"user-guide/organize/scans/","text":"<p>You can mark scanned photos as scans within the photo edit dialog.</p> <p>We aim to automatically mark scans in the future.</p>","title":"Scans"},{"location":"user-guide/organize/scans/#set-scan-flags","text":"<ol> <li>Open the photo edit dialog</li> <li>Click </li> <li>Set or unset the scan flag</li> </ol> <p></p>","title":"Set Scan Flags"},{"location":"user-guide/organize/stacks/","text":"<p>If you have Stacks enabled in your library settings, you may come across pictures that are associated with more than one media file.</p> <p>To see all pictures with a group of related files, open Stacks in the expanded Search navigation:</p> <p></p>","title":"Stacks"},{"location":"user-guide/organize/stacks/#for-what-reasons-can-files-be-stacked","text":"<ol> <li>Files sharing exactly the same file and folder name will always be stacked, for example <code>/2018/IMG_1234.jpg</code> and <code>/2018/IMG_1234.avi</code></li> <li>Files with related, sequential names like <code>/2018/IMG_1234 (2).jpg</code> and <code>/2018/IMG_1234 (3).jpg</code> may be stacked as well (optional)</li> <li>Pictures were taken at the same GPS position and second (optional)</li> <li>Image metadata contains the same Unique Image ID or XMP Instance ID (optional)</li> </ol> <p>You can change the behaviour for 2 - 4 in Settings.</p>","title":"For what reasons can files be stacked?"},{"location":"user-guide/organize/stacks/#browse-related-files","text":"<ol> <li> <p>Click on </p> <p></p> </li> <li> <p>Use arrows to see all photos of the sequence</p> <p> </p> </li> </ol>","title":"Browse Related Files"},{"location":"user-guide/organize/stacks/#change-primary-files","text":"<p>The JPEG file marked as primary is used in our views. It is listed first in the files tab.</p> <p>To change the primary file:</p> <ol> <li> <p>Open the photos edit dialog</p> </li> <li> <p>Open Files tab</p> </li> <li> <p>Click  of the file you want to set as primary</p> </li> <li> <p>Click primary</p> <p> </p> </li> </ol>","title":"Change Primary Files"},{"location":"user-guide/organize/stacks/#unstack-files","text":"<ol> <li> <p>Open the photos edit dialog</p> </li> <li> <p>Open Files tab</p> </li> <li> <p>Click  of the JPEG file that is not marked as primary</p> </li> <li> <p>Click unstack</p> <p></p> </li> </ol> <p>Now, both files appear in our views.</p> <p></p>","title":"Unstack Files"},{"location":"user-guide/organize/stacks/#delete-non-primary-files","text":"<ol> <li> <p>Open the photos edit dialog</p> </li> <li> <p>Open Files tab</p> </li> <li> <p>Click  of the JPEG file that is not marked as primary</p> </li> <li> <p>Click delete</p> </li> <li> <p>Confirm</p> <p></p> </li> </ol>","title":"Delete Non-Primary Files"},{"location":"user-guide/organize/video/","text":"<p>Navigate to Videos to browse all your videos. To play a video, click .</p> <p>Please note that not all video and audio formats can be played with every browser. For example, AAC - the default audio codec for MPEG-4 AVC / H.264 - is supported natively in Chrome, Safari, and Edge, while it is only optionally supported by the OS in Firefox and Opera.</p> <p></p>","title":"Browsing and Playing Videos"},{"location":"user-guide/organize/video/#live-photos","text":"<p>Short videos up to 3 seconds are categorized and displayed as Live Photos, regardless of your phone's make and model. You can recognize this by the  icon that appears in the upper left corner.</p> <p>Move the mouse cursor over the thumbnail to play the video without changing the view. You can limit a search to Live Photos by using the <code>type:live</code> filter or the keyword <code>live</code>.</p> <p></p>","title":"Live Photos"},{"location":"user-guide/organize/video/#transcoding","text":"<p>PhotoPrism may use ffmpeg to transcode common video formats to MPEG-4 AVC.</p> <p>Videos in MPEG-4 AVC format can be played natively by virtually all modern browsers.</p> <p>OGV, VP8, VP9, AV1, WebM and HEVC videos will be streamed directly in case they are supported by your browser and if they do not exceed the configured bitrate limit. Otherwise those formats will be transcoded as well.</p> <p>When needed videos are transcoded on demand. This can cause unacceptable delays when large video files are played for the first time.</p> <p>In that case, you may run the following command in a terminal to pre-transcode all video originals if needed:</p> <pre><code>docker-compose exec photoprism photoprism convert\n</code></pre>  <p>Make sure that there is enough disk space available on your server before transcoding all video files, as this may require a significant amount of extra storage.</p>   <p>HEVC/H.265 video files can have a <code>.mp4</code> file extension too, which is often associated with AVC only. This is because MP4 is a container format, meaning that the actual video content may be compressed with H.264, H.265, or something else. The file extension doesn't really tell you anything other than that it's probably a video file.</p>","title":"Transcoding"},{"location":"user-guide/search/","text":"<p>PhotoPrism offers many views and search filters so you can explore your photo collection in multiple dimensions instead of just scrolling through it day by day.</p> <p>This helps you rediscover long-forgotten shots, find specific pictures, or quickly create albums based on search results.</p>","title":"Browsing and Searching Your Library"},{"location":"user-guide/search/#views-and-filters","text":"<p>Using the main navigation you can visit the different sections of your photo library:</p>","title":"Views and Filters"},{"location":"user-guide/search/#search","text":"<p>Shows all photos and videos that are not in review or archived or private.</p>  <p>In case the review, private or archive functions are turned off - Search displays those photos and videos as well.</p>  <p></p>","title":"Search"},{"location":"user-guide/search/#monochrome","text":"<p>Shows all monochrome photos and videos.</p>","title":"Monochrome"},{"location":"user-guide/search/#panoramas","text":"<p>Shows all panorama photos.</p>","title":"Panoramas"},{"location":"user-guide/search/#stacks","text":"<p>Shows all stacked photos.</p>","title":"Stacks"},{"location":"user-guide/search/#scans","text":"<p>Shows all scans.</p>","title":"Scans"},{"location":"user-guide/search/#review","text":"<p>Shows all photos that are in review.</p>","title":"Review"},{"location":"user-guide/search/#archive","text":"<p>Shows archived photos.</p>","title":"Archive"},{"location":"user-guide/search/#albums","text":"<p>Shows albums you created.</p> <p></p>","title":"Albums"},{"location":"user-guide/search/#unsorted","text":"<p>Shows all photos that are not part of an album.</p>","title":"Unsorted"},{"location":"user-guide/search/#videos","text":"<p>Shows videos that are not in review or archived or private.</p> <p></p>","title":"Videos"},{"location":"user-guide/search/#people","text":"<p>Shows photos and videos grouped by people on it.</p>","title":"People"},{"location":"user-guide/search/#favorites","text":"<p>Shows all photos and videos you liked.</p> <p></p>","title":"Favorites"},{"location":"user-guide/search/#moments","text":"<p>Discover albums we automatically create for you.</p> <p></p>","title":"Moments"},{"location":"user-guide/search/#calendar","text":"<p>Organizes your photos due to time taken.</p> <p></p>","title":"Calendar"},{"location":"user-guide/search/#places","text":"<p>Displays all photos and videos with location information on a worldmap.</p> <p></p>","title":"Places"},{"location":"user-guide/search/#states","text":"<p>Shows your photos grouped by location.</p>","title":"States"},{"location":"user-guide/search/#labels","text":"<p>Shows your photos and videos grouped by labels like cat, dog or beach.</p> <p></p>","title":"Labels"},{"location":"user-guide/search/#folders","text":"<p>Displays all folders of your originals directory.</p>","title":"Folders"},{"location":"user-guide/search/#private","text":"<p>Shows photos and videos marked as private.</p>","title":"Private"},{"location":"user-guide/search/#originals","text":"<p>Hierarchical view of your originals directory.</p> <p></p> <p></p>","title":"Originals"},{"location":"user-guide/search/filters/","text":"<p>PhotoPrism's powerful search filters let you easily find specific photos and videos, for example:</p> <ul> <li>People on the photo</li> <li>Objects that are displayed on the photo</li> <li>The main color of the photo</li> <li>The filename or foldername of a photo</li> <li>Location where the photo has been taken</li> <li>Other metadata such as camera, lens, chroma...</li> </ul> <p>Just give it a try!</p> <p></p>","title":"Using Search Filters"},{"location":"user-guide/search/filters/#introduction","text":"<p>The following filters can be set via dropdowns in the search toolbar:</p> <ul> <li>Country, Year, Month, Order, Camera, Color, Category.</li> </ul> <p>If you set multiple filters, only pictures that meet all filter criteria will be displayed in the search result. Filters can generally be combined unless they contradict each other.</p> <p></p> <p>In addition, these and many other filters can be entered into the toolbar search box as follows:</p> <pre><code>`label:cat color:green type:live`\n</code></pre> <p>A complete overview of the available search filters can be found below.</p> <p></p>","title":"Introduction"},{"location":"user-guide/search/filters/#and-search","text":"<p>To combine different filters use a space as separator:</p> <pre><code>mono:true review:false\n</code></pre> <p>The search result shows pictures that are monochrome and not in review.</p> <p>Additionally some filters can be combined with <code>&amp;</code> as follows:</p> <pre><code>keywords:buffalo&amp;water\n</code></pre> <p>or:</p> <pre><code>keywords:\"buffalo &amp; water\"\n</code></pre> <p>This query will show all photos that have the keywords water and buffalo.</p> <p>&amp; is supported by the following filters:</p> <ul> <li>albums, keywords, subject/person, subjects/people.</li> </ul>  <p>The label filter does not support &amp;. You can use the keywords filter instead, as all labels are keywords as well.</p>","title":"AND Search"},{"location":"user-guide/search/filters/#or-search","text":"<p>An OR search is possible using <code>|</code>:</p> <pre><code>label:cat|dog\n</code></pre> <p>This will show all photos that have either the label cat or dog.</p> <p>The following filters work with |:</p> <ul> <li>albums, color, country, day, month, year, keywords, label, path, state, subject/person, subjects/people, title, type, name, filename, original, hash</li> </ul>","title":"OR Search"},{"location":"user-guide/search/filters/#wildcard","text":"<p>The <code>*</code> character will act as a wildcard:</p> <pre><code>name:\"IMG_23*\"\n</code></pre> <p>This will show all photos which name start with <code>IMG_23</code>.</p> <pre><code>name:\"*_23*\"\n</code></pre> <p>This will show all photos which name contain <code>_23</code>, like <code>IMG_2356.MOV</code> , <code>2021_02_23.jpg</code>, etc.</p>  <p>Wildcards can be combined with &amp; or |: <code>filename:\"*IMG123*|*_22F6FC19.jpg\"</code></p>","title":"Wildcard"},{"location":"user-guide/search/filters/#filter-reference","text":"<p>This is a complete list of supported search filters with examples. Filters can generally be combined unless they contradict each other, e.g. results cannot be monochrome and have high color saturation at the same time.</p>    Filter Type Examples Notes     fmax decimal fmax:1.245 F-number (max)   fmin decimal fmin:1.245 F-number (min)   lat decimal lat:1.245 Latitude (GPS Position)   lng decimal lng:1.245 Longitude (GPS Position)   chroma number chroma:70 Chroma (0-100)   diff number diff:-1 diff:2 Differential Perceptual Hash (000000-FFFFFF)   dist number dist:5 Distance in km in combination with lat/lng   quality number quality:0 quality:3 Quality Score (0-7)   album string album:berlin Album UID or Name, supports* wildcard   albums string albums:\"South Africa &amp; Birds\" Album Names, can be combined with &amp; and |   camera string camera:canon Camera Make/Model Name   category string category:\"name\" Location Category Name   color string color:\"red|blue\" Color Name (purple, magenta, pink, red, orange, gold, yellow, lime, green, teal, cyan, blue, brown, white, grey, black), OR search with |   country string country:\"de|us\" Coountry Code, OR search with |   day string day:3|13 Day of Month (1-31), OR search with |   faces string faces:yes faces:3 Minimum number of Faces (yes = 1)   filename string filename:\"2021/07/12345.jpg\" File Name with path and extension, OR search with |   folder string folder:\"*/2020\" Path Name, OR search with |, supports * wildcards   hash string hash:2fd4e1c67a2d SHA1 File Hash, OR search with |   keywords string keywords:\"buffalo&amp;water\" Keywords, can be combined with &amp; and |   label string label:cat|dog Label Name, OR search with |   lens string lens:ef24 Lens make/Model Name   month string month:7|10 Month (1-12), OR search with |   name string name:\"IMG_9831-112*\" File Name without path and extension, OR search with |   original string original:\"IMG_9831-112*\" Original file name of imported files, OR search with |   path string path:2020/Holiday Path Name, OR search with |, supports * wildcards   people string people:\"Jane &amp; John\" Subject Names, can be combined with &amp; and |   person string person:\"Jane Doe &amp; John Doe\" Subject Names, exact matches, can be combined with &amp; and |   state string state:\"Baden-W\u00fcrttemberg\" OR search with |   subject string subject:\"Jane Doe &amp; John Doe\" Alias for person   subjects string subjects:\"Jane &amp; John\" Alias for people   title string title:\"Lake*\" Title, OR search with |   type string type:raw Media Type (image, video, raw, live, animated); OR search with |   uid string uid:pqbcf5j446s0futy Internal Unique ID, only exact matches   year string year:1990|2003 Year Number, OR search with |   animated switch animated:yes Finds animated GIFs   archived switch archived:yes Finds archived pictures   error switch error:yes Finds pictures with errors   favorite switch favorite:yes Finds pictures marked as favorite   geo switch geo:yes Finds pictures with GPS location   hidden switch hidden:yes Finds hidden pictures (broken or unsupported)   landscape switch landscape:yes Finds pictures in landscape format   live switch live:yes Finds Live Photos and short videos   mono switch mono:yes Finds pictures with few or no colors   panorama switch panorama:yes Finds pictures with an aspect ratio &gt; 1.9:1   photo switch photo:yes Finds only photos, no videos   portrait switch portrait:yes Finds pictures in portrait format   primary switch primary:yes Finds primary JPEG files only   private switch private:yes Finds private pictures   public switch public:yes Excludes private pictures   raw switch raw:yes Finds pictures with RAW image file   review switch review:yes Finds pictures in review   scan switch scan:yes Finds scanned images and documents   square switch square:yes Finds images with an aspect ratio of 1:1   stack switch stack:yes Finds pictures with more than one media file   stackable switch stackable:yes Finds pictures that can be stacked with additional media files   unsorted switch unsorted:yes Finds pictures not in an album   unstacked switch unstacked:yes Finds pictures with a file that has been removed from a stack   vector switch vector:yes Finds vector graphics only   video switch video:yes Finds video files only   after timestamp after:\"2022-01-30 15:23:42\" Finds pictures taken after this date   before timestamp before:\"2022-01-30 15:23:42\" Finds pictures taken before this date     <p>Why can't I play live photos or find stacks when I search for specific images?</p> <p>Our search API and user interface perform a file search. This is intentional since \"stacks\" can contain files of different types and properties, such as color.</p> <p>For example, there may be color and monochrome versions. Now, when you search for them or sort them by color, the user interface must display individual files. Otherwise, the results showing a color image/video when you filter by monochrome would make no sense.</p> <p>Likewise, if you search for <code>filename.mp4.*</code>, you will find only JPEGs without video, because the video file extension is <code>.mp4</code> without an extra dot at the end.</p> <p>We recommend using the <code>path:</code> and/or <code>name:</code> filters with wildcards if searching for individual files limits the search results too much. Most users will want to find all related files so that they can be displayed together, e.g. as live photos consisting of a video and an image.</p> <p>You can combine these filters with other filters such as <code>live</code> to ensure that the results include only pictures with a specific media type. Alternatively, you can use the <code>filename:</code> filter with a more permissive wildcard that excludes the file extension.</p>","title":"Filter Reference"},{"location":"user-guide/search/views/","text":"<p>PhotoPrism offers you three different views to browse your photos and videos:</p> Card ViewMosaic ViewList View   <p>The card view displays important metadata like title, time and location next to the photos</p> <p></p>   <p>The mosaic view lets you enjoy your photos without distraction</p> <p></p>   <p>The list view provides you photos and metadata in a  well-arranged list</p> <p></p>    <p>To switch between views you can either use the filter in the filter bar or the view button (, , ) in the upper right corner.</p> <p>Additionally, you can open your photos/videos in fullscreen mode and start a slideshow ().</p> <p></p>","title":"Search Result Views"},{"location":"user-guide/settings/account/","text":"<p>Since they are not needed, these settings are not available when running in public mode.</p>","title":"Account Settings"},{"location":"user-guide/settings/account/#change-password","text":"<ol> <li>Click Settings</li> <li>Click Account</li> <li>Enter your current password</li> <li>Enter your new password twice</li> <li>Click Change</li> </ol> <p></p>","title":"Change Password"},{"location":"user-guide/settings/advanced/","text":"<p>System config options such as the image quality can be changed  on the advanced settings page. You can also disable specific features and enable the debug or read-only mode.</p>  <p>Since they are not safe to use without authentication, these settings are not available when running in public mode. Changing config options is still possible via configuration files and with command parameters.</p>   <p>Changing advanced settings always requires a restart to take effect. Selecting a different thumbnail quality or size won't replace existing thumbnails. You can regenerate them using the  command-line interface.</p>  <p></p> <p>All config options can be set in your <code>docker-compose.yml</code> or via command-line parameters as well. Manually changed values are saved in a config file. It is stored in the <code>storage/config</code> folder by default.</p>","title":"Advanced Settings"},{"location":"user-guide/settings/advanced/#options","text":"","title":"Options"},{"location":"user-guide/settings/advanced/#debug-logs","text":"<p>When enabled, debug logs are shown in Library&gt;Logs. Requires restart.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DEBUG</code>.</p>","title":"Debug Logs"},{"location":"user-guide/settings/advanced/#read-only-mode","text":"<p>When enabled, importing, uploading and deleting files is not possible.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_READONLY</code>.</p>","title":"Read-only Mode"},{"location":"user-guide/settings/advanced/#experimental-features","text":"<p>When enabled, your instance will be updated with experimental features.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_EXPERIMENTAL</code>.</p>","title":"Experimental Features"},{"location":"user-guide/settings/advanced/#disable-backups","text":"<p>This option prevents creating the following <code>yml</code> backups:</p> <ul> <li>For photos in <code>storage/sidecar</code></li> <li>For albums, months, states and folders in <code>storage/albums</code></li> </ul> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_BACKUPS</code>.</p>","title":"Disable Backups"},{"location":"user-guide/settings/advanced/#disable-webdav","text":"<p>This option prevents building WebDav connections. Requires restart for changes to be applied.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_WEBDAV</code>.</p>","title":"Disable WebDAV"},{"location":"user-guide/settings/advanced/#disable-places","text":"<p>When selected, geo-information (latitude, longitude) will still be read (and indexed) from your files metadata, however PhotoPrism will not use reverse lookup to determine place names using those coordinates as it normally would.</p> <p>The Places section will not be visible.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_PLACES</code>.</p>","title":"Disable Places"},{"location":"user-guide/settings/advanced/#disable-exiftool","text":"<p>This option prevents the creation of <code>json</code> files with Exif data in <code>storage/sidecar</code>.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_EXIFTOOL</code>.</p>","title":"Disable ExifTool"},{"location":"user-guide/settings/advanced/#disable-tensorflow","text":"<p>When selected, image classification / object detection (using TensorFlow) is disabled, so no labels are created for your files.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_TENSORFLOW</code>.</p>","title":"Disable TensorFlow"},{"location":"user-guide/settings/advanced/#images","text":"<p>This section controls how JPEG preview and thumbnail images are rendered. These are high-quality, scaled-down versions of your originals.</p> <p>Thumbnails are necessary because web browsers are bad at resizing large images to fit the screen. Using full-resolution originals for slideshows and in search results would also consume a lot of browser memory and significantly reduce indexing performance.</p>","title":"Images"},{"location":"user-guide/settings/advanced/#downscaling-filter","text":"<p>This lets you select the algorithm used to resize your original images when creating thumbnails. A detailed description of the available filters can be found in the section below.</p> <p>For a good trade-off between quality and performance, we recommend choosing the lanczos filter. It may be a little slower in creating thumbnails, but produces very high quality images. In comparison, the less sophisticated cubic filter may be 30% faster.</p> <p>The corresponding config option is <code>PHOTOPRISM_THUMB_FILTER</code>.</p>","title":"Downscaling Filter"},{"location":"user-guide/settings/advanced/#dynamic-previews","text":"<p>Enable generating thumbnails on-the-fly as they're required (either for viewing or analysing with TensorFlow). This saves disk space, but is more processor-intensive and so not recommended when hosting on less powerful devices (such as Raspberry Pi).</p> <p>The corresponding config toggle is <code>PHOTOPRISM_THUMB_UNCACHED</code>.</p>","title":"Dynamic Previews"},{"location":"user-guide/settings/advanced/#jpeg-quality","text":"<p>Choose a value above 90 to display your images in the best possible quality. Note that higher values  require more space in the storage folder for less compressed thumbnail files, which may also take longer to create.</p> <p>Lower quality thumbnails, on the other hand, are smaller, load faster on slow Internet connections,  and require less space in the storage folder and in the browser cache.</p> <ul> <li>Quality levels of 90% or higher are generally considered high quality</li> <li>80% to 90% is considered medium quality</li> <li>70% to 80% is considered low quality, as you might see with highly compressed content on social media </li> </ul> <p>Anything below 70% is generally of very low quality.</p> <p>Example: If a quality of 95 results in a thumbnail file size of 500kB, then reducing the quality  to 80 reduces the file size to about 100kB.</p> <p>The corresponding config option is <code>PHOTOPRISM_JPEG_QUALITY</code>.</p>  <p>The actual impression depends on how much information an image contains. Empty areas and skies, for example, are easier to compress. Images with a lot of details suffer the most. For this reason, reducing the quality of thumbnails also negatively impacts face recognition and image classification results. Simply put, this means that the indexer sees fewer details.</p>","title":"JPEG Quality"},{"location":"user-guide/settings/advanced/#dynamic-and-static-size-limits","text":"<p>Dynamic Size Limit: During dynamic (on-demand) thumbnail generation, no thumbnails will be created above this size. The corresponding config option is <code>PHOTOPRISM_THUMB_SIZE_UNCACHED</code>.</p> <p>Static Size Limit: During initial indexing or import (as thumbnails are generated), no thumbnails will be created above this size. The corresponding config option is <code>PHOTOPRISM_THUMB_SIZE</code>.</p>  <p>Reducing the Static Size Limit of thumbnails has a significant impact on face recognition  and image classification results. Simply put, it means that the indexer can no longer see properly.</p>   <p>If the configured size limit is exceeded (for example, if users have a larger screen), a sufficiently large  thumbnail can't be created, and the photo viewer may be forced to display the original image instead. Downscaling images in browsers typically results in poor quality, and they may also be displayed in  the wrong orientation.</p>  <p>The smallest configurable size is 720px for consumption by the indexer to perform color detection, face detection,  and image classification. Recreating them every time they are needed is too demanding for even the most powerful  servers. Unless you only have a few small images, it would render the app unusable.</p> <p>It is recommended that you set these limits high so that browsing pictures is as smooth as possible. However, if the amount of disk storage required is a serious problem, and you are willing to increase server load instead, it is possible to set the Static Size Limit to the minimum of 720px in combination with a higher Dynamic Size Limit. This allows the server to generate larger thumbnails on demand. It may also result in a noticeable delay  when viewing pictures in full-screen mode.</p>  <p>To view original images, enable Dynamic Previews, and configure Dynamic Size Limit and Static Size Limit to a small value like <code>720</code>. When viewing images exceeding that limit, the original files will be displayed.</p>","title":"Dynamic and Static Size Limits"},{"location":"user-guide/settings/advanced/#what-files-will-be-created-by-photoprism","text":"<p>The minimum size for static previews is 720px, so all images up to <code>720x720</code> will be rendered. Higher static limits will additionally generate previews only up to the defined limit.</p> <p>The files are generated in the <code>storage/cache/thumbnails</code> folder, with file paths dependent on the size and original file's hash, such as:</p> <p><code>storage/cache/thumbnails/1/a/3/1a30c1f...9_100x100_center.jpg</code></p> <p>The table below shows each generated size, with the PhotoPrism features using each.</p>    Name Width Height Use     colors 3 3 Color Detection   tile_50 50 50 List Preview   tile_100 100 100 Maps Preview   tile_224 224 224 Mosaic Preview   left_224 224 224 TensorFlow   right_224 224 224 TensorFlow   tile_500 500 500 Cards Preview   fit_720 720 720 Mobile, TV   fit_1280 1280 1024 Mobile, HD Ready TV   fit_1920 1920 1200 Mobile, Full HD TV   fit_2048 2048 2048 Tablets, Cinema 2K   fit_2560 2560 1600 Quad HD, Retina Display   fit_3840 3840 2400 Ultra HD   fit_4096 4096 4096 Ultra HD, Retina 4K   fit_7680 7680 4320 8K Ultra HD 2, Retina 6K","title":"What files will be created by PhotoPrism?"},{"location":"user-guide/settings/advanced/#downscaling-filters","text":"","title":"Downscaling Filters"},{"location":"user-guide/settings/advanced/#linear","text":"<p>Bilinear interpolation takes a weighted average of the four neighborhood pixels to calculate its final interpolated value. The result is a much smoother image than the original image. When all known pixel distances are equal, then the interpolated value is simply their sum divided by four. This technique performs interpolation in both directions, horizontal and vertical. This technique gives better result than nearest neighbor interpolation and take less computation time compared to bicubic interpolation.</p>","title":"Linear"},{"location":"user-guide/settings/advanced/#cubic","text":"<p>Catmull-Rom is a local interpolating spline developed for computer graphics purposes. Its initial use was in design of curves and surfaces, and has recently been used in several applications. Catmull-Rom splines are a family of cubic interpolating splines formulated such that the tangent at each point is calculated using the previous and next point on the spline. The results are similar to ones produced by bicubic interpolation with regards to sharpness, but the Catmull-Rom reconstruction is clearly superior in smooth signal region.</p>","title":"Cubic"},{"location":"user-guide/settings/advanced/#lanczos","text":"<p>The Lanczos interpolation function is a mathematical formula used to smoothly interpolate the value of a digital image between its samples. It maps each sample of the given image to a translated and scaled copy of the Lanczos kernel, which is a sinc function windowed by the central hump of a dilated sinc function. The sum of these translated and scaled kernels is then evaluated at the desired pixel. Lanczos interpolation has the best properties in terms of detail preservation and minimal generation of aliasing artifacts for geometric transformations not involving strong down sampling. However higher order Lanczos interpolation requires high computational time, which makes it unsuitable for most commercial software.</p>","title":"Lanczos"},{"location":"user-guide/settings/advanced/#blackman","text":"<p>Blackman is a modification of Lanczos that has better control of ringing artifacts.</p>","title":"Blackman"},{"location":"user-guide/settings/advanced/#examples","text":"<p>Original image:</p> <p></p> <p>The same image resized from 600x400px to 150x100px using different resampling filters. From faster (lower quality) to slower (higher quality):</p>    Filter Resize result     Nearest Neighbor    Bilinear    Sharp Bicubic    Lanczos     <p>Source: A Comparative Analysis of Image Interpolation Algorithms</p>","title":"Examples"},{"location":"user-guide/settings/advanced/#raw-conversion","text":"<p>Many photographers keep their originals in some sort of lossless RAW format instead of compressed JPEG, especially when shooting with a Digital SLR. Some mobile phones also support RAW or use HEIC/HEIF for a similar purpose. PhotoPrism aims at providing excellent support for all RAW formats, independent of camera brand and model. Please let us know when there is an issue with your specific device.</p> <p>Web browsers in general cannot display RAW image files. They need to be converted, which is what our import and convert commands do. You'll also find a checkbox for this step in our Web UI.</p> <p>In addition, PhotoPrism also supports TIFF, PNG, BMP and GIF files. Be aware that files in those formats often don't contain useful metadata and are typically used for screenshots, charts, graphs and icons only.</p> <p></p>  <p>Generated sidecar files will be stored outside your originals folder by default, so that RAW to JPEG conversion also works in read-only mode.</p>","title":"RAW Conversion"},{"location":"user-guide/settings/advanced/#jpeg-size-limit","text":"<p>This controls the maximum size of downsampled JPEG preview files to create when converting original RAW images.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_JPEG_SIZE</code>.</p>","title":"JPEG Size Limit"},{"location":"user-guide/settings/advanced/#use-presets","text":"<p>Disables simultaneous conversion of RAW files to apply Darktable presets.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_RAW_PRESETS</code>.</p>","title":"Use Presets"},{"location":"user-guide/settings/advanced/#disable-darktable","text":"<p>When disabled Darktable won't be used for RAW conversion.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_DARKTABLE</code>.</p>","title":"Disable Darktable"},{"location":"user-guide/settings/advanced/#disable-rawtherapee","text":"<p>When disabled RawTherapee won't be used for RAW conversion.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_RAWTHERAPEE</code>.</p>","title":"Disable RawTherapee"},{"location":"user-guide/settings/advanced/#disable-ffmpeg","text":"<p>When disabled FFmpeg won't be used for video transcoding.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_FFMPEG</code>.</p>","title":"Disable FFmpeg"},{"location":"user-guide/settings/general/","text":"<p>In the General settings tab, you can configure basic user interface settings as well as the maps in Places:</p> <p></p>","title":"General Settings"},{"location":"user-guide/settings/general/#user-interface","text":"<p>You can change the theme and language of the User interface.</p> <p>To make PhotoPrism suite your individual needs the following sections and functionalities can be en- or disabled. Disabled sections do not appear in the main navigation.</p>","title":"User Interface"},{"location":"user-guide/settings/general/#upload","text":"<p>When disabled, uploading files via upload is not possible.  This might be useful when you grant others access to your PhotoPrism but do not want them to upload photos.</p>","title":"Upload"},{"location":"user-guide/settings/general/#download","text":"<p>When disabled, no files can be downloaded.</p>","title":"Download"},{"location":"user-guide/settings/general/#share","text":"<p>When disabled, album sharing and upload to remote services like ownCloud is not possible.</p>","title":"Share"},{"location":"user-guide/settings/general/#people","text":"<p>When disabled, the people section is hidden. To disable face detection while indexing, you may set <code>PHOTOPRISM_DISABLE_FACES</code> and/or <code>PHOTOPRISM_DISABLE_TENSORFLOW</code> to <code>\"true\"</code> in your config.</p>","title":"People"},{"location":"user-guide/settings/general/#hide-private","text":"<p>Excludes content marked as private from search results, shared albums, labels and places.</p>","title":"Hide Private"},{"location":"user-guide/settings/general/#archive","text":"<p>When disabled, there is no Archive. Photos that have been archived beforehand will appear again in search results.</p>","title":"Archive"},{"location":"user-guide/settings/general/#edit","text":"<p>When disabled, it is not possible to edit photo information.</p>","title":"Edit"},{"location":"user-guide/settings/general/#delete","text":"<p>When disabled, permanent deletion of files from the archive is not possible.</p>","title":"Delete"},{"location":"user-guide/settings/general/#originals","text":"<p>When disabled, there is no Originals section.</p>","title":"Originals"},{"location":"user-guide/settings/general/#moments","text":"<p>When disabled, there is no Moments section.</p>","title":"Moments"},{"location":"user-guide/settings/general/#labels","text":"<p>When disabled, there is no Labels section and you cannot add or edit labels.</p>","title":"Labels"},{"location":"user-guide/settings/general/#library","text":"<p>When disabled, there is no Library section.</p>","title":"Library"},{"location":"user-guide/settings/general/#import","text":"<p>When disabled, there is no possibility to import photos. You need to use index instead to add new photos.</p>","title":"Import"},{"location":"user-guide/settings/general/#logs","text":"<p>When disabled, server logs are not shown.</p>","title":"Logs"},{"location":"user-guide/settings/general/#places","text":"<p>When disabled, there is no Places section.</p>","title":"Places"},{"location":"user-guide/settings/general/#places_1","text":"<p>At the bottom of the General settings tab, you may choose your preferred map style and animation length for Places. PhotoPrism includes four high-resolution world maps to see where you've been, and for rediscovering long-forgotten shots.</p> <p>To enhance your photos with location data such as state, city and category, we've also launched our own geo-information service based on OpenStreetMap. A future release will additionally provide public events' data, so that albums of popular music festivals, or sports gatherings, can be created automatically.</p>","title":"Places"},{"location":"user-guide/settings/library/","text":"","title":"Library Settings"},{"location":"user-guide/settings/library/#index","text":"","title":"Index"},{"location":"user-guide/settings/library/#estimates","text":"<p>Estimate the approximate location of pictures without coordinates.</p>","title":"Estimates"},{"location":"user-guide/settings/library/#quality-filter","text":"<p>Non-photographic and low-quality images require a review before they appear in search results.</p>","title":"Quality Filter"},{"location":"user-guide/settings/library/#convert-to-jpeg","text":"<p>Automatically creates JPEGs for other file types so that they can be displayed in a browser.</p>  <p>Convert to JPEG should not be disabled, as this effectively prevents PhotoPrism from indexing file types other than JPEG unless the files have already been converted to JPEG and saved under the same filename prefix.</p>","title":"Convert to JPEG"},{"location":"user-guide/settings/library/#stacks","text":"<p>Stacks group files with a similar frame of reference, but differences of quality, format, size or color. Go to Photos &gt; Stacks to see all photo stacks in your library.</p> <p>PhotoPrism offers three methods for stacking files:</p> <ul> <li> Place &amp; Time </li> <li> Unique ID</li> <li> Sequential Name</li> </ul>  <p>Changing stacking settings won't unstack already stacked files.</p>","title":"Stacks"},{"location":"user-guide/settings/sync/","text":"<p>This page describes how PhotoPrism can sync files from an external storage system (like ownCloud) via WebDAV.</p>  <p>Since they are not safe to use without authentication, these settings are not available when running in public mode.</p>   <p>PhotoPrism can also serve/share files via WebDAV to be browsed on macOS or Windows. See instructions.</p>","title":"Sync Settings"},{"location":"user-guide/settings/sync/#connect-to-a-webdav-server","text":"<p>PhotoPrism may connect with WebDAV servers like a second PhotoPrism instance or ownCloud, so that you can automatically sync your latest pictures.</p> <p>To connect:</p> <ol> <li>Go to Settings</li> <li>Open Sync tab</li> <li>Click Add Server </li> <li>Fill in your WebDAV server url, username and password</li> <li>Click connect </li> <li>Now the other WebDAV server is connected with PhotoPrism</li> </ol>","title":"Connect to a WebDAV Server"},{"location":"user-guide/settings/sync/#manually-upload-files-to-a-webdav-server","text":"<p>To configure manual upload:</p> <ol> <li>Go to Settings</li> <li>Open Sync tab</li> <li>Click into the upload cell of your server</li> </ol> <p> 4. Select the folder to which photos should be uploaded and click save</p> <p></p> <p>To upload files from PhotoPrism to the WebDAV server:</p> <ol> <li>Go to Search</li> <li>Select photos you want to upload</li> <li>Open the context menu</li> <li>Click </li> <li>Select your server account and click upload</li> </ol> <p></p>  <p>Due to problems with some Nextcloud settings it might be that uploading to Nextcloud results in 0 byte files. You find information on how to solve it here.</p>","title":"Manually Upload Files to a WebDAV Server"},{"location":"user-guide/settings/sync/#automatically-uploaddownload-files-tofrom-a-webdav-server","text":"<ol> <li>Go to Settings</li> <li>Open Sync tab</li> <li>Click into the sync cell of your server </li> <li>Enable synchronization in the upper right corner</li> <li>Choose a folder on your server</li> <li>Choose a sync interval</li> <li>Select the options that are suitable for you and click Save</li> </ol> <p></p>","title":"Automatically Upload/Download Files to/from a WebDAV Server"},{"location":"user-guide/settings/sync/#remote-sync-options","text":"<ul> <li>Download remote files will download all files from the selected folder on your server that do not yet exist in PhotoPrism</li> <li>Upload local files will upload all files (including private or archived ones) from PhotoPrism to your server that do not yet exist there</li> <li>Preserve filenames will keep filenames from your server without renaming them</li> <li>Sync raw and video files will upload/download raw and video files alongside with JPEGS</li> </ul>","title":"Remote Sync Options"},{"location":"user-guide/share/","text":"<p>Create sharing links to share albums, moments or folders with your friends.</p> <p>Your friends are able to view and download photos from shared albums. Photos marked as private won't show up.</p> <p></p> <p>Support for optional password protection of sharing links as well as other enhancements are planned.</p>","title":"Sharing Albums via Link"},{"location":"user-guide/share/#create-sharing-link","text":"Using Context MenuVia Toolbar   <ol> <li>Go to Albums</li> <li>Select the album you want to share</li> <li>Open the context menu</li> <li>Click </li> </ol> <p></p>   <ol> <li>Go to Albums</li> <li>Open the album by clicking on it</li> <li>Click </li> </ol> <p></p>    <p>Then</p> <ol> <li>Click  to open the link details</li> <li>Set a secret and expiry date</li> <li> <p>Click save</p> <p></p> </li> <li> <p>Copy the link by clicking on it</p> <p></p> </li> <li> <p>Share it with your friends</p> </li> </ol>  <p>You can create additional links with different secrets and expiry dates by clicking .</p>","title":"Create Sharing Link"},{"location":"user-guide/share/#delete-sharing-link","text":"<ol> <li>Go to Albums</li> <li> <p>Click  on the album cover</p> <p></p> </li> <li> <p>Click </p> </li> <li> <p>Click </p> <p></p> </li> </ol>","title":"Delete Sharing Link"},{"location":"user-guide/sync/dropbox/","text":"<p>It's possible to use Dropbox to store your photos, while viewing and managing them through PhotoPrism.</p> <ol> <li>Set up a Dropbox account.</li> <li>Install the Dropbox desktop client.</li> <li>Sync your Dropbox to a local directory.</li> <li>If using Docker, configure your <code>docker-compose.yml</code> with;     <pre><code>volumes:\n  - \"~/Dropbox/Photos:/photoprism/originals\"\n</code></pre></li> <li>Follow the PhotoPrism getting started guide as normal.</li> </ol>","title":"Syncing with Dropbox"},{"location":"user-guide/sync/dropbox/#auto-upload-from-mobile","text":"<p>The Dropbox mobile apps also have a 'Camera Upload' feature which syncs photos to Dropbox, and then to any machine with Dropbox installed.</p> <p>To auto-import uploaded files into PhotoPrism;</p> <ol> <li>Install the Dropbox iOS or Android app.</li> <li>Enable 'Camera Uploads' in the Dropbox app's settings.</li> <li>Install the Dropbox desktop client on your server or a network-accessible machine</li> <li>Configure the <code>Camera Uploads</code> folder as your <code>import</code> directory for PhotoPrism.     In your <code>docker-compose.yml</code> file, this is;     <pre><code>volumes:\n  - \"~/Dropbox/Camera Uploads:/photoprism/import\"\n</code></pre></li> <li>Optional: Enable 'delete on import' in PhotoPrism's settings to delete imported files from Dropbox. This saves Dropbox space, allowing you to remain within the 2 GB free tier.</li> </ol>  <p>The Dropbox mobile app needs to be opened periodically or it tends to fail to identify and sync new photos.</p>","title":"Auto-upload from Mobile"},{"location":"user-guide/sync/dropbox/#smart-selective-sync","text":"<p>A useful (although paid) feature is Dropbox Smart Sync (with optional auto-evict) which will download the files from Dropbox's servers only when you (or PhotoPrism) accesses them (such as during initial indexing, or when downloading an original file via the PhotoPrism interface).</p> <p>This can save space on your server by automically offloading the originals unless/until they're viewed.</p>  <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>","title":"Smart / Selective Sync"},{"location":"user-guide/sync/mobile-devices/","text":"<p>To sync photos and videos on your phone with PhotoPrism, you can use any app that supports WebDAV.</p>  <p>You can disable WebDAV in the advanced settings. Since it requires write permissions and authentication, the built-in WebDAV server is automatically disabled when running in read-only or public mode.</p>","title":"Syncing with Mobile Devices"},{"location":"user-guide/sync/mobile-devices/#photosync","text":"<p>We recommend PhotoSync which is available for Android and iOS.</p>","title":"PhotoSync"},{"location":"user-guide/sync/mobile-devices/#set-photoprism-as-target","text":"<p>If you are using PhotoSync on Android you need to choose WebDAV as target.</p>  <ol> <li>Open PhotoSync and click </li> <li>Click Configure</li> <li> <p>Select PhotoPrism as target</p> <p> </p> </li> <li> <p>Enter your settings</p> <p></p> </li> <li> <p>Click Done</p> </li> <li> <p>You may adapt transfer details to match your preferences</p> <p> </p> </li> </ol>","title":"Set PhotoPrism as Target"},{"location":"user-guide/sync/mobile-devices/#set-up-automatic-sync","text":"<ol> <li>Open PhotoSync and click </li> <li> <p>Click Autotransfer</p> <p></p> </li> <li> <p>Click Add new trigger and choose one or more trigger</p> <p></p> </li> <li> <p>Choose PhotoPrism as target</p> </li> <li> <p>Click Done</p> <p></p> </li> </ol> <p>Because PhotoSync uses WebDAV to send files, PhotoPrism automatically starts importing/indexing when it receives new files.</p>","title":"Set Up Automatic Sync"},{"location":"user-guide/sync/mobile-devices/#other-apps","text":"<p>As long as you run PhotoPrism on a device where it is possible to enable Samba (Windows File Sharing), you can use this free opensource Android app:</p> <p>SMBSync2 - Github | SMBSync2 - Google Play</p>","title":"Other Apps"},{"location":"user-guide/sync/webdav/","text":"<p>WebDAV-compatible apps and clients such as PhotoSync, Microsoft's Windows Explorer, and Apple's Finder can connect directly to PhotoPrism.</p> <p>This mounts the originals and/or import folder as a network drive, allowing you to open, edit, and delete files from a remote device as if they were local.</p> <p>After files have been transferred, you can index or import them as usual. By default, indexing and importing start automatically after a safety delay when files have been uploaded using WebDAV.</p>  <p>You can disable WebDAV in the advanced settings. Since it requires write permissions and authentication, the built-in WebDAV server is automatically disabled when running in read-only or public mode.</p>   <p>It is also possible to sync files with external WebDAV servers such as ownCloud or other PhotoPrism instances.</p>","title":"Connecting via WebDAV"},{"location":"user-guide/sync/webdav/#server-url","text":"<p>The originals folder URL for a server exposed to the public Internet is:</p> <p><pre><code>https://admin@example.com/originals/\n</code></pre>  or</p> <pre><code>\\\\example.com@SSL\\originals\\\n</code></pre> <p>for Windows 10.</p> <p>Please replace example.com with your actual domain. The slash at the end is important and cannot be omitted.</p> <p>When connecting, you'll have to authenticate using your regular password. It will also change when you update it in Settings. The username is <code>admin</code>.</p>  <p>You can also connect to the import folder by replacing <code>originals/</code> with <code>import/</code> in the URL.</p>  <p>For users, who are running PhotoPrism locally on the default port 2342, the originals folder URL is:</p> <pre><code>http://admin@localhost:2342/originals/\n</code></pre>  <p>Never use WebDAV without HTTPS outside your local, private network as your password would be transmitted, in clear text, over the Internet. Backup tools and file sync apps  like FolderSync may refuse to connect as well.</p>","title":"Server URL"},{"location":"user-guide/sync/webdav/#connect-to-a-webdav-server","text":"macOSWindows 10   <ol> <li>In the Finder on your Mac, choose Go &gt; Connect to Server</li> <li>Enter the URL as shown above in the Server Address field</li> <li>Click Connect</li> </ol>   <ol> <li>Open Windows File Explorer</li> <li>Right click This PC</li> <li> <p>From the dropdown, select Map network drive...</p> <p></p> </li> <li> <p>Enter the drive letter and folder you want to map your WebDAV connection to</p> </li> <li>Check the boxes Reconnect at sign-in and Connect using different credentials</li> <li> <p>Click the Connect to a Web site that you can use to store your documents and pictures link</p> <p></p> </li> <li> <p>Click Next</p> <p></p> </li> <li> <p>Click Choose a custom network location and then click Next</p> <p> </p> </li> <li> <p>In the Internet or network address field, enter the URL as shown above and click Next</p> <p></p> </li> <li> <p>Enter your username and password and click Ok</p> <p></p> </li> <li> <p>Enter a name for the network location and click Next</p> <p></p> </li> <li> <p>Click Finish</p> <p></p> </li> </ol> <p>The originals folder appears as a mapped drive in Windows Explorer, and you can immediately add,  edit, or delete files and directories using the Windows File Explorer.</p> <p></p> <p>If you still have trouble connecting via WebDAV, you may have to update the Basic Authentication Level in the registry.</p>","title":"Connect to a WebDAV Server"},{"location":"user-guide/use-cases/apple/","text":"","title":"Migrate from Apple Photos"},{"location":"user-guide/use-cases/apple/#transfer-files","text":"<ol> <li>Select the files or albums you want to export</li> <li>Click File &gt; Export &gt; Export Unmodified Original For Photos</li> <li>Select Export IPTC as XMP</li> <li>Click Export</li> <li>Move the exported files/folders to your originals or import diectory and start indexing or importing</li> </ol>","title":"Transfer Files"},{"location":"user-guide/use-cases/apple/#metadata","text":"<p>Apple saves the following information in it's XMP files:</p> <ul> <li>Title</li> <li>Description</li> <li>TakenAt Date</li> <li>Keywords (include people)</li> <li>GPS information</li> </ul> <p>The following metadata is read by PhotoPrism from the exported XMP files for each photo during indexing:</p> <ul> <li>Title</li> <li>Description</li> <li>TakenAt Date</li> <li>Keywords</li> </ul>  <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>","title":"Metadata"},{"location":"user-guide/use-cases/flickr/","text":"","title":"Migrate from Flickr"},{"location":"user-guide/use-cases/flickr/#transfer-files","text":"<ol> <li>Go to https://www.flickr.com/account</li> <li>Request your Flickr data</li> <li>Depending on the amount of photos it can take a few days for your data to be exported</li> <li>Download your data and add it to your originals directory (including json files)</li> <li>Start indexing</li> </ol>  <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>","title":"Transfer Files"},{"location":"user-guide/use-cases/google/","text":"","title":"Migrate from Google Photos"},{"location":"user-guide/use-cases/google/#transfer-files","text":"<ol> <li>Go to Google Takeout</li> <li>Click <code>Deselect all</code> then check only <code>Google Photos</code>.</li> <li>Trigger the export of your Google Photos Data.</li> <li>Depending on the number of photos, it can take a few days for your data to be exported</li> <li>Download your data and extract all archives into to your originals or import folder<ul> <li>the folder should include the photos themselves, alongside json files for each of the photos</li> </ul> </li> <li>Start indexing or importing</li> </ol>","title":"Transfer Files"},{"location":"user-guide/use-cases/google/#metadata","text":"<p>The following metadata is read by PhotoPrism from each photo's JSON file</p> <ul> <li>Title</li> <li>Description</li> <li>Geolocation Info (lat/long)</li> <li>Date/Time Taken</li> <li>Date/Time Created</li> <li>Date/Time Updated</li> </ul>","title":"Metadata"},{"location":"user-guide/use-cases/google/#transfer-albums","text":"<p>Google Photos albums won't be automatically imported yet as we're trying to find a way to deal with  auto-generated albums users may not want to import.</p>  <p>The community has created a bash script to import albums from a Google Takeout. For more information and support, see the project page on Github:</p> <p>inthreedee/photoprism-transfer-album</p>  <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>","title":"Transfer Albums"}]}